make build-calicoctl BUILDOS=linux ARCH=amd64
make[1]: Entering directory '/home/mazdak/src/calico-private/calicoctl'
mkdir -p /home/mazdak/src/calico-private/.go-pkg-cache bin /home/mazdak/src/go/pkg/mod && docker run --rm --net=host --init -e GOPRIVATE=github.com/tigera/* -v /run/user/1000/keyring/ssh:/ssh-agent --env SSH_AUTH_SOCK=/ssh-agent -v /home/mazdak/src/go/pkg/mod:/go/pkg/mod:rw -e LOCAL_USER_ID=1000 -e GOCACHE=/go-cache -e GOARCH=amd64 -e GOPATH=/go -e OS=linux -e GOOS=linux -e GOFLAGS= -e ACK_GINKGO_DEPRECATIONS=1.16.5 -e ACK_GINKGO_RC=true -v /home/mazdak/src/calico-private:/go/src/github.com/projectcalico/calico:rw -v /home/mazdak/src/calico-private/.go-pkg-cache:/go-cache:rw -w /go/src/github.com/projectcalico/calico/calicoctl -e CGO_ENABLED=0 calico/go-build:v0.91 sh -c 'git config --global url."ssh://git@github.com/".insteadOf "https://github.com/"; go build -o  bin/calicoctl-linux-amd64  -v -buildvcs=false -ldflags "-X github.com/projectcalico/calico/calicoctl/calicoctl/commands.VERSION=v3.20.0-2.0-calient-0.dev-780-g80d266a3ad2c-dirty -X github.com/projectcalico/calico/calicoctl/calicoctl/commands.GIT_REVISION=80d266a3ad -X github.com/projectcalico/calico/calicoctl/calicoctl/commands/common.VERSION=v3.20.0-2.0-calient-0.dev-780-g80d266a3ad2c-dirty -X main.VERSION=v3.20.0-2.0-calient-0.dev-780-g80d266a3ad2c-dirty -s -w"  ./calicoctl/calicoctl.go'
Starting with UID: 1000
github.com/projectcalico/calico/calicoctl/calicoctl/commands/constants
k8s.io/apimachinery/pkg/selection
google.golang.org/protobuf/internal/flags
github.com/projectcalico/calico/libcalico-go/lib/backend/encap
k8s.io/apimachinery/pkg/types
google.golang.org/grpc/serviceconfig
github.com/k8snetworkplumbingwg/network-attachment-definition-client/pkg/apis/k8s.cni.cncf.io
github.com/go-playground/locales/currency
github.com/projectcalico/calico/libcalico-go/lib/apis/v1/unversioned
github.com/rivo/uniseg
google.golang.org/protobuf/internal/set
github.com/projectcalico/calico/libcalico-go/lib/scope
google.golang.org/protobuf/internal/pragma
google.golang.org/grpc/internal/buffer
golang.org/x/text/internal/tag
k8s.io/apimachinery/pkg/util/sets
go.uber.org/zap/internal/pool
golang.org/x/crypto/pbkdf2
golang.org/x/text/transform
google.golang.org/protobuf/internal/editiondefaults
k8s.io/apimachinery/pkg/version
golang.org/x/sys/unix
github.com/tigera/api/pkg/lib/numorstring
github.com/go-jose/go-jose/v4/cipher
github.com/projectcalico/calico/libcalico-go/lib/json
github.com/go-jose/go-jose/v4/json
github.com/jinzhu/copier
k8s.io/apimachinery/third_party/forked/golang/reflect
k8s.io/apimachinery/pkg/api/resource
k8s.io/apimachinery/pkg/fields
k8s.io/apimachinery/pkg/conversion/queryparams
k8s.io/apimachinery/pkg/runtime/schema
k8s.io/apimachinery/pkg/util/json
k8s.io/apimachinery/pkg/util/naming
github.com/projectcalico/calico/libcalico-go/lib/net
k8s.io/apimachinery/pkg/util/intstr
golang.org/x/text/unicode/bidi
k8s.io/apimachinery/pkg/util/runtime
golang.org/x/text/unicode/norm
golang.org/x/net/http2/hpack
github.com/projectcalico/calico/calicoctl/calicoctl/commands/argutils
github.com/go-openapi/swag
github.com/go-openapi/jsonreference/internal
google.golang.org/protobuf/internal/detrand
google.golang.org/protobuf/internal/version
k8s.io/apimachinery/pkg/conversion
github.com/containernetworking/cni/pkg/types
k8s.io/apimachinery/pkg/util/framer
k8s.io/apimachinery/pkg/util/yaml
google.golang.org/protobuf/internal/errors
k8s.io/client-go/pkg/version
k8s.io/apimachinery/pkg/util/dump
k8s.io/client-go/tools/metrics
github.com/containernetworking/cni/pkg/types/internal
github.com/containernetworking/cni/pkg/utils
golang.org/x/oauth2/internal
k8s.io/apimachinery/pkg/util/wait
google.golang.org/protobuf/encoding/protowire
k8s.io/client-go/util/connrotation
k8s.io/client-go/util/workqueue
k8s.io/client-go/util/keyutil
github.com/go-jose/go-jose/v4
github.com/containernetworking/cni/pkg/types/020
golang.org/x/text/secure/bidirule
google.golang.org/protobuf/reflect/protoreflect
k8s.io/client-go/util/flowcontrol
k8s.io/client-go/util/cert
golang.org/x/oauth2
k8s.io/apimachinery/pkg/util/errors
github.com/containernetworking/cni/pkg/types/040
k8s.io/client-go/applyconfigurations/internal
github.com/go-openapi/jsonpointer
github.com/gogo/protobuf/types
golang.org/x/net/context
github.com/containernetworking/cni/pkg/types/100
golang.org/x/net/internal/timeseries
google.golang.org/grpc/backoff
k8s.io/apimachinery/pkg/util/validation/field
k8s.io/apimachinery/pkg/runtime
google.golang.org/grpc/internal/grpclog
github.com/containernetworking/cni/pkg/types/create
golang.org/x/net/trace
github.com/go-openapi/jsonreference
google.golang.org/grpc/attributes
github.com/containernetworking/cni/pkg/version
google.golang.org/grpc/grpclog
golang.org/x/net/idna
k8s.io/kube-openapi/pkg/internal
google.golang.org/grpc/internal/envconfig
k8s.io/apimachinery/pkg/util/validation
google.golang.org/grpc/internal/backoff
github.com/containernetworking/cni/pkg/invoke
google.golang.org/protobuf/internal/encoding/messageset
google.golang.org/protobuf/internal/strs
google.golang.org/protobuf/internal/genid
google.golang.org/protobuf/internal/order
google.golang.org/protobuf/runtime/protoiface
google.golang.org/protobuf/internal/descfmt
k8s.io/apimachinery/pkg/labels
google.golang.org/protobuf/reflect/protoregistry
google.golang.org/protobuf/internal/descopts
github.com/containernetworking/cni/libcni
google.golang.org/grpc/connectivity
google.golang.org/grpc/internal/credentials
google.golang.org/grpc/internal/grpcsync
google.golang.org/protobuf/internal/encoding/text
github.com/go-jose/go-jose/v4/jwt
google.golang.org/protobuf/internal/encoding/json
google.golang.org/grpc/internal/idle
google.golang.org/grpc/keepalive
google.golang.org/protobuf/proto
golang.org/x/net/http/httpguts
google.golang.org/grpc/internal/resolver/dns/internal
github.com/projectcalico/calico/libcalico-go/lib/hash
github.com/Masterminds/goutils
github.com/Masterminds/semver
github.com/huandu/xstrings
golang.org/x/net/http2
github.com/imdario/mergo
github.com/mitchellh/reflectwalk
google.golang.org/protobuf/internal/encoding/defval
golang.org/x/crypto/scrypt
text/scanner
github.com/google/gopacket
github.com/robfig/cron
github.com/mitchellh/copystructure
golang.org/x/crypto/curve25519
github.com/alecthomas/participle/lexer
github.com/yalp/jsonpath
golang.zx2c4.com/wireguard/wgctrl/wgtypes
k8s.io/apimachinery/pkg/runtime/serializer/recognizer
github.com/sirupsen/logrus
k8s.io/apimachinery/pkg/runtime/serializer/streaming
golang.org/x/term
k8s.io/client-go/tools/clientcmd/api
google.golang.org/grpc/internal
google.golang.org/grpc/internal/syscall
k8s.io/apimachinery/pkg/runtime/serializer/json
github.com/Masterminds/sprig
github.com/alecthomas/participle
google.golang.org/grpc/metadata
google.golang.org/grpc/codes
github.com/go-playground/locales
github.com/leodido/go-urn
google.golang.org/grpc/internal/grpcutil
google.golang.org/protobuf/encoding/prototext
google.golang.org/protobuf/internal/filedesc
google.golang.org/grpc/credentials
google.golang.org/grpc/internal/balancerload
google.golang.org/grpc/encoding
google.golang.org/grpc/stats
google.golang.org/grpc/tap
github.com/google/gopacket/layers
github.com/go-playground/universal-translator
github.com/projectcalico/calico/libcalico-go/lib/selector/tokenizer
google.golang.org/grpc/internal/channelz
google.golang.org/grpc/resolver
google.golang.org/grpc/credentials/insecure
google.golang.org/grpc/internal/metadata
google.golang.org/grpc/internal/resolver/passthrough
google.golang.org/grpc/internal/transport/networktype
google.golang.org/grpc/peer
google.golang.org/grpc/balancer/grpclb/state
github.com/projectcalico/calico/libcalico-go/lib/selector/parser
github.com/projectcalico/calico/libcalico-go/lib/set
google.golang.org/grpc/internal/resolver/dns
google.golang.org/grpc/internal/resolver/unix
gopkg.in/go-playground/validator.v9
google.golang.org/grpc/channelz
k8s.io/apimachinery/pkg/util/cache
google.golang.org/grpc/balancer
k8s.io/apimachinery/pkg/util/diff
k8s.io/client-go/tools/cache/synctrack
github.com/projectcalico/calico/crypto/pkg/tls
github.com/cespare/xxhash/v2
google.golang.org/protobuf/encoding/protodelim
google.golang.org/grpc/resolver/dns
github.com/prometheus/procfs
google.golang.org/grpc/balancer/base
google.golang.org/grpc/internal/serviceconfig
github.com/projectcalico/calico/libcalico-go/lib/selector
github.com/projectcalico/calico/node/pkg/bgp
k8s.io/client-go/tools/clientcmd/api/v1
k8s.io/client-go/util/homedir
google.golang.org/grpc/internal/resolver
go.etcd.io/etcd/client/pkg/v3/types
google.golang.org/grpc/balancer/roundrobin
google.golang.org/grpc/internal/balancer/gracefulswitch
go.uber.org/zap/buffer
go.uber.org/zap/internal/color
go.uber.org/zap/internal/exit
go.etcd.io/etcd/client/pkg/v3/tlsutil
go.etcd.io/etcd/api/v3/version
go.etcd.io/etcd/client/pkg/v3/systemd
go.uber.org/zap/internal/bufferpool
go.etcd.io/etcd/client/pkg/v3/srv
go.etcd.io/etcd/client/v3/internal/endpoint
google.golang.org/grpc/resolver/manual
github.com/projectcalico/calico/libcalico-go/lib/options
go.uber.org/zap/zapcore
go.uber.org/zap/internal/stacktrace
github.com/projectcalico/calico/libcalico-go/lib/watch
k8s.io/apimachinery/pkg/util/uuid
go.etcd.io/etcd/client/v3/internal/resolver
github.com/projectcalico/calico/calicoctl/calicoctl/commands/file
github.com/projectcalico/calico/calicoctl/calicoctl/util/yaml
github.com/projectcalico/calico/licensing/crypto
k8s.io/apimachinery/pkg/util/mergepatch
google.golang.org/protobuf/internal/encoding/tag
k8s.io/apimachinery/third_party/forked/golang/json
google.golang.org/protobuf/encoding/protojson
github.com/projectcalico/calico/calicoctl/calicoctl/util
golang.org/x/text/internal/language
github.com/mattn/go-runewidth
github.com/shirou/gopsutil/mem
google.golang.org/protobuf/internal/impl
github.com/olekukonko/tablewriter
github.com/shirou/gopsutil/process
k8s.io/apimachinery/pkg/util/net
golang.org/x/text/internal/language/compact
golang.org/x/text/language
go.uber.org/zap/internal
go.uber.org/zap
k8s.io/apimachinery/pkg/watch
k8s.io/client-go/transport
golang.org/x/text/internal
golang.org/x/text/cases
k8s.io/apimachinery/pkg/apis/meta/v1
go.uber.org/zap/zapgrpc
go.etcd.io/etcd/client/pkg/v3/logutil
go.etcd.io/etcd/client/pkg/v3/fileutil
go.etcd.io/etcd/client/pkg/v3/transport
google.golang.org/protobuf/internal/filetype
github.com/projectcalico/calico/libcalico-go/lib/validator/v3/query
google.golang.org/protobuf/runtime/protoimpl
google.golang.org/protobuf/types/known/durationpb
google.golang.org/genproto/googleapis/api
google.golang.org/protobuf/protoadapt
google.golang.org/protobuf/types/known/timestamppb
google.golang.org/protobuf/types/known/anypb
google.golang.org/protobuf/types/descriptorpb
google.golang.org/grpc/internal/pretty
google.golang.org/grpc/encoding/proto
github.com/golang/protobuf/ptypes/duration
google.golang.org/grpc/balancer/pickfirst
github.com/golang/protobuf/ptypes/any
google.golang.org/genproto/googleapis/rpc/status
github.com/golang/protobuf/ptypes/timestamp
google.golang.org/grpc/binarylog/grpc_binarylog_v1
github.com/prometheus/client_model/go
google.golang.org/grpc/internal/status
google.golang.org/grpc/status
github.com/prometheus/common/model
go.etcd.io/etcd/api/v3/v3rpc/rpctypes
google.golang.org/grpc/internal/binarylog
google.golang.org/grpc/internal/transport
k8s.io/api/authentication/v1
k8s.io/apimachinery/pkg/api/errors
github.com/k8snetworkplumbingwg/network-attachment-definition-client/pkg/apis/k8s.cni.cncf.io/v1
k8s.io/apimachinery/pkg/runtime/serializer/protobuf
k8s.io/api/apidiscovery/v2beta1
k8s.io/apimachinery/pkg/apis/meta/v1/unstructured
k8s.io/api/core/v1
k8s.io/api/admissionregistration/v1
k8s.io/api/apiserverinternal/v1alpha1
k8s.io/api/authorization/v1
google.golang.org/protobuf/internal/editionssupport
google.golang.org/protobuf/types/gofeaturespb
k8s.io/api/authorization/v1beta1
k8s.io/apimachinery/pkg/runtime/serializer/versioning
k8s.io/api/certificates/v1alpha1
google.golang.org/protobuf/reflect/protodesc
k8s.io/api/coordination/v1
k8s.io/apimachinery/pkg/runtime/serializer
k8s.io/api/coordination/v1beta1
k8s.io/api/flowcontrol/v1alpha1
k8s.io/api/flowcontrol/v1beta1
k8s.io/api/flowcontrol/v1beta2
k8s.io/api/flowcontrol/v1beta3
github.com/golang/protobuf/proto
k8s.io/api/admissionregistration/v1alpha1
k8s.io/apiserver/pkg/apis/audit
k8s.io/api/admissionregistration/v1beta1
k8s.io/api/authentication/v1alpha1
k8s.io/api/authentication/v1beta1
k8s.io/api/policy/v1
k8s.io/api/rbac/v1
k8s.io/api/rbac/v1alpha1
k8s.io/apimachinery/pkg/api/meta
k8s.io/api/rbac/v1beta1
k8s.io/apimachinery/pkg/api/equality
k8s.io/apimachinery/pkg/apis/meta/v1/validation
github.com/golang/protobuf/ptypes
k8s.io/client-go/pkg/apis/clientauthentication
k8s.io/client-go/rest/watch
github.com/google/gnostic-models/extensions
k8s.io/client-go/util/retry
google.golang.org/grpc
k8s.io/apimachinery/pkg/apis/meta/v1beta1
github.com/prometheus/client_golang/prometheus/internal
github.com/prometheus/common/expfmt
k8s.io/client-go/pkg/apis/clientauthentication/v1
github.com/google/gnostic-models/compiler
k8s.io/client-go/pkg/apis/clientauthentication/v1beta1
k8s.io/apimachinery/pkg/apis/meta/internalversion
k8s.io/client-go/tools/clientcmd/api/latest
go.etcd.io/etcd/api/v3/mvccpb
go.etcd.io/etcd/api/v3/authpb
github.com/google/gnostic-models/openapiv3
github.com/google/gnostic-models/openapiv2
k8s.io/client-go/pkg/apis/clientauthentication/install
go.etcd.io/etcd/api/v3/membershippb
google.golang.org/genproto/googleapis/api/annotations
k8s.io/apimachinery/pkg/api/validation
k8s.io/client-go/plugin/pkg/client/auth/exec
k8s.io/client-go/tools/pager
go.etcd.io/etcd/client/v3/credentials
k8s.io/apiextensions-apiserver/pkg/apis/apiextensions
github.com/prometheus/client_golang/prometheus
k8s.io/client-go/rest
k8s.io/apiextensions-apiserver/pkg/apis/apiextensions/v1beta1
k8s.io/apiextensions-apiserver/pkg/apis/apiextensions/v1
k8s.io/client-go/tools/auth
k8s.io/client-go/plugin/pkg/client/auth/gcp
k8s.io/client-go/plugin/pkg/client/auth/azure
k8s.io/client-go/plugin/pkg/client/auth/oidc
k8s.io/client-go/tools/cache
k8s.io/client-go/tools/clientcmd
k8s.io/client-go/plugin/pkg/client/auth
go.etcd.io/etcd/api/v3/etcdserverpb
github.com/projectcalico/calico/felix/proto
github.com/prometheus/client_golang/prometheus/promhttp
github.com/projectcalico/calico/calicoctl/calicoctl/commands/crds
github.com/projectcalico/calico/libcalico-go/lib/security
k8s.io/apiextensions-apiserver/pkg/client/clientset/clientset/scheme
github.com/projectcalico/calico/node/pkg/metrics
github.com/projectcalico/calico/libcalico-go/lib/winutils
k8s.io/kube-openapi/pkg/util/proto
k8s.io/kube-openapi/pkg/validation/spec
k8s.io/apimachinery/pkg/util/strategicpatch
k8s.io/kube-openapi/pkg/spec3
k8s.io/kube-openapi/pkg/schemaconv
k8s.io/kube-openapi/pkg/schemamutation
k8s.io/kube-openapi/pkg/builder3/util
k8s.io/apimachinery/pkg/util/managedfields/internal
k8s.io/kube-openapi/pkg/openapiconv
k8s.io/kube-openapi/pkg/common
k8s.io/apimachinery/pkg/util/managedfields
go.etcd.io/etcd/client/v3
k8s.io/kube-openapi/pkg/handler3
github.com/projectcalico/calico/libcalico-go/lib/apis/v1
k8s.io/client-go/openapi
k8s.io/api/discovery/v1
k8s.io/api/certificates/v1
k8s.io/api/certificates/v1beta1
k8s.io/api/networking/v1
k8s.io/api/autoscaling/v1
k8s.io/api/autoscaling/v2beta1
k8s.io/api/autoscaling/v2
k8s.io/api/autoscaling/v2beta2
k8s.io/api/batch/v1
k8s.io/api/apps/v1beta1
k8s.io/api/apps/v1beta2
k8s.io/api/apps/v1
k8s.io/api/discovery/v1beta1
k8s.io/api/events/v1
k8s.io/api/events/v1beta1
k8s.io/api/networking/v1alpha1
k8s.io/api/networking/v1beta1
k8s.io/api/node/v1
k8s.io/api/node/v1alpha1
k8s.io/api/batch/v1beta1
k8s.io/api/node/v1beta1
k8s.io/api/policy/v1beta1
k8s.io/api/resource/v1alpha2
k8s.io/api/scheduling/v1
k8s.io/api/extensions/v1beta1
k8s.io/api/scheduling/v1alpha1
k8s.io/api/scheduling/v1beta1
github.com/tigera/api/pkg/apis/projectcalico/v3
github.com/projectcalico/calico/libcalico-go/lib/errors
k8s.io/api/storage/v1
k8s.io/api/storage/v1alpha1
k8s.io/api/storage/v1beta1
k8s.io/client-go/tools/reference
k8s.io/client-go/kubernetes/scheme
k8s.io/client-go/discovery
k8s.io/client-go/kubernetes/typed/authentication/v1
k8s.io/client-go/kubernetes/typed/authorization/v1beta1
k8s.io/client-go/kubernetes/typed/authentication/v1beta1
k8s.io/client-go/kubernetes/typed/authentication/v1alpha1
k8s.io/client-go/kubernetes/typed/authorization/v1
k8s.io/client-go/applyconfigurations/meta/v1
k8s.io/client-go/applyconfigurations/apiserverinternal/v1alpha1
k8s.io/client-go/applyconfigurations/coordination/v1
k8s.io/client-go/applyconfigurations/autoscaling/v1
k8s.io/client-go/applyconfigurations/admissionregistration/v1
k8s.io/client-go/applyconfigurations/certificates/v1alpha1
k8s.io/client-go/applyconfigurations/certificates/v1
k8s.io/client-go/applyconfigurations/certificates/v1beta1
k8s.io/client-go/applyconfigurations/autoscaling/v2beta1
k8s.io/client-go/applyconfigurations/autoscaling/v2beta2
k8s.io/client-go/applyconfigurations/autoscaling/v2
k8s.io/client-go/applyconfigurations/core/v1
github.com/projectcalico/calico/libcalico-go/lib/apiconfig
github.com/projectcalico/calico/libcalico-go/lib/apis/v3
k8s.io/client-go/kubernetes/typed/apiserverinternal/v1alpha1
k8s.io/client-go/kubernetes/typed/certificates/v1alpha1
k8s.io/client-go/kubernetes/typed/certificates/v1beta1
k8s.io/client-go/kubernetes/typed/autoscaling/v1
k8s.io/client-go/kubernetes/typed/coordination/v1
k8s.io/client-go/kubernetes/typed/certificates/v1
k8s.io/client-go/kubernetes/typed/admissionregistration/v1
k8s.io/client-go/applyconfigurations/admissionregistration/v1alpha1
k8s.io/client-go/applyconfigurations/admissionregistration/v1beta1
k8s.io/client-go/kubernetes/typed/autoscaling/v2
k8s.io/client-go/kubernetes/typed/autoscaling/v2beta1
k8s.io/client-go/kubernetes/typed/autoscaling/v2beta2
k8s.io/client-go/applyconfigurations/coordination/v1beta1
k8s.io/client-go/applyconfigurations/flowcontrol/v1alpha1
k8s.io/client-go/applyconfigurations/flowcontrol/v1beta1
k8s.io/client-go/applyconfigurations/flowcontrol/v1beta2
k8s.io/client-go/applyconfigurations/flowcontrol/v1beta3
k8s.io/client-go/applyconfigurations/policy/v1
k8s.io/client-go/applyconfigurations/rbac/v1
k8s.io/client-go/kubernetes/typed/coordination/v1beta1
k8s.io/client-go/applyconfigurations/rbac/v1alpha1
k8s.io/client-go/kubernetes/typed/admissionregistration/v1alpha1
k8s.io/client-go/kubernetes/typed/admissionregistration/v1beta1
k8s.io/client-go/kubernetes/typed/flowcontrol/v1beta1
k8s.io/client-go/kubernetes/typed/policy/v1
k8s.io/client-go/kubernetes/typed/flowcontrol/v1beta2
k8s.io/client-go/kubernetes/typed/flowcontrol/v1alpha1
k8s.io/client-go/kubernetes/typed/rbac/v1alpha1
k8s.io/client-go/applyconfigurations/rbac/v1beta1
k8s.io/client-go/kubernetes/typed/flowcontrol/v1beta3
k8s.io/client-go/applyconfigurations/scheduling/v1
k8s.io/client-go/applyconfigurations/scheduling/v1alpha1
k8s.io/client-go/kubernetes/typed/rbac/v1
k8s.io/client-go/applyconfigurations/scheduling/v1beta1
github.com/projectcalico/calico/libcalico-go/lib/compliance
k8s.io/apiextensions-apiserver/pkg/client/applyconfiguration/apiextensions/v1beta1
k8s.io/apiextensions-apiserver/pkg/client/applyconfiguration/apiextensions/v1
k8s.io/client-go/kubernetes/typed/scheduling/v1beta1
k8s.io/client-go/kubernetes/typed/scheduling/v1
k8s.io/client-go/kubernetes/typed/rbac/v1beta1
k8s.io/client-go/kubernetes/typed/scheduling/v1alpha1
github.com/projectcalico/calico/libcalico-go/lib/namespace
github.com/projectcalico/calico/licensing/client/features
k8s.io/apiextensions-apiserver/pkg/client/clientset/clientset/typed/apiextensions/v1
github.com/projectcalico/calico/libcalico-go/lib/backend/model
k8s.io/apiextensions-apiserver/pkg/client/clientset/clientset/typed/apiextensions/v1beta1
k8s.io/apiextensions-apiserver/pkg/client/clientset/clientset
github.com/projectcalico/calico/licensing/client
k8s.io/client-go/applyconfigurations/discovery/v1
k8s.io/client-go/applyconfigurations/events/v1
k8s.io/client-go/applyconfigurations/discovery/v1beta1
k8s.io/client-go/applyconfigurations/apps/v1beta2
k8s.io/client-go/kubernetes/typed/core/v1
k8s.io/client-go/applyconfigurations/networking/v1
k8s.io/client-go/applyconfigurations/apps/v1beta1
k8s.io/client-go/applyconfigurations/events/v1beta1
k8s.io/client-go/applyconfigurations/batch/v1
k8s.io/client-go/applyconfigurations/apps/v1
k8s.io/client-go/applyconfigurations/extensions/v1beta1
k8s.io/client-go/kubernetes/typed/events/v1
k8s.io/client-go/kubernetes/typed/discovery/v1
k8s.io/client-go/applyconfigurations/networking/v1alpha1
k8s.io/client-go/kubernetes/typed/events/v1beta1
k8s.io/client-go/kubernetes/typed/networking/v1
k8s.io/client-go/kubernetes/typed/discovery/v1beta1
github.com/projectcalico/calico/libcalico-go/lib/backend/api
k8s.io/client-go/applyconfigurations/networking/v1beta1
k8s.io/client-go/kubernetes/typed/apps/v1beta2
k8s.io/client-go/kubernetes/typed/batch/v1
k8s.io/client-go/kubernetes/typed/apps/v1beta1
k8s.io/client-go/applyconfigurations/batch/v1beta1
k8s.io/client-go/kubernetes/typed/networking/v1alpha1
k8s.io/client-go/kubernetes/typed/apps/v1
k8s.io/client-go/applyconfigurations/node/v1
k8s.io/client-go/applyconfigurations/node/v1alpha1
k8s.io/client-go/applyconfigurations/node/v1beta1
k8s.io/client-go/kubernetes/typed/extensions/v1beta1
k8s.io/client-go/kubernetes/typed/networking/v1beta1
k8s.io/client-go/kubernetes/typed/node/v1
k8s.io/client-go/applyconfigurations/policy/v1beta1
k8s.io/client-go/kubernetes/typed/batch/v1beta1
k8s.io/client-go/applyconfigurations/resource/v1alpha2
k8s.io/client-go/kubernetes/typed/node/v1beta1
k8s.io/client-go/kubernetes/typed/node/v1alpha1
k8s.io/client-go/applyconfigurations/storage/v1
k8s.io/client-go/applyconfigurations/storage/v1alpha1
k8s.io/client-go/applyconfigurations/storage/v1beta1
github.com/projectcalico/calico/libcalico-go/lib/names
github.com/projectcalico/calico/libcalico-go/lib/resources
k8s.io/client-go/kubernetes/typed/policy/v1beta1
k8s.io/client-go/kubernetes/typed/storage/v1alpha1
github.com/projectcalico/calico/libcalico-go/lib/upgrade/converters
k8s.io/client-go/kubernetes/typed/resource/v1alpha2
github.com/projectcalico/calico/libcalico-go/lib/ipam
k8s.io/client-go/kubernetes/typed/storage/v1
k8s.io/client-go/kubernetes/typed/storage/v1beta1
github.com/projectcalico/calico/libcalico-go/lib/backend/etcdv3
k8s.io/client-go/kubernetes
github.com/k8snetworkplumbingwg/network-attachment-definition-client/pkg/utils
github.com/projectcalico/calico/libcalico-go/lib/backend/k8s/conversion
github.com/projectcalico/calico/libcalico-go/lib/validator/v3
github.com/projectcalico/calico/libcalico-go/lib/validator/v1
github.com/projectcalico/calico/libcalico-go/lib/backend/k8s/resources
github.com/projectcalico/calico/calicoctl/calicoctl/commands/resourceloader
github.com/projectcalico/calico/libcalico-go/lib/backend/k8s
github.com/projectcalico/calico/libcalico-go/lib/backend
github.com/projectcalico/calico/libcalico-go/lib/clientv3
github.com/projectcalico/calico/calicoctl/calicoctl/commands/clientmgr
github.com/projectcalico/calico/calicoctl/calicoctl/resourcemgr
github.com/projectcalico/calico/calicoctl/calicoctl/commands/common
github.com/projectcalico/calico/calicoctl/calicoctl/commands/bgp
github.com/projectcalico/calico/calicoctl/calicoctl/commands/capture
github.com/projectcalico/calico/calicoctl/calicoctl/commands/cluster
github.com/projectcalico/calico/calicoctl/calicoctl/commands/datastore/migrate
github.com/projectcalico/calico/calicoctl/calicoctl/commands/node
github.com/projectcalico/calico/calicoctl/calicoctl/commands/ipam
github.com/projectcalico/calico/calicoctl/calicoctl/commands/datastore
github.com/projectcalico/calico/calicoctl/calicoctl/commands
command-line-arguments
make[1]: Leaving directory '/home/mazdak/src/calico-private/calicoctl'
mkdir -p /home/mazdak/src/calico-private/.go-pkg-cache bin /home/mazdak/src/go/pkg/mod && docker run --rm --net=host --init -e GOPRIVATE=github.com/tigera/* -v /run/user/1000/keyring/ssh:/ssh-agent --env SSH_AUTH_SOCK=/ssh-agent -v /home/mazdak/src/go/pkg/mod:/go/pkg/mod:rw -e LOCAL_USER_ID=1000 -e GOCACHE=/go-cache -e GOARCH=amd64 -e GOPATH=/go -e OS=linux -e GOOS=linux -e GOFLAGS= -e ACK_GINKGO_DEPRECATIONS=1.16.5 -e ACK_GINKGO_RC=true -v /home/mazdak/src/calico-private:/go/src/github.com/projectcalico/calico:rw -v /home/mazdak/src/calico-private/.go-pkg-cache:/go-cache:rw -w /go/src/github.com/projectcalico/calico/calicoctl -e CGO_ENABLED=0 calico/go-build:v0.91 sh -c 'git config --global url."ssh://git@github.com/".insteadOf "https://github.com/"; go build -o  tests/fv/helper/bin/calico_version_helper  -v -buildvcs=false -ldflags "-X github.com/projectcalico/calico/calicoctl/calicoctl/commands.VERSION=v3.20.0-2.0-calient-0.dev-780-g80d266a3ad2c-dirty -X github.com/projectcalico/calico/calicoctl/calicoctl/commands.GIT_REVISION=80d266a3ad -X github.com/projectcalico/calico/calicoctl/calicoctl/commands/common.VERSION=v3.20.0-2.0-calient-0.dev-780-g80d266a3ad2c-dirty -X main.VERSION=v3.20.0-2.0-calient-0.dev-780-g80d266a3ad2c-dirty -s -w"  tests/fv/helper/calico_version_helper.go'
Starting with UID: 1000
command-line-arguments
make run-etcd
make[1]: Entering directory '/home/mazdak/src/calico-private/calicoctl'
calico-etcd
docker run --detach \
	--net=host \
	--entrypoint=/usr/local/bin/etcd \
	--name calico-etcd quay.io/coreos/etcd:v3.5.6 \
	--enable-v2 \
	--advertise-client-urls "http://172.16.129.8:2379,http://127.0.0.1:2379,http://172.16.129.8:4001,http://127.0.0.1:4001" \
	--listen-client-urls "http://0.0.0.0:2379,http://0.0.0.0:4001"
230a0d2bb763e4c12970f1df30099dd6ce39a6ade895422bfcbb3a08b4f1cc07
make[1]: Leaving directory '/home/mazdak/src/calico-private/calicoctl'
make run-kubernetes-master
make[1]: Entering directory '/home/mazdak/src/calico-private/calicoctl'
# Delete the cluster role binding.
docker exec st-apiserver-6443 kubectl delete clusterrolebinding anonymous-admin
Error from server (NotFound): clusterrolebindings.rbac.authorization.k8s.io "anonymous-admin" not found
make[1]: [Makefile:234: stop-kubernetes-master] Error 1 (ignored)
# Stop master components.
docker rm -f st-apiserver-6443 st-controller-manager-6443
st-apiserver-6443
st-controller-manager-6443
# Run a Kubernetes apiserver using Docker.
docker run --net=host --detach \
	--name st-apiserver-6443 \
	-v /home/mazdak/src/calico-private/calicoctl:/code \
	-v /home/mazdak/src/calico-private/calicoctl/../:/go/src/github.com/projectcalico/calico \
	-v /home/mazdak/src/calico-private/hack/test/certs:/home/user/certs \
	-e KUBECONFIG=/home/user/certs/kubeconfig \
	calico/go-build:v0.91 kube-apiserver \
		--secure-port=6443 \
		--admission-control=NamespaceLifecycle,LimitRanger,DefaultStorageClass,ResourceQuota \
		--etcd-servers=http://172.16.129.8:2379 \
                        --service-cluster-ip-range=10.101.0.0/16 \
                        --authorization-mode=RBAC \
                        --service-account-key-file=/home/user/certs/service-account.pem \
                        --service-account-signing-key-file=/home/user/certs/service-account-key.pem \
                        --service-account-issuer=https://localhost:443 \
                        --api-audiences=kubernetes.default \
                        --client-ca-file=/home/user/certs/ca.pem \
                        --tls-cert-file=/home/user/certs/kubernetes.pem \
                        --tls-private-key-file=/home/user/certs/kubernetes-key.pem \
                        --enable-priority-and-fairness=false \
                        --max-mutating-requests-inflight=0 \
                        --max-requests-inflight=0
7af2a8b7ad97966446a9ebee2f514562f0edf05435654e75b3fe4ee34ea738b8
# Wait until the apiserver is accepting requests.
while ! docker exec st-apiserver-6443 kubectl --server=https://127.0.0.1:6443 get nodes; do echo "Waiting for apiserver to come up..."; sleep 2; done
No resources found
# And run the controller manager.
docker run --detach --net=host \
  --name st-controller-manager-6443 \
  -v /home/mazdak/src/calico-private/hack/test/certs:/home/user/certs \
  calico/go-build:v0.91 kube-controller-manager \
    --master=https://127.0.0.1:6443 \
            --kubeconfig=/home/user/certs/kube-controller-manager.kubeconfig \
            --min-resync-period=3m \
            --allocate-node-cidrs=true \
            --cluster-cidr=10.10.0.0/16 \
            --v=5 \
            --service-account-private-key-file=/home/user/certs/service-account-key.pem \
            --root-ca-file=/home/user/certs/ca.pem
07fcba591df00ee530c2976d78ad0a8f0e0aed028e5095767df3517ce68462ab
# Create a Node in the API for the tests to use.
while ! docker exec -ti st-apiserver-6443 kubectl \
	--server=https://127.0.0.1:6443 \
	apply -f /code/tests/st/manifests/mock-node.yaml; \
	do echo "Waiting for node to apply successfully..."; sleep 2; done
node/node4 created
# Apply CRDs because the tests require them.
while ! docker exec -ti st-apiserver-6443 kubectl \
	--server=https://127.0.0.1:6443 \
	apply -f /go/src/github.com/projectcalico/calico/libcalico-go/config/crd; \
	do echo "Waiting for ClusterInformation CRD to apply successfully..."; sleep 2; done
customresourcedefinition.apiextensions.k8s.io/alertexceptions.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/bgpfilters.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/caliconodestatuses.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/deeppacketinspections.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/egressgatewaypolicies.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/externalnetworks.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/globalalerts.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/globalalerttemplates.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/globalreports.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/globalreporttypes.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/globalthreatfeeds.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/ipreservations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/kubecontrollersconfigurations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/licensekeys.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/managedclusters.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/packetcaptures.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/policyrecommendationscopes.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/remoteclusterconfigurations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/securityeventwebhooks.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/stagedglobalnetworkpolicies.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/stagedkubernetesnetworkpolicies.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/stagednetworkpolicies.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/tiers.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/uisettings.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/uisettingsgroups.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/licenseusagereports.usage.tigera.io created
# Create a namespace in the API for the tests to use.
docker exec -ti st-apiserver-6443 kubectl \
	--server=https://127.0.0.1:6443 \
	create namespace test
namespace/test created
make[1]: Leaving directory '/home/mazdak/src/calico-private/calicoctl'
# Use the host, PID and network namespaces from the host.
# Privileged is needed since 'calico node' write to /proc (to enable ip_forwarding)
# Map the docker socket in so docker can be used from inside the container
# All of code under test is mounted into the container.
#   - This also provides access to calicoctl and the docker client
docker run --net=host --privileged \
	   -e MY_IP=172.16.129.8 \
	   --rm -t \
	   -v /home/mazdak/src/calico-private/hack/test/certs:/home/user/certs \
	   -v /home/mazdak/src/calico-private/calicoctl:/code \
	   -v /home/mazdak/.banzai/secrets:/secrets \
	   -v /var/run/docker.sock:/var/run/docker.sock \
	   calico/test \
	   sh -c 'nosetests tests/st/calicoctl/ -sv --nologcapture  --with-xunit --xunit-file="/code/report/nosetests.xml" --with-timer '
/usr/lib/python2.7/site-packages/nose_parameterized/__init__.py:7: UserWarning: The 'nose-parameterized' package has been renamed 'parameterized'. For the two step migration instructions, see: https://github.com/wolever/parameterized#migrating-from-nose-parameterized-to-parameterized (set NOSE_PARAMETERIZED_NO_WARN=1 to suppress this warning)
  "The 'nose-parameterized' package has been renamed 'parameterized'. "
test_invalid_compound_profiles_rejected_0_compound_config (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"errorCode":100,"message":"Key not found","cause":"/calico","index":3}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":4,"createdIndex":4}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
[{'kind': 'BGPPeer', 'spec': {'node': 'node1', 'peerIP': '192.168.0.250', 'asNumber': 64513}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'compound-config'}}, {'kind': 'Profile', 'spec': {'Ingress': [{'protocol': 'ICMP', 'destination': {}, 'ipVersion': 4, 'source': {}, 'action': 'Deny', 'ICMP': {'code': 255, 'type': 256}}], 'Egress': [{'action': 'Allow', 'source': {}, 'destination': {}}]}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'profile2'}}]
  # 
Writing /tmp/input-data: 
- apiVersion: projectcalico.org/v3
  kind: BGPPeer
  metadata:
    name: compound-config
  spec:
    asNumber: 64513
    node: node1
    peerIP: 192.168.0.250
- apiVersion: projectcalico.org/v3
  kind: Profile
  metadata:
    name: profile2
  spec:
    Egress:
    - action: Allow
      destination: {}
      source: {}
    Ingress:
    - ICMP:
        code: 255
        type: 256
      action: Deny
      destination: {}
      ipVersion: 4
      protocol: ICMP
      source: {}

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Hit error: [error with field Type = '256' (Reason: failed to validate Field: Type because of Tag: lte )]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Profile --output=yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: Profile
  #   metadata:
  #     creationTimestamp: null
  #     name: projectcalico-default-allow
  #     resourceVersion: "0"
  #   spec:
  #     egress:
  #     - action: Allow
  #       destination: {}
  #       source: {}
  #     ingress:
  #     - action: Allow
  #       destination: {}
  #       source: {}
  # kind: ProfileList
  # metadata:
  #   resourceVersion: "309"
ok ([32m0.2033s[0m)
test_invalid_profiles_rejected_0_bgpPeer_invalidASnum (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":5,"createdIndex":4},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":4,"createdIndex":4}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":6,"createdIndex":6}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'BGPPeer', 'spec': {'node': 'node1', 'peerIP': '192.168.0.250', 'asNumber': 4294967296, 'scope': 'node'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'bgppeer2'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: bgppeer2
spec:
  asNumber: 4294967296
  node: node1
  peerIP: 192.168.0.250
  scope: node

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to execute command: error parsing document: json: cannot unmarshal number into Go value of type string
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get BGPPeer --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: BGPPeerList
  # metadata:
  #   resourceVersion: "313"
ok ([32m0.1692s[0m)
test_invalid_profiles_rejected_10_policy_invalidLowPortinList (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":7,"createdIndex":6},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":6,"createdIndex":6}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":8,"createdIndex":8}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'NetworkPolicy', 'spec': {'Ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'Egress': [{'action': 'Deny', 'source': {'ports': [0, 10, 80]}, 'destination': {}, 'protocol': 'TCP'}], 'order': 100000, 'selector': ''}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'policy2'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: policy2
spec:
  Egress:
  - action: Deny
    destination: {}
    protocol: TCP
    source:
      ports:
      - 0
      - 10
      - 80
  Ingress:
  - action: Allow
    destination: {}
    protocol: UDP
    source: {}
  order: 100000
  selector: ''

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'NetworkPolicy' resource: [error with field Port = '0' (port range invalid, port number must be between 1 and 65535)]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: NetworkPolicyList
  # metadata:
  #   resourceVersion: "317"
ok ([32m0.1749s[0m)
test_invalid_profiles_rejected_11_policy_invalidReversedRange (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":9,"createdIndex":8},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":8,"createdIndex":8}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":10,"createdIndex":10}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'NetworkPolicy', 'spec': {'Ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'Egress': [{'action': 'Deny', 'source': {'ports': ['65535:1']}, 'destination': {}, 'protocol': 'TCP'}], 'order': 100000, 'selector': ''}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'policy2'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: policy2
spec:
  Egress:
  - action: Deny
    destination: {}
    protocol: TCP
    source:
      ports:
      - '65535:1'
  Ingress:
  - action: Allow
    destination: {}
    protocol: UDP
    source: {}
  order: 100000
  selector: ''

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to execute command: error parsing document: minimum port number (65535) is greater than maximum port number (1) in port range
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: NetworkPolicyList
  # metadata:
  #   resourceVersion: "321"
ok ([32m0.1753s[0m)
test_invalid_profiles_rejected_12_policy_invalidAction (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":11,"createdIndex":10},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":10,"createdIndex":10}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":12,"createdIndex":12}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'NetworkPolicy', 'spec': {'Ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'Egress': [{'action': 'jumpupanddown', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'order': 100000, 'selector': ''}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'policy2'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: policy2
spec:
  Egress:
  - action: jumpupanddown
    destination: {}
    protocol: TCP
    source: {}
  Ingress:
  - action: Allow
    destination: {}
    protocol: UDP
    source: {}
  order: 100000
  selector: ''

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'NetworkPolicy' resource: [error with field Action = 'jumpupanddown' (Reason: failed to validate Field: Action because of Tag: action )]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: NetworkPolicyList
  # metadata:
  #   resourceVersion: "325"
ok ([32m0.1813s[0m)
test_invalid_profiles_rejected_13_policy_NetworkPolicyNameRejected (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":13,"createdIndex":12},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":12,"createdIndex":12}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":14,"createdIndex":14}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'NetworkPolicy', 'spec': {'Ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'Egress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'order': 100000, 'selector': ''}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'namespace': 'default', 'name': 'knp.default.rejectmeplease'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: knp.default.rejectmeplease
  namespace: default
spec:
  Egress:
  - action: Allow
    destination: {}
    protocol: TCP
    source: {}
  Ingress:
  - action: Allow
    destination: {}
    protocol: UDP
    source: {}
  order: 100000
  selector: ''

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'NetworkPolicy' resource: [operation create or apply is not supported on &{{NetworkPolicy projectcalico.org/v3} {knp.default.rejectmeplease  default    0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[] map[] [] [] []} { 0xc000a0eb68 [{Allow <nil> UDP <nil> <nil> <nil> {[]   <nil> [] [] []  [] <nil>} {[]   <nil> [] [] []  [] <nil>} <nil> <nil>}] [{Allow <nil> TCP <nil> <nil> <nil> {[]   <nil> [] [] []  [] <nil>} {[]   <nil> [] [] []  [] <nil>} <nil> <nil>}]  []  []}}: kubernetes network policies must be managed through the kubernetes API]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: NetworkPolicyList
  # metadata:
  #   resourceVersion: "329"
ok ([32m0.1822s[0m)
test_invalid_profiles_rejected_14_pool_invalidNet1 (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":15,"createdIndex":14},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":14,"createdIndex":14}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":16,"createdIndex":16}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'cidr': '10.0.1.0/33'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'pool-invalid-net-1'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: pool-invalid-net-1
spec:
  cidr: 10.0.1.0/33
  ipipMode: Always

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'IPPool' resource: [error with field IPPool.Spec.CIDR = '10.0.1.0/33' (IPPool CIDR must be a valid subnet)]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPPool --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "333"
ok ([32m0.2001s[0m)
test_invalid_profiles_rejected_15_pool_invalidNet2 (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":17,"createdIndex":16},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":16,"createdIndex":16}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":18,"createdIndex":18}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'cidr': '10.0.256.0/24'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'pool-invalid-net-1'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: pool-invalid-net-1
spec:
  cidr: 10.0.256.0/24
  ipipMode: Always

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'IPPool' resource: [error with field IPPool.Spec.CIDR = '10.0.256.0/24' (IPPool CIDR must be a valid subnet)]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPPool --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "338"
ok ([32m0.1793s[0m)
test_invalid_profiles_rejected_16_pool_invalidNet3 (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":19,"createdIndex":18},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":18,"createdIndex":18}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":20,"createdIndex":20}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'cidr': '10.0.250.0/32'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'pool-invalid-net-1'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: pool-invalid-net-1
spec:
  cidr: 10.0.250.0/32
  ipipMode: Always

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'IPPool' resource: [error with field IPPool.Spec.CIDR = '10.0.250.0/32' (IP pool size is too small for use with Calico IPAM. It must be equal to or greater than the block size.)]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPPool --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "342"
ok ([32m0.1704s[0m)
test_invalid_profiles_rejected_17_pool_invalidNet4 (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":21,"createdIndex":20},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":20,"createdIndex":20}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":22,"createdIndex":22}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'IPPool', 'spec': {'ipipMode': 'Never', 'cidr': 'fd5f::2::1/32'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'pool-invalid-net-1'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: pool-invalid-net-1
spec:
  cidr: fd5f::2::1/32
  ipipMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'IPPool' resource: [error with field IPPool.Spec.CIDR = 'fd5f::2::1/32' (IPPool CIDR must be a valid subnet)]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPPool --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "346"
ok ([32m0.1858s[0m)
test_invalid_profiles_rejected_18_pool_invalidNet6 (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":23,"createdIndex":22},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":22,"createdIndex":22}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":24,"createdIndex":24}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'IPPool', 'spec': {'ipipMode': 'Never', 'cidr': '::/128', 'vxlanMode': 'Never'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'invalid-net-6'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: invalid-net-6
spec:
  cidr: ::/128
  ipipMode: Never
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'IPPool' resource: [error with field IPPool.Spec.CIDR = '::/128' (IP pool size is too small for use with Calico IPAM. It must be equal to or greater than the block size.)]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPPool --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "350"
ok ([32m0.1728s[0m)
test_invalid_profiles_rejected_19_pool_invalidNet7 (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":25,"createdIndex":24},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":24,"createdIndex":24}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":26,"createdIndex":26}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'IPPool', 'spec': {'cidr': '192.168.0.0/27'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'invalid-net-7'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: invalid-net-7
spec:
  cidr: 192.168.0.0/27

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'IPPool' resource: [error with field IPPool.Spec.CIDR = '192.168.0.0/27' (IP pool size is too small for use with Calico IPAM. It must be equal to or greater than the block size.)]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPPool --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "354"
ok ([32m0.1726s[0m)
test_invalid_profiles_rejected_1_bgpPeer_invalidIP (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":27,"createdIndex":26},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":26,"createdIndex":26}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":28,"createdIndex":28}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'BGPPeer', 'spec': {'node': 'node1', 'peerIP': '192.168.0.256', 'asNumber': 64513}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'bgppeer3'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: bgppeer3
spec:
  asNumber: 64513
  node: node1
  peerIP: 192.168.0.256

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'BGPPeer' resource: [error with field PeerIP = '192.168.0.256' (Reason: failed to validate Field: PeerIP because of Tag: IP:port )]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get BGPPeer --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: BGPPeerList
  # metadata:
  #   resourceVersion: "358"
ok ([32m0.1907s[0m)
test_invalid_profiles_rejected_20_pool_invalidNet8 (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":29,"createdIndex":28},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":28,"createdIndex":28}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":30,"createdIndex":30}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'IPPool', 'spec': {'ipipMode': 'Never', 'cidr': 'fd5f::1/123'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'invalid-net-8'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: invalid-net-8
spec:
  cidr: fd5f::1/123
  ipipMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'IPPool' resource: [error with the following fields:
  # -  IPPool.Spec.CIDR = 'fd5f::/123' (IP pool size is too small for use with Calico IPAM. It must be equal to or greater than the block size.)
  # -  IPPool.Spec.CIDR = 'fd5f::/123' (IPPool CIDR is not strictly masked)
  # ]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPPool --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "362"
ok ([32m0.1818s[0m)
test_invalid_profiles_rejected_21_pool_invalidIpIp1 (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":31,"createdIndex":30},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":30,"createdIndex":30}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":32,"createdIndex":32}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'IPPool', 'spec': {'disabled': 'True', 'cidr': '10.0.1.0/24'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'invalid-ipip-1'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: invalid-ipip-1
spec:
  cidr: 10.0.1.0/24
  disabled: 'True'

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to execute command: error parsing document: cannot parse string 'True' into field IPPoolSpec.disabled of type bool
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPPool --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "366"
ok ([32m0.1766s[0m)
test_invalid_profiles_rejected_22_pool_invalidIpIp2 (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":33,"createdIndex":32},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":32,"createdIndex":32}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":34,"createdIndex":34}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'IPPool', 'spec': {'disabled': 'Maybe', 'cidr': '10.0.1.0/24'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'invalid-ipip-2'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: invalid-ipip-2
spec:
  cidr: 10.0.1.0/24
  disabled: Maybe

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to execute command: error parsing document: cannot parse string 'Maybe' into field IPPoolSpec.disabled of type bool
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPPool --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "370"
ok ([32m0.1757s[0m)
test_invalid_profiles_rejected_23_profile_ICMPtype (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":35,"createdIndex":34},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":34,"createdIndex":34}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":36,"createdIndex":36}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'Profile', 'spec': {'Ingress': [{'protocol': 'ICMP', 'destination': {}, 'ipVersion': 4, 'source': {}, 'action': 'Deny', 'ICMP': {'code': 255, 'type': 256}}], 'Egress': [{'action': 'Allow', 'source': {}, 'destination': {}}]}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'profile2'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Profile
metadata:
  name: profile2
spec:
  Egress:
  - action: Allow
    destination: {}
    source: {}
  Ingress:
  - ICMP:
      code: 255
      type: 256
    action: Deny
    destination: {}
    ipVersion: 4
    protocol: ICMP
    source: {}

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'Profile' resource: [error with field Type = '256' (Reason: failed to validate Field: Type because of Tag: lte )]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Profile --output=yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: Profile
  #   metadata:
  #     creationTimestamp: null
  #     name: projectcalico-default-allow
  #     resourceVersion: "0"
  #   spec:
  #     egress:
  #     - action: Allow
  #       destination: {}
  #       source: {}
  #     ingress:
  #     - action: Allow
  #       destination: {}
  #       source: {}
  # kind: ProfileList
  # metadata:
  #   resourceVersion: "374"
ok ([32m0.1823s[0m)
test_invalid_profiles_rejected_24_profile_ICMPcode (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":37,"createdIndex":36},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":36,"createdIndex":36}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":38,"createdIndex":38}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'Profile', 'spec': {'Ingress': [{'protocol': 'ICMP', 'destination': {}, 'ipVersion': 4, 'source': {}, 'action': 'Deny', 'ICMP': {'code': 256, 'type': 19}}], 'Egress': [{'action': 'Allow', 'source': {}, 'destination': {}}]}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'profile2'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Profile
metadata:
  name: profile2
spec:
  Egress:
  - action: Allow
    destination: {}
    source: {}
  Ingress:
  - ICMP:
      code: 256
      type: 19
    action: Deny
    destination: {}
    ipVersion: 4
    protocol: ICMP
    source: {}

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'Profile' resource: [error with field Code = '256' (Reason: failed to validate Field: Code because of Tag: lte )]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Profile --output=yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: Profile
  #   metadata:
  #     creationTimestamp: null
  #     name: projectcalico-default-allow
  #     resourceVersion: "0"
  #   spec:
  #     egress:
  #     - action: Allow
  #       destination: {}
  #       source: {}
  #     ingress:
  #     - action: Allow
  #       destination: {}
  #       source: {}
  # kind: ProfileList
  # metadata:
  #   resourceVersion: "378"
ok ([32m0.1864s[0m)
test_invalid_profiles_rejected_2_bgpPeer_apiversion (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":39,"createdIndex":38},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":38,"createdIndex":38}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":40,"createdIndex":40}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'BGPPeer', 'spec': {'node': 'node1', 'peerIP': '192.168.0.250', 'asNumber': 64513}, 'apiVersion': 'v7', 'metadata': {'name': 'bgppeer4'}}
  # 
Writing /tmp/input-data: 
apiVersion: v7
kind: BGPPeer
metadata:
  name: bgppeer4
spec:
  asNumber: 64513
  node: node1
  peerIP: 192.168.0.250

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to execute command: Unknown resource type (BGPPeer) and/or version (v7)
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get BGPPeer --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: BGPPeerList
  # metadata:
  #   resourceVersion: "383"
ok ([32m0.1707s[0m)
test_invalid_profiles_rejected_3_bgpPeer_invalidIpv6 (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":41,"createdIndex":40},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":40,"createdIndex":40}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":42,"createdIndex":42}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'BGPPeer', 'spec': {'node': 'node2', 'peerIP': 'fd5f::6::ee', 'asNumber': 64590}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'bgppeer5'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: bgppeer5
spec:
  asNumber: 64590
  node: node2
  peerIP: fd5f::6::ee

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'BGPPeer' resource: [error with field PeerIP = 'fd5f::6::ee' (Reason: failed to validate Field: PeerIP because of Tag: IP:port )]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get BGPPeer --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: BGPPeerList
  # metadata:
  #   resourceVersion: "387"
ok ([32m0.1739s[0m)
test_invalid_profiles_rejected_4_bgpPeer_invalidnodename (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":43,"createdIndex":42},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":42,"createdIndex":42}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":44,"createdIndex":44}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'BGPPeer', 'spec': {'node': 'node 2', 'peerIP': 'fd5f::6:ee', 'asNumber': 64590}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'bgppeer6'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: bgppeer6
spec:
  asNumber: 64590
  node: node 2
  peerIP: fd5f::6:ee

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'BGPPeer' resource: [error with field Node = 'node 2' (Reason: failed to validate Field: Node because of Tag: name )]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get BGPPeer --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: BGPPeerList
  # metadata:
  #   resourceVersion: "391"
ok ([32m0.1925s[0m)
test_invalid_profiles_rejected_5_bgpPeer_unrecognisedfield (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":45,"createdIndex":44},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":44,"createdIndex":44}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":46,"createdIndex":46}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'BGPPeer', 'spec': {'node': 'node2', 'unknown': 'thing', 'asNumber': 64590, 'peerIP': 'fd5f::6:ee'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'bgppeer7'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: bgppeer7
spec:
  asNumber: 64590
  node: node2
  peerIP: fd5f::6:ee
  unknown: thing

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to execute command: error parsing document: field in document is not recognized or is in the wrong location: unknown
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get BGPPeer --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: BGPPeerList
  # metadata:
  #   resourceVersion: "395"
ok ([32m0.1793s[0m)
test_invalid_profiles_rejected_6_hostEndpoint_invalidInterface (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":47,"createdIndex":46},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":46,"createdIndex":46}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":48,"createdIndex":48}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'HostEndpoint', 'spec': {'node': 'host1', 'interfaceName': 'wibblywobblyeth0', 'profiles': ['prof1', 'prof2']}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'labels': {'type': 'database'}, 'name': 'endpoint1'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: HostEndpoint
metadata:
  labels:
    type: database
  name: endpoint1
spec:
  interfaceName: wibblywobblyeth0
  node: host1
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'HostEndpoint' resource: [error with field InterfaceName = 'wibblywobblyeth0' (Reason: failed to validate Field: InterfaceName because of Tag: interface )]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get HostEndpoint --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: HostEndpointList
  # metadata:
  #   resourceVersion: "399"
ok ([32m0.1788s[0m)
test_invalid_profiles_rejected_7_policy_invalidHighPortinList (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":49,"createdIndex":48},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":48,"createdIndex":48}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":50,"createdIndex":50}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'NetworkPolicy', 'spec': {'Ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'Egress': [{'action': 'Deny', 'source': {'protocol': 'TCP', 'ports': [10, 90, 65536]}, 'destination': {}}], 'order': 100000, 'selector': ''}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'policy2'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: policy2
spec:
  Egress:
  - action: Deny
    destination: {}
    source:
      ports:
      - 10
      - 90
      - 65536
      protocol: TCP
  Ingress:
  - action: Allow
    destination: {}
    protocol: UDP
    source: {}
  order: 100000
  selector: ''

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to execute command: error parsing document: json: cannot unmarshal number 65536 into Go value of type uint16
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: NetworkPolicyList
  # metadata:
  #   resourceVersion: "403"
ok ([32m0.1856s[0m)
test_invalid_profiles_rejected_8_policy_invalidHighPortinRange (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":51,"createdIndex":50},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":50,"createdIndex":50}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":52,"createdIndex":52}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'NetworkPolicy', 'spec': {'Ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'Egress': [{'action': 'Deny', 'source': {'protocol': 'TCP', 'ports': ['1:65536']}, 'destination': {}}], 'order': 100000, 'selector': ''}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'policy2'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: policy2
spec:
  Egress:
  - action: Deny
    destination: {}
    source:
      ports:
      - 1:65536
      protocol: TCP
  Ingress:
  - action: Allow
    destination: {}
    protocol: UDP
    source: {}
  order: 100000
  selector: ''

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to execute command: error parsing document: invalid maximum port number in range (1:65536)
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: NetworkPolicyList
  # metadata:
  #   resourceVersion: "407"
ok ([32m0.1752s[0m)
test_invalid_profiles_rejected_9_policy_invalidLowPortinRange (tests.st.calicoctl.test_crud.InvalidData) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":53,"createdIndex":52},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":52,"createdIndex":52}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":54,"createdIndex":54}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
cat << EOF > /tmp/testfile.yaml
{'kind': 'NetworkPolicy', 'spec': {'Ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'Egress': [{'action': 'Deny', 'source': {'ports': ['0:65535']}, 'destination': {}, 'protocol': 'TCP'}], 'order': 100000, 'selector': ''}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'name': 'policy2'}}
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: policy2
spec:
  Egress:
  - action: Deny
    destination: {}
    protocol: TCP
    source:
      ports:
      - 0:65535
  Ingress:
  - action: Allow
    destination: {}
    protocol: UDP
    source: {}
  order: 100000
  selector: ''

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'NetworkPolicy' resource: [error with field Port = '0' (port range invalid, port number must be between 1 and 65535)]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy --output=yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: NetworkPolicyList
  # metadata:
  #   resourceVersion: "411"
ok ([32m0.1861s[0m)
Test that applying multiple invalid resources returns an appropriate error ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":55,"createdIndex":54},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":54,"createdIndex":54}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":56,"createdIndex":56}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
- apiVersion: projectcalico.org/v3
  kind: BGPPeer
  metadata:
    name: bgppeer-invalid1
  spec:
    asNumber: 64515
    node: node1
    peerIP: badpeerIP
- apiVersion: projectcalico.org/v3
  kind: BGPPeer
  metadata:
    name: bgppeer-invalid2
  spec:
    asNumber: 64515
    node: node2
    peerIP: badpeerIP

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Return code: 1
  # Failed to apply any 'BGPPeer' resources: [error with field PeerIP = 'badpeerIP' (Reason: failed to validate Field: PeerIP because of Tag: IP:port ) error with field PeerIP = 'badpeerIP' (Reason: failed to validate Field: PeerIP because of Tag: IP:port )]
  # 
ok ([32m0.1476s[0m)
Test that applying a single invalid resource returns an appropriate error ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":57,"createdIndex":56},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":56,"createdIndex":56}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":58,"createdIndex":58}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: bgppeer-name-123abc
spec:
  asNumber: 64515
  node: node2
  peerIP: badpeerIP

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Return code: 1
  # Failed to apply 'BGPPeer' resource: [error with field PeerIP = 'badpeerIP' (Reason: failed to validate Field: PeerIP because of Tag: IP:port )]
  # 
ok ([32m0.1355s[0m)
Test that resource version operates correctly with apply, i.e. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":59,"createdIndex":58},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":58,"createdIndex":58}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":60,"createdIndex":60}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get hostendpoint endpoint1 -o yaml
  # Return code: 1
  # null
  # resource does not exist: HostEndpoint(endpoint1) with error: <nil>
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: HostEndpoint
metadata:
  labels:
    type: database
  name: endpoint1
spec:
  interfaceName: eth0
  node: host1
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'HostEndpoint' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get hostendpoint endpoint1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: HostEndpoint
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:52Z"
  #   labels:
  #     type: database
  #   name: endpoint1
  #   resourceVersion: "424"
  #   uid: 4cc7409d-c328-48a8-9c80-0e7d240b6eaa
  # spec:
  #   interfaceName: eth0
  #   node: host1
  #   profiles:
  #   - prof1
  #   - prof2
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: HostEndpoint
metadata:
  labels:
    type: frontend
  name: endpoint1
spec:
  interfaceName: cali7
  node: host2
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'HostEndpoint' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get hostendpoint endpoint1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: HostEndpoint
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:52Z"
  #   labels:
  #     type: frontend
  #   name: endpoint1
  #   resourceVersion: "425"
  #   uid: 4cc7409d-c328-48a8-9c80-0e7d240b6eaa
  # spec:
  #   interfaceName: cali7
  #   node: host2
  #   profiles:
  #   - prof1
  #   - prof2
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: HostEndpoint
metadata:
  creationTimestamp: '2024-08-07T19:48:52Z'
  labels:
    type: database
  name: endpoint1
  resourceVersion: '424'
  uid: 4cc7409d-c328-48a8-9c80-0e7d240b6eaa
spec:
  interfaceName: eth0
  node: host1
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Return code: 1
  # Failed to apply 'HostEndpoint' resource: [update conflict: HostEndpoint(endpoint1)]
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: HostEndpoint
metadata:
  creationTimestamp: '2024-08-07T19:48:52Z'
  labels:
    type: database
  name: endpoint1
  resourceVersion: '425'
  uid: 4cc7409d-c328-48a8-9c80-0e7d240b6eaa
spec:
  interfaceName: eth0
  node: host1
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'HostEndpoint' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete hostendpoint endpoint1
  # Successfully deleted 1 'HostEndpoint' resource(s)
ok ([32m0.3847s[0m)
Test create, get, list, delete flow for generic resource commands works [with any_resource={'kind': 'PacketCapture', 'spec'...1', 'name': 'packet-capture-1'}}, another_resource={'kind': 'PacketCapture', 'spec'...1', 'name': 'packet-capture-2'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":61,"createdIndex":60},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":60,"createdIndex":60}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":62,"createdIndex":62}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: packet-capture-1
  namespace: namespace1
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'PacketCapture' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get PacketCapture packet-capture-1 --namespace namespace1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: PacketCapture
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:52Z"
  #   name: packet-capture-1
  #   namespace: namespace1
  #   resourceVersion: "433"
  #   uid: 1c457cbc-e82e-4818-95a7-e97ae50503ef
  # spec:
  #   selector: all()
  # status: {}
{'status': {}, 'kind': 'PacketCapture', 'spec': {'selector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:48:52Z', 'resourceVersion': '433', 'namespace': 'namespace1', 'uid': '1c457cbc-e82e-4818-95a7-e97ae50503ef', 'name': 'packet-capture-1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get PacketCapture --all-namespaces -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: PacketCapture
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:52Z"
  #     name: packet-capture-1
  #     namespace: namespace1
  #     resourceVersion: "433"
  #     uid: 1c457cbc-e82e-4818-95a7-e97ae50503ef
  #   spec:
  #     selector: all()
  #   status: {}
  # kind: PacketCaptureList
  # metadata:
  #   resourceVersion: "433"
{'items': [{'status': {}, 'kind': 'PacketCapture', 'spec': {'selector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:48:52Z', 'resourceVersion': '433', 'namespace': 'namespace1', 'uid': '1c457cbc-e82e-4818-95a7-e97ae50503ef', 'name': 'packet-capture-1'}}], 'kind': 'PacketCaptureList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '433'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: packet-capture-2
  namespace: namespace1
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'PacketCapture' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get PacketCapture packet-capture-2 --namespace namespace1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: PacketCapture
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:52Z"
  #   name: packet-capture-2
  #   namespace: namespace1
  #   resourceVersion: "434"
  #   uid: db8afab1-e66f-4c6c-a17c-ad9ed8ac436c
  # spec:
  #   selector: all()
  # status: {}
{'status': {}, 'kind': 'PacketCapture', 'spec': {'selector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:48:52Z', 'resourceVersion': '434', 'namespace': 'namespace1', 'uid': 'db8afab1-e66f-4c6c-a17c-ad9ed8ac436c', 'name': 'packet-capture-2'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get PacketCapture --all-namespaces -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: PacketCapture
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:52Z"
  #     name: packet-capture-1
  #     namespace: namespace1
  #     resourceVersion: "433"
  #     uid: 1c457cbc-e82e-4818-95a7-e97ae50503ef
  #   spec:
  #     selector: all()
  #   status: {}
  # - apiVersion: projectcalico.org/v3
  #   kind: PacketCapture
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:52Z"
  #     name: packet-capture-2
  #     namespace: namespace1
  #     resourceVersion: "434"
  #     uid: db8afab1-e66f-4c6c-a17c-ad9ed8ac436c
  #   spec:
  #     selector: all()
  #   status: {}
  # kind: PacketCaptureList
  # metadata:
  #   resourceVersion: "434"
{'items': [{'status': {}, 'kind': 'PacketCapture', 'spec': {'selector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:48:52Z', 'resourceVersion': '433', 'namespace': 'namespace1', 'uid': '1c457cbc-e82e-4818-95a7-e97ae50503ef', 'name': 'packet-capture-1'}}, {'status': {}, 'kind': 'PacketCapture', 'spec': {'selector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:48:52Z', 'resourceVersion': '434', 'namespace': 'namespace1', 'uid': 'db8afab1-e66f-4c6c-a17c-ad9ed8ac436c', 'name': 'packet-capture-2'}}], 'kind': 'PacketCaptureList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '434'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete PacketCapture packet-capture-1 --namespace namespace1
  # Successfully deleted 1 'PacketCapture' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: packet-capture-2
  namespace: namespace1
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'PacketCapture' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get PacketCapture --all-namespaces -o yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: PacketCaptureList
  # metadata:
  #   resourceVersion: "436"
{'items': [], 'kind': 'PacketCaptureList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '436'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete PacketCapture packet-capture-1 --namespace namespace1
  # Return code: 1
  # Failed to delete 'PacketCapture' resource: resource does not exist: PacketCapture(namespace1/packet-capture-1) with error: <nil>
  # 
  # 
ok ([32m0.4323s[0m)
test_bgp_reachable_by (tests.st.calicoctl.test_crud.TestCalicoctlCommands) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":63,"createdIndex":62},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":62,"createdIndex":62}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":64,"createdIndex":64}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: route-reflector
spec:
  node: somenode
  peerIP: 10.20.20.20
  reachableBy: 10.10.10.10

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'BGPPeer' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get bgpp
  # NAME              PEERIP        NODE       ASN
  # route-reflector   10.20.20.20   somenode   0
ok ([32m0.1802s[0m)
test_bgp_ttl_security (tests.st.calicoctl.test_crud.TestCalicoctlCommands) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":65,"createdIndex":64},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":64,"createdIndex":64}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":66,"createdIndex":66}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: gtsm-peers
spec:
  node: somenode
  ttlSecurity: 1

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'BGPPeer' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get bgpp
  # NAME         PEERIP   NODE       ASN
  # gtsm-peers            somenode   0
ok ([32m0.1702s[0m)
Test CRUD commands behave as expected on the BGP configuration resource: ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":67,"createdIndex":66},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":66,"createdIndex":66}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":68,"createdIndex":68}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPConfiguration
metadata:
  name: default
spec:
  asNumber: 6512
  logSeverityScreen: Info
  nodeToNodeMeshEnabled: true

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'BGPConfiguration' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get bgpconfig default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: BGPConfiguration
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:53Z"
  #   name: default
  #   resourceVersion: "451"
  #   uid: 50d2e40e-2e1f-4a23-8822-4f6b1939f3de
  # spec:
  #   asNumber: 6512
  #   logSeverityScreen: Info
  #   nodeToNodeMeshEnabled: true
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPConfiguration
metadata:
  name: default
spec:
  asNumber: 6511
  logSeverityScreen: Info
  nodeToNodeMeshEnabled: false

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Successfully replaced 1 'BGPConfiguration' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get bgpconfig default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: BGPConfiguration
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:53Z"
  #   name: default
  #   resourceVersion: "452"
  #   uid: 50d2e40e-2e1f-4a23-8822-4f6b1939f3de
  # spec:
  #   asNumber: 6511
  #   logSeverityScreen: Info
  #   nodeToNodeMeshEnabled: false
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPConfiguration
metadata:
  name: bgpconfiguration1
spec:
  logSeverityScreen: Info

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'BGPConfiguration' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get bgpconfig bgpconfiguration1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: BGPConfiguration
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:53Z"
  #   name: bgpconfiguration1
  #   resourceVersion: "453"
  #   uid: 56efa4ef-498f-4a68-b21d-9a5df6fd4851
  # spec:
  #   logSeverityScreen: Info
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPConfiguration
metadata:
  name: bgpconfiguration1
spec:
  logSeverityScreen: Debug

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'BGPConfiguration' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get bgpconfig bgpconfiguration1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: BGPConfiguration
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:53Z"
  #   name: bgpconfiguration1
  #   resourceVersion: "454"
  #   uid: 56efa4ef-498f-4a68-b21d-9a5df6fd4851
  # spec:
  #   logSeverityScreen: Debug
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPConfiguration
metadata:
  name: bgpconfiguration1
spec:
  logSeverityScreen: Debug
  nodeToNodeMeshEnabled: true

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Return code: 1
  # Failed to apply 'BGPConfiguration' resource: [error with field BGPConfiguration.Spec.NodeToNodeMeshEnabled (Cannot set nodeToNodeMeshEnabled on a non default BGP Configuration.)]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete bgpconfig bgpconfiguration1
  # Successfully deleted 1 'BGPConfiguration' resource(s)
ok ([32m0.4422s[0m)
test_bgppeer_node_selector (tests.st.calicoctl.test_crud.TestCalicoctlCommands) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":69,"createdIndex":68},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":68,"createdIndex":68}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":70,"createdIndex":70}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: bp1
spec:
  nodeSelector: has(rr)
  peerSelector: has(rr)

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'BGPPeer' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get bgpp
  # NAME   PEERIP   NODE      ASN
  # bp1             has(rr)   0
ok ([32m0.1818s[0m)
test_bgppeer_password (tests.st.calicoctl.test_crud.TestCalicoctlCommands) ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":71,"createdIndex":70},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":70,"createdIndex":70}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":72,"createdIndex":72}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: bp1
spec:
  password:
    secretKeyRef:
      key: bp1p
      name: bgp-passwords
  peerSelector: has(rr)

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'BGPPeer' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get bgpp
  # NAME   PEERIP   NODE       ASN
  # bp1             (global)   0
ok ([32m0.1821s[0m)
Test CRUD commands behave as expected on the cluster information resource: ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":73,"createdIndex":72},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":72,"createdIndex":72}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":74,"createdIndex":74}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: ClusterInformation
metadata:
  name: default
spec:
  clusterGUID: cluster-guid1
  datastoreReady: true

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'ClusterInformation' resource: [operation create or apply is not supported on ClusterInformation]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete clusterinfo default
  # Return code: 1
  # Failed to delete 'ClusterInformation' resource: operation delete is not supported on ClusterInformation
  # 
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Node
metadata:
  name: node2
spec:
  bgp:
    ipv4Address: 1.2.3.5/24
    ipv6Address: aa:bb:cc::ee/120

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'Node' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get clusterinfo default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: ClusterInformation
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:53Z"
  #   name: default
  #   resourceVersion: "467"
  #   uid: 5c3e76a0-4c6d-45a1-8f6a-4cdb7fe70e1a
  # spec:
  #   clusterGUID: 85035f13703f48e7a2044fd0b07c7319
  #   datastoreReady: true
{'kind': 'ClusterInformation', 'spec': {'clusterGUID': '85035f13703f48e7a2044fd0b07c7319', 'datastoreReady': True}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '467', 'creationTimestamp': '2024-08-07T19:48:53Z', 'uid': '5c3e76a0-4c6d-45a1-8f6a-4cdb7fe70e1a', 'name': 'default'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Node
metadata:
  name: node3
spec:
  bgp:
    ipv4Address: 1.2.3.6/24
    ipv6Address: aa:bb:cc::dd/120

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'Node' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get clusterinfo default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: ClusterInformation
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:53Z"
  #   name: default
  #   resourceVersion: "467"
  #   uid: 5c3e76a0-4c6d-45a1-8f6a-4cdb7fe70e1a
  # spec:
  #   clusterGUID: 85035f13703f48e7a2044fd0b07c7319
  #   datastoreReady: true
{'kind': 'ClusterInformation', 'spec': {'clusterGUID': '85035f13703f48e7a2044fd0b07c7319', 'datastoreReady': True}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '467', 'creationTimestamp': '2024-08-07T19:48:53Z', 'uid': '5c3e76a0-4c6d-45a1-8f6a-4cdb7fe70e1a', 'name': 'default'}}
ok ([32m0.3072s[0m)
Test that creating multiple invalid resources returns an appropriate error ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":75,"createdIndex":74},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":74,"createdIndex":74}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":76,"createdIndex":76}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
[
  {
    "apiVersion": "projectcalico.org/v3",
    "kind": "BGPPeer",
    "metadata": {
      "name": "bgppeer-invalid1"
    },
    "spec": {
      "asNumber": 64515,
      "node": "node1",
      "peerIP": "badpeerIP"
    }
  },
  {
    "apiVersion": "projectcalico.org/v3",
    "kind": "BGPPeer",
    "metadata": {
      "name": "bgppeer-invalid2"
    },
    "spec": {
      "asNumber": 64515,
      "node": "node2",
      "peerIP": "badpeerIP"
    }
  }
]
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create any 'BGPPeer' resources: [error with field PeerIP = 'badpeerIP' (Reason: failed to validate Field: PeerIP because of Tag: IP:port ) error with field PeerIP = 'badpeerIP' (Reason: failed to validate Field: PeerIP because of Tag: IP:port )]
  # 
ok ([32m0.1428s[0m)
Test that creating a single invalid resource returns an appropriate error ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":77,"createdIndex":76},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":76,"createdIndex":76}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":78,"createdIndex":78}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
{
  "apiVersion": "projectcalico.org/v3",
  "kind": "BGPPeer",
  "metadata": {
    "name": "bgppeer-name-123abc"
  },
  "spec": {
    "asNumber": 64515,
    "node": "node2",
    "peerIP": "badpeerIP"
  }
}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'BGPPeer' resource: [error with field PeerIP = 'badpeerIP' (Reason: failed to validate Field: PeerIP because of Tag: IP:port )]
  # 
ok ([32m0.1422s[0m)
Test that resource version operates correctly with delete, i.e. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":79,"createdIndex":78},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":78,"createdIndex":78}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":80,"createdIndex":80}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: bgppeer-name-123abc
spec:
  asNumber: 64514
  node: node1
  peerIP: 192.168.0.250

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'BGPPeer' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get bgppeer bgppeer-name-123abc -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: BGPPeer
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:54Z"
  #   name: bgppeer-name-123abc
  #   resourceVersion: "485"
  #   uid: d0434b97-7a52-4c6c-8935-ee484b41d940
  # spec:
  #   asNumber: 64514
  #   node: node1
  #   peerIP: 192.168.0.250
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: bgppeer-name-123abc
spec:
  asNumber: 64515
  node: node2
  peerIP: 192.168.0.251

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'BGPPeer' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get bgppeer bgppeer-name-123abc -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: BGPPeer
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:54Z"
  #   name: bgppeer-name-123abc
  #   resourceVersion: "486"
  #   uid: d0434b97-7a52-4c6c-8935-ee484b41d940
  # spec:
  #   asNumber: 64515
  #   node: node2
  #   peerIP: 192.168.0.251
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  creationTimestamp: '2024-08-07T19:48:54Z'
  name: bgppeer-name-123abc
  resourceVersion: '485'
  uid: d0434b97-7a52-4c6c-8935-ee484b41d940
spec:
  asNumber: 64514
  node: node1
  peerIP: 192.168.0.250

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Return code: 1
  # Failed to delete 'BGPPeer' resource: update conflict: BGPPeer(bgppeer-name-123abc)
  # 
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  creationTimestamp: '2024-08-07T19:48:54Z'
  name: bgppeer-name-123abc
  resourceVersion: '486'
  uid: d0434b97-7a52-4c6c-8935-ee484b41d940
spec:
  asNumber: 64515
  node: node2
  peerIP: 192.168.0.251

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'BGPPeer' resource(s)
ok ([32m0.3056s[0m)
Test that we disallow CRUD on a knp.default prefixed NetworkPolicy. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":81,"createdIndex":80},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":80,"createdIndex":80}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":82,"createdIndex":82}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: knp.default.foobarfizz
  namespace: default
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create 'NetworkPolicy' resource: [operation create or apply is not supported on &{{NetworkPolicy projectcalico.org/v3} {knp.default.foobarfizz  default    0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[] map[] [] [] []} {default 0xc0008987d8 [{Deny 0xc0008987e0 TCP <nil> <nil> <nil> {[10.0.0.0/16] type=='application' has(role) <nil> [1234 10:1024] [] [10.1.0.0/16] type=='database' [1050] <nil>} {[10.2.0.0/16] type=='application'  <nil> [100:200] [] [10.3.0.0/16] type=='apples' [110:1050] <nil>} <nil> <nil>}] [{Allow <nil> <nil> <nil> <nil> <nil> {[] type=='application'  <nil> [] [] []  [] <nil>} {[]   <nil> [] [] []  [] <nil>} <nil> <nil>}] type=='database' [Ingress Egress]  []}}: kubernetes network policies must be managed through the kubernetes API]
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: knp.default.foobarfizz
  namespace: default
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Return code: 1
  # Failed to apply 'NetworkPolicy' resource: [resource does not exist: NetworkPolicy(default/knp.default.foobarfizz) with error: <nil>]
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: knp.default.foobarfizz
  namespace: default
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Return code: 1
  # Partial success: replaced the first 1 out of 1 'NetworkPolicy' resources:
  # Hit error: resource does not exist: NetworkPolicy(default/knp.default.foobarfizz) with error: <nil>
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: knp.default.foobarfizz
  namespace: default
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Return code: 1
  # Failed to delete 'NetworkPolicy' resource: operation delete is not supported on &{{NetworkPolicy projectcalico.org/v3} {knp.default.foobarfizz  default    0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[] map[] [] [] []} {default 0xc000706200 [{Deny 0xc000706790 TCP <nil> <nil> <nil> {[10.0.0.0/16] type=='application' has(role) <nil> [1234 10:1024] [] [10.1.0.0/16] type=='database' [1050] <nil>} {[10.2.0.0/16] type=='application'  <nil> [100:200] [] [10.3.0.0/16] type=='apples' [110:1050] <nil>} <nil> <nil>}] [{Allow <nil> <nil> <nil> <nil> <nil> {[] type=='application'  <nil> [] [] []  [] <nil>} {[]   <nil> [] [] []  [] <nil>} <nil> <nil>}] type=='database' [Ingress Egress]  []}}: kubernetes network policies must be managed through the kubernetes API
  # 
  # 
ok ([32m0.2551s[0m)
Test that we disallow updates on resources with old resource versions [with update_cmd='replace']. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":83,"createdIndex":82},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":82,"createdIndex":82}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":84,"createdIndex":84}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name1
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:55Z"
  #   name: ippool-name1
  #   resourceVersion: "496"
  #   uid: b33752e5-74b2-411a-9e85-24b7d3c087ba
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.0/24
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  creationTimestamp: '2024-08-07T19:48:55Z'
  name: ippool-name1
  resourceVersion: '496'
  uid: b33752e5-74b2-411a-9e85-24b7d3c087ba
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Successfully replaced 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:55Z"
  #   name: ippool-name1
  #   resourceVersion: "497"
  #   uid: b33752e5-74b2-411a-9e85-24b7d3c087ba
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.0/24
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  creationTimestamp: '2024-08-07T19:48:55Z'
  name: ippool-name1
  resourceVersion: '496'
  uid: b33752e5-74b2-411a-9e85-24b7d3c087ba
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Return code: 1
  # Partial success: replaced the first 1 out of 1 'IPPool' resources:
  # Hit error: update conflict: IPPool(ippool-name1)
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool ippool-name1
  # Successfully deleted 1 'IPPool' resource(s)
ok ([32m0.8194s[0m)
Test that we disallow updates on resources with old resource versions [with update_cmd='apply']. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":85,"createdIndex":84},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":84,"createdIndex":84}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":86,"createdIndex":86}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name1
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:55Z"
  #   name: ippool-name1
  #   resourceVersion: "505"
  #   uid: c70394c4-cc26-4eca-a5db-7b50b459a8c4
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.0/24
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  creationTimestamp: '2024-08-07T19:48:55Z'
  name: ippool-name1
  resourceVersion: '505'
  uid: c70394c4-cc26-4eca-a5db-7b50b459a8c4
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:55Z"
  #   name: ippool-name1
  #   resourceVersion: "506"
  #   uid: c70394c4-cc26-4eca-a5db-7b50b459a8c4
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.0/24
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  creationTimestamp: '2024-08-07T19:48:55Z'
  name: ippool-name1
  resourceVersion: '505'
  uid: c70394c4-cc26-4eca-a5db-7b50b459a8c4
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Return code: 1
  # Failed to apply 'IPPool' resource: [update conflict: IPPool(ippool-name1)]
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool ippool-name1
  # Successfully deleted 1 'IPPool' resource(s)
ok ([32m0.8284s[0m)
Test that we error if empty name is provided ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":87,"createdIndex":86},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":86,"createdIndex":86}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":88,"createdIndex":88}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get policy ""
  # Return code: 1
  # Failed to get resources: resource name may not be empty
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get policy x "" y
  # Return code: 1
  # Failed to get resources: resource name may not be empty
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get delete ""
  # Return code: 1
  # Failed to get resources: resource type 'delete' is not supported
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get delete x "" y
  # Return code: 1
  # Failed to get resources: resource type 'delete' is not supported
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get label "" key --remove
  # Return code: 1
  # Usage:
  #   calicoctl get ( (<KIND> [<NAME>...]) |
  #                 --filename=<FILENAME> [--recursive] [--skip-empty] )
  #                 [--output=<OUTPUT>] [--config=<CONFIG>] [--namespace=<NS>] [--all-namespaces] [--export] [--context=<context>] [--allow-version-mismatch]
  # 
ok ([32m0.2633s[0m)
Test that the cluster-specific information gets stripped ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":89,"createdIndex":88},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":88,"createdIndex":88}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":90,"createdIndex":90}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  annotations:
    key: value
  creationTimestamp: '2006-01-02T15:04:05Z'
  deletionGracePeriodSeconds: 30
  deletionTimestamp: '2006-01-02T15:04:07Z'
  finalizers:
  - finalizer1
  - finalizer2
  generateName: test-policy-
  generation: 3
  labels:
    label1: l1
    label2: l2
  name: default.policy-mypolicy2
  namespace: default
  ownerReferences:
  - apiVersion: extensions/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: DaemonSet
    name: endpoint1
    uid: test-uid-change
  selfLink: test-self-link
  uid: test-uid-change
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'NetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get networkpolicy default.policy-mypolicy2 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   annotations:
  #     key: value
  #   creationTimestamp: "2024-08-07T19:48:57Z"
  #   labels:
  #     label1: l1
  #     label2: l2
  #     projectcalico.org/tier: default
  #   name: default.policy-mypolicy2
  #   namespace: default
  #   resourceVersion: "519"
  #   uid: 55e4d15a-8bde-44a6-84b2-a1e13a49f11f
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get networkpolicy default.policy-mypolicy2 -o yaml --export
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   annotations:
  #     key: value
  #   creationTimestamp: null
  #   labels:
  #     label1: l1
  #     label2: l2
  #     projectcalico.org/tier: default
  #   name: default.policy-mypolicy2
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
Writing /tmp/export_data.yaml: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  annotations:
    key: value
  creationTimestamp: null
  labels:
    label1: l1
    label2: l2
    projectcalico.org/tier: default
  name: default.policy-mypolicy2
spec:
  egress:
  - action: Deny
    destination: {}
    protocol: TCP
    source: {}
  ingress:
  - action: Allow
    destination: {}
    protocol: UDP
    source: {}
  order: 100
  selector: type=='sql'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get networkpolicy -o yaml --export
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: NetworkPolicy
  #   metadata:
  #     annotations:
  #       key: value
  #     creationTimestamp: "2024-08-07T19:48:57Z"
  #     labels:
  #       label1: l1
  #       label2: l2
  #       projectcalico.org/tier: default
  #     name: default.policy-mypolicy2
  #     namespace: default
  #     resourceVersion: "519"
  #     uid: 55e4d15a-8bde-44a6-84b2-a1e13a49f11f
  #   spec:
  #     egress:
  #     - action: Deny
  #       destination: {}
  #       protocol: TCP
  #       source: {}
  #     ingress:
  #     - action: Allow
  #       destination: {}
  #       protocol: UDP
  #       source: {}
  #     order: 100000
  #     selector: type=='sql'
  #     tier: default
  #     types:
  #     - Ingress
  #     - Egress
  # kind: NetworkPolicyList
  # metadata:
  #   resourceVersion: "519"
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/export_data.yaml
  # Successfully applied 1 'NetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get networkpolicy default.policy-mypolicy2 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   annotations:
  #     key: value
  #   creationTimestamp: "2024-08-07T19:48:57Z"
  #   labels:
  #     label1: l1
  #     label2: l2
  #     projectcalico.org/tier: default
  #   name: default.policy-mypolicy2
  #   namespace: default
  #   resourceVersion: "520"
  #   uid: 55e4d15a-8bde-44a6-84b2-a1e13a49f11f
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100
  #   selector: type=='sql'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete networkpolicy default.policy-mypolicy2
  # Successfully deleted 1 'NetworkPolicy' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  annotations:
    key: value
  creationTimestamp: '2006-01-02T15:04:05Z'
  deletionGracePeriodSeconds: 30
  deletionTimestamp: '2006-01-02T15:04:07Z'
  finalizers:
  - finalizer1
  - finalizer2
  generateName: test-policy-
  generation: 3
  labels:
    label1: l1
    label2: l2
  name: default.policy-mystagedpolicy2
  namespace: default
  ownerReferences:
  - apiVersion: extensions/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: DaemonSet
    name: endpoint1
    uid: test-uid-change
  selfLink: test-self-link
  uid: test-uid-change
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'StagedNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get stagednetworkpolicy default.policy-mystagedpolicy2 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   annotations:
  #     key: value
  #   creationTimestamp: "2024-08-07T19:48:57Z"
  #   labels:
  #     label1: l1
  #     label2: l2
  #     projectcalico.org/tier: default
  #   name: default.policy-mystagedpolicy2
  #   namespace: default
  #   resourceVersion: "540"
  #   uid: cb5f573f-aaea-4623-a296-8f75dec0550b
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get stagednetworkpolicy default.policy-mystagedpolicy2 -o yaml --export
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   annotations:
  #     key: value
  #   creationTimestamp: null
  #   labels:
  #     label1: l1
  #     label2: l2
  #     projectcalico.org/tier: default
  #   name: default.policy-mystagedpolicy2
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
Writing /tmp/export_data.yaml: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  annotations:
    key: value
  creationTimestamp: null
  labels:
    label1: l1
    label2: l2
    projectcalico.org/tier: default
  name: default.policy-mystagedpolicy2
spec:
  egress:
  - action: Deny
    destination: {}
    protocol: TCP
    source: {}
  ingress:
  - action: Allow
    destination: {}
    protocol: UDP
    source: {}
  order: 100
  selector: type=='sql'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get stagednetworkpolicy -o yaml --export
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: StagedNetworkPolicy
  #   metadata:
  #     annotations:
  #       key: value
  #     creationTimestamp: "2024-08-07T19:48:57Z"
  #     labels:
  #       label1: l1
  #       label2: l2
  #       projectcalico.org/tier: default
  #     name: default.policy-mystagedpolicy2
  #     namespace: default
  #     resourceVersion: "540"
  #     uid: cb5f573f-aaea-4623-a296-8f75dec0550b
  #   spec:
  #     egress:
  #     - action: Deny
  #       destination: {}
  #       protocol: TCP
  #       source: {}
  #     ingress:
  #     - action: Allow
  #       destination: {}
  #       protocol: UDP
  #       source: {}
  #     order: 100000
  #     selector: type=='sql'
  #     stagedAction: Set
  #     tier: default
  #     types:
  #     - Ingress
  #     - Egress
  # kind: StagedNetworkPolicyList
  # metadata:
  #   resourceVersion: "540"
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/export_data.yaml
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully applied 1 'StagedNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get stagednetworkpolicy default.policy-mystagedpolicy2 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   annotations:
  #     key: value
  #   creationTimestamp: "2024-08-07T19:48:57Z"
  #   labels:
  #     label1: l1
  #     label2: l2
  #     projectcalico.org/tier: default
  #   name: default.policy-mystagedpolicy2
  #   namespace: default
  #   resourceVersion: "541"
  #   uid: cb5f573f-aaea-4623-a296-8f75dec0550b
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100
  #   selector: type=='sql'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete stagednetworkpolicy default.policy-mystagedpolicy2
  # Successfully deleted 1 'StagedNetworkPolicy' resource(s)
ok ([32m0.6761s[0m)
Test CRUD commands behave as expected on the felix configuration resource: ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":91,"createdIndex":90},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":90,"createdIndex":90}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":92,"createdIndex":92}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: FelixConfiguration
metadata:
  name: felixconfiguration1
spec:
  chainInsertMode: append
  defaultEndpointToHostAction: Accept
  failsafeInboundHostPorts:
  - port: 666
    protocol: TCP
  - port: 333
    protocol: UDP
  failsafeOutboundHostPorts:
  - port: 999
    protocol: TCP
  - port: 222
    protocol: UDP
  - port: 422
    protocol: UDP
  interfacePrefix: humperdink
  ipipMTU: 1521
  ipsetsRefreshInterval: 44s
  iptablesFilterAllowAction: Return
  iptablesLockFilePath: /run/fun
  iptablesLockProbeInterval: 500ms
  iptablesLockTimeout: 22s
  iptablesMangleAllowAction: Accept
  iptablesMarkMask: 16711680
  iptablesPostWriteCheckInterval: 12s
  iptablesRefreshInterval: 22s
  ipv6Support: true
  logFilePath: /var/log/fun.log
  logPrefix: say-hello-friend
  logSeverityScreen: Info
  maxIpsetSize: 8192
  metadataAddr: 127.1.1.1
  metadataPort: 8999
  netlinkTimeout: 10s
  prometheusGoMetricsEnabled: true
  prometheusMetricsEnabled: true
  prometheusMetricsPort: 11
  prometheusProcessMetricsEnabled: true
  reportingInterval: 10s
  reportingTTL: 99s
  routeRefreshInterval: 33s
  usageReportingEnabled: false

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'FelixConfiguration' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get felixconfig felixconfiguration1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: FelixConfiguration
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:57Z"
  #   name: felixconfiguration1
  #   resourceVersion: "547"
  #   uid: 4d391094-bc77-4570-97d1-0a37cbcb74ff
  # spec:
  #   bpfConnectTimeLoadBalancing: TCP
  #   bpfHostNetworkedNATWithoutCTLB: Enabled
  #   chainInsertMode: append
  #   defaultEndpointToHostAction: Accept
  #   failsafeInboundHostPorts:
  #   - net: ""
  #     port: 666
  #     protocol: TCP
  #   - net: ""
  #     port: 333
  #     protocol: UDP
  #   failsafeOutboundHostPorts:
  #   - net: ""
  #     port: 999
  #     protocol: TCP
  #   - net: ""
  #     port: 222
  #     protocol: UDP
  #   - net: ""
  #     port: 422
  #     protocol: UDP
  #   floatingIPs: Disabled
  #   interfacePrefix: humperdink
  #   ipipMTU: 1521
  #   ipsetsRefreshInterval: 44s
  #   iptablesFilterAllowAction: Return
  #   iptablesLockFilePath: /run/fun
  #   iptablesLockProbeInterval: 500ms
  #   iptablesLockTimeout: 22s
  #   iptablesMangleAllowAction: Accept
  #   iptablesMarkMask: 16711680
  #   iptablesPostWriteCheckInterval: 12s
  #   iptablesRefreshInterval: 22s
  #   ipv6Support: true
  #   logFilePath: /var/log/fun.log
  #   logPrefix: say-hello-friend
  #   logSeverityScreen: Info
  #   maxIpsetSize: 8192
  #   metadataAddr: 127.1.1.1
  #   metadataPort: 8999
  #   netlinkTimeout: 10s
  #   prometheusGoMetricsEnabled: true
  #   prometheusMetricsEnabled: true
  #   prometheusMetricsPort: 11
  #   prometheusProcessMetricsEnabled: true
  #   reportingInterval: 10s
  #   reportingTTL: 1m39s
  #   routeRefreshInterval: 33s
  #   usageReportingEnabled: false
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: FelixConfiguration
metadata:
  name: felixconfiguration1
spec:
  ipv6Support: false
  logSeverityScreen: Debug
  netlinkTimeout: 11s

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Successfully replaced 1 'FelixConfiguration' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get felixconfig felixconfiguration1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: FelixConfiguration
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:57Z"
  #   name: felixconfiguration1
  #   resourceVersion: "548"
  #   uid: 4d391094-bc77-4570-97d1-0a37cbcb74ff
  # spec:
  #   bpfConnectTimeLoadBalancing: TCP
  #   bpfHostNetworkedNATWithoutCTLB: Enabled
  #   floatingIPs: Disabled
  #   ipv6Support: false
  #   logSeverityScreen: Debug
  #   netlinkTimeout: 11s
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: FelixConfiguration
metadata:
  name: felixconfiguration1
spec:
  chainInsertMode: append
  defaultEndpointToHostAction: Accept
  failsafeInboundHostPorts:
  - port: 666
    protocol: TCP
  - port: 333
    protocol: UDP
  failsafeOutboundHostPorts:
  - port: 999
    protocol: TCP
  - port: 222
    protocol: UDP
  - port: 422
    protocol: UDP
  interfacePrefix: humperdink
  ipipMTU: 1521
  ipsetsRefreshInterval: 44s
  iptablesFilterAllowAction: Return
  iptablesLockFilePath: /run/fun
  iptablesLockProbeInterval: 500ms
  iptablesLockTimeout: 22s
  iptablesMangleAllowAction: Accept
  iptablesMarkMask: 16711680
  iptablesPostWriteCheckInterval: 12s
  iptablesRefreshInterval: 22s
  ipv6Support: true
  logFilePath: /var/log/fun.log
  logPrefix: say-hello-friend
  logSeverityScreen: Info
  maxIpsetSize: 8192
  metadataAddr: 127.1.1.1
  metadataPort: 8999
  netlinkTimeout: 10s
  prometheusGoMetricsEnabled: true
  prometheusMetricsEnabled: true
  prometheusMetricsPort: 11
  prometheusProcessMetricsEnabled: true
  reportingInterval: 10s
  reportingTTL: 99s
  routeRefreshInterval: 33s
  usageReportingEnabled: false

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'FelixConfiguration' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get felixconfig felixconfiguration1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: FelixConfiguration
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:57Z"
  #   name: felixconfiguration1
  #   resourceVersion: "549"
  #   uid: 4d391094-bc77-4570-97d1-0a37cbcb74ff
  # spec:
  #   bpfConnectTimeLoadBalancing: TCP
  #   bpfHostNetworkedNATWithoutCTLB: Enabled
  #   chainInsertMode: append
  #   defaultEndpointToHostAction: Accept
  #   failsafeInboundHostPorts:
  #   - net: ""
  #     port: 666
  #     protocol: TCP
  #   - net: ""
  #     port: 333
  #     protocol: UDP
  #   failsafeOutboundHostPorts:
  #   - net: ""
  #     port: 999
  #     protocol: TCP
  #   - net: ""
  #     port: 222
  #     protocol: UDP
  #   - net: ""
  #     port: 422
  #     protocol: UDP
  #   floatingIPs: Disabled
  #   interfacePrefix: humperdink
  #   ipipMTU: 1521
  #   ipsetsRefreshInterval: 44s
  #   iptablesFilterAllowAction: Return
  #   iptablesLockFilePath: /run/fun
  #   iptablesLockProbeInterval: 500ms
  #   iptablesLockTimeout: 22s
  #   iptablesMangleAllowAction: Accept
  #   iptablesMarkMask: 16711680
  #   iptablesPostWriteCheckInterval: 12s
  #   iptablesRefreshInterval: 22s
  #   ipv6Support: true
  #   logFilePath: /var/log/fun.log
  #   logPrefix: say-hello-friend
  #   logSeverityScreen: Info
  #   maxIpsetSize: 8192
  #   metadataAddr: 127.1.1.1
  #   metadataPort: 8999
  #   netlinkTimeout: 10s
  #   prometheusGoMetricsEnabled: true
  #   prometheusMetricsEnabled: true
  #   prometheusMetricsPort: 11
  #   prometheusProcessMetricsEnabled: true
  #   reportingInterval: 10s
  #   reportingTTL: 1m39s
  #   routeRefreshInterval: 33s
  #   usageReportingEnabled: false
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: FelixConfiguration
metadata:
  name: felixconfiguration1
spec:
  ipv6Support: false
  logSeverityScreen: Debug
  netlinkTimeout: 125s
  reportingTTL: 9910s

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'FelixConfiguration' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get felixconfig felixconfiguration1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: FelixConfiguration
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:57Z"
  #   name: felixconfiguration1
  #   resourceVersion: "550"
  #   uid: 4d391094-bc77-4570-97d1-0a37cbcb74ff
  # spec:
  #   bpfConnectTimeLoadBalancing: TCP
  #   bpfHostNetworkedNATWithoutCTLB: Enabled
  #   floatingIPs: Disabled
  #   ipv6Support: false
  #   logSeverityScreen: Debug
  #   netlinkTimeout: 2m5s
  #   reportingTTL: 2h45m10s
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete felixconfig felixconfiguration1
  # Successfully deleted 1 'FelixConfiguration' resource(s)
ok ([32m0.4704s[0m)
Test CRUD operations using a file containing multiple entries (a mix ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":93,"createdIndex":92},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":92,"createdIndex":92}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":94,"createdIndex":94}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
- apiVersion: projectcalico.org/v3
  kind: GlobalNetworkPolicy
  metadata:
    name: default.policy-mypolicy1
  spec:
    egress:
    - action: Allow
      destination:
        domains:
        - microsoft.com
        - www.microsoft.com
      source:
        selector: type=='application'
    ingress:
    - action: Deny
      destination:
        nets:
        - 10.2.0.0/16
        notNets:
        - 10.3.0.0/16
        notPorts:
        - 110:1050
        notSelector: type=='apples'
        ports:
        - 100:200
        selector: type=='application'
      ipVersion: 4
      protocol: TCP
      source:
        namespaceSelector: has(role)
        nets:
        - 10.0.0.0/16
        notNets:
        - 10.1.0.0/16
        notPorts:
        - 1050
        notSelector: type=='database'
        ports:
        - 1234
        - 10:1024
        selector: type=='application'
    order: 100
    selector: type=='database'
    tier: default
    types:
    - Ingress
    - Egress
- apiVersion: projectcalico.org/v3
  kind: WorkloadEndpoint
  metadata:
    labels:
      projectcalico.org/namespace: namespace1
      projectcalico.org/orchestrator: k8s
      type: database
    name: node1-k8s-abcd-eth0
    namespace: namespace1
  spec:
    containerID: container1234
    endpoint: eth0
    interfaceName: cali1234
    ipNetworks:
    - 1.2.3.4/32
    node: node1
    orchestrator: k8s
    pod: abcd
    profiles:
    - prof1
    - prof2
- apiVersion: projectcalico.org/v3
  kind: WorkloadEndpoint
  metadata:
    labels:
      projectcalico.org/namespace: namespace1
      projectcalico.org/orchestrator: cni
      type: database
    name: node2-cni-container1234-eth0
    namespace: namespace1
  spec:
    containerID: container1234
    endpoint: eth0
    interfaceName: cali1234
    ipNetworks:
    - 1.2.3.4/32
    node: node2
    orchestrator: cni
    profiles:
    - prof1
    - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 3 resource(s)
Writing /tmp/input-data: 
- apiVersion: projectcalico.org/v3
  kind: GlobalNetworkPolicy
  metadata:
    name: default.policy-mypolicy1
  spec:
    egress:
    - action: Allow
      destination:
        domains:
        - microsoft.com
        - www.microsoft.com
      source:
        selector: type=='application'
    ingress:
    - action: Deny
      destination:
        nets:
        - 10.2.0.0/16
        notNets:
        - 10.3.0.0/16
        notPorts:
        - 110:1050
        notSelector: type=='apples'
        ports:
        - 100:200
        selector: type=='application'
      ipVersion: 4
      protocol: TCP
      source:
        namespaceSelector: has(role)
        nets:
        - 10.0.0.0/16
        notNets:
        - 10.1.0.0/16
        notPorts:
        - 1050
        notSelector: type=='database'
        ports:
        - 1234
        - 10:1024
        selector: type=='application'
    order: 100
    selector: type=='database'
    tier: default
    types:
    - Ingress
    - Egress
- apiVersion: projectcalico.org/v3
  kind: WorkloadEndpoint
  metadata:
    labels:
      projectcalico.org/namespace: namespace1
      projectcalico.org/orchestrator: k8s
      type: database
    name: node1-k8s-abcd-eth0
    namespace: namespace1
  spec:
    containerID: container1234
    endpoint: eth0
    interfaceName: cali1234
    ipNetworks:
    - 1.2.3.4/32
    node: node1
    orchestrator: k8s
    pod: abcd
    profiles:
    - prof1
    - prof2
- apiVersion: projectcalico.org/v3
  kind: WorkloadEndpoint
  metadata:
    labels:
      projectcalico.org/namespace: namespace1
      projectcalico.org/orchestrator: cni
      type: database
    name: node2-cni-container1234-eth0
    namespace: namespace1
  spec:
    containerID: container1234
    endpoint: eth0
    interfaceName: cali1234
    ipNetworks:
    - 1.2.3.4/32
    node: node2
    orchestrator: cni
    profiles:
    - prof1
    - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # - apiVersion: projectcalico.org/v3
  #   kind: GlobalNetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:58Z"
  #     labels:
  #       projectcalico.org/tier: default
  #     name: default.policy-mypolicy1
  #     resourceVersion: "556"
  #     uid: 13ab425c-9567-433a-bef6-e4220cc4c01c
  #   spec:
  #     egress:
  #     - action: Allow
  #       destination:
  #         domains:
  #         - microsoft.com
  #         - www.microsoft.com
  #       source:
  #         selector: type=='application'
  #     ingress:
  #     - action: Deny
  #       destination:
  #         nets:
  #         - 10.2.0.0/16
  #         notNets:
  #         - 10.3.0.0/16
  #         notPorts:
  #         - 110:1050
  #         notSelector: type=='apples'
  #         ports:
  #         - 100:200
  #         selector: type=='application'
  #       ipVersion: 4
  #       protocol: TCP
  #       source:
  #         namespaceSelector: has(role)
  #         nets:
  #         - 10.0.0.0/16
  #         notNets:
  #         - 10.1.0.0/16
  #         notPorts:
  #         - 1050
  #         notSelector: type=='database'
  #         ports:
  #         - 1234
  #         - 10:1024
  #         selector: type=='application'
  #     order: 100
  #     selector: type=='database'
  #     tier: default
  #     types:
  #     - Ingress
  #     - Egress
  # - apiVersion: projectcalico.org/v3
  #   kind: WorkloadEndpoint
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:58Z"
  #     labels:
  #       projectcalico.org/namespace: namespace1
  #       projectcalico.org/orchestrator: k8s
  #       type: database
  #     name: node1-k8s-abcd-eth0
  #     namespace: namespace1
  #     resourceVersion: "557"
  #     uid: 49aaee33-cae1-442e-ab76-ab1bf41d5e91
  #   spec:
  #     containerID: container1234
  #     endpoint: eth0
  #     interfaceName: cali1234
  #     ipNetworks:
  #     - 1.2.3.4/32
  #     node: node1
  #     orchestrator: k8s
  #     pod: abcd
  #     profiles:
  #     - prof1
  #     - prof2
  #   status: {}
  # - apiVersion: projectcalico.org/v3
  #   kind: WorkloadEndpoint
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:58Z"
  #     labels:
  #       projectcalico.org/namespace: namespace1
  #       projectcalico.org/orchestrator: cni
  #       type: database
  #     name: node2-cni-container1234-eth0
  #     namespace: namespace1
  #     resourceVersion: "558"
  #     uid: a47867a4-49ce-4e98-918a-b482c0a31af5
  #   spec:
  #     containerID: container1234
  #     endpoint: eth0
  #     interfaceName: cali1234
  #     ipNetworks:
  #     - 1.2.3.4/32
  #     node: node2
  #     orchestrator: cni
  #     profiles:
  #     - prof1
  #     - prof2
  #   status: {}
[{'kind': 'GlobalNetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {'domains': ['microsoft.com', 'www.microsoft.com']}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '556', 'labels': {'projectcalico.org/tier': 'default'}, 'creationTimestamp': '2024-08-07T19:48:58Z', 'uid': '13ab425c-9567-433a-bef6-e4220cc4c01c', 'name': 'default.policy-mypolicy1'}}, {'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node1', 'endpoint': 'eth0', 'orchestrator': 'k8s', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'pod': 'abcd', 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '49aaee33-cae1-442e-ab76-ab1bf41d5e91', 'resourceVersion': '557', 'creationTimestamp': '2024-08-07T19:48:58Z', 'labels': {'projectcalico.org/orchestrator': 'k8s', 'type': 'database', 'projectcalico.org/namespace': 'namespace1'}, 'namespace': 'namespace1', 'name': 'node1-k8s-abcd-eth0'}}, {'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node2', 'endpoint': 'eth0', 'orchestrator': 'cni', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': 'a47867a4-49ce-4e98-918a-b482c0a31af5', 'resourceVersion': '558', 'creationTimestamp': '2024-08-07T19:48:58Z', 'labels': {'projectcalico.org/orchestrator': 'cni', 'type': 'database', 'projectcalico.org/namespace': 'namespace1'}, 'namespace': 'namespace1', 'name': 'node2-cni-container1234-eth0'}}]
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get globalnetworkpolicy default.policy-mypolicy1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: GlobalNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:58Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.policy-mypolicy1
  #   resourceVersion: "556"
  #   uid: 13ab425c-9567-433a-bef6-e4220cc4c01c
  # spec:
  #   egress:
  #   - action: Allow
  #     destination:
  #       domains:
  #       - microsoft.com
  #       - www.microsoft.com
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'GlobalNetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {'domains': ['microsoft.com', 'www.microsoft.com']}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '556', 'labels': {'projectcalico.org/tier': 'default'}, 'creationTimestamp': '2024-08-07T19:48:58Z', 'uid': '13ab425c-9567-433a-bef6-e4220cc4c01c', 'name': 'default.policy-mypolicy1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get workloadendpoints -o yaml --all-namespaces
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: WorkloadEndpoint
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:58Z"
  #     labels:
  #       projectcalico.org/namespace: namespace1
  #       projectcalico.org/orchestrator: k8s
  #       type: database
  #     name: node1-k8s-abcd-eth0
  #     namespace: namespace1
  #     resourceVersion: "557"
  #     uid: 49aaee33-cae1-442e-ab76-ab1bf41d5e91
  #   spec:
  #     containerID: container1234
  #     endpoint: eth0
  #     interfaceName: cali1234
  #     ipNetworks:
  #     - 1.2.3.4/32
  #     node: node1
  #     orchestrator: k8s
  #     pod: abcd
  #     profiles:
  #     - prof1
  #     - prof2
  #   status: {}
  # - apiVersion: projectcalico.org/v3
  #   kind: WorkloadEndpoint
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:58Z"
  #     labels:
  #       projectcalico.org/namespace: namespace1
  #       projectcalico.org/orchestrator: cni
  #       type: database
  #     name: node2-cni-container1234-eth0
  #     namespace: namespace1
  #     resourceVersion: "558"
  #     uid: a47867a4-49ce-4e98-918a-b482c0a31af5
  #   spec:
  #     containerID: container1234
  #     endpoint: eth0
  #     interfaceName: cali1234
  #     ipNetworks:
  #     - 1.2.3.4/32
  #     node: node2
  #     orchestrator: cni
  #     profiles:
  #     - prof1
  #     - prof2
  #   status: {}
  # kind: WorkloadEndpointList
  # metadata:
  #   resourceVersion: "559"
{'items': [{'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node1', 'endpoint': 'eth0', 'orchestrator': 'k8s', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'pod': 'abcd', 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '49aaee33-cae1-442e-ab76-ab1bf41d5e91', 'resourceVersion': '557', 'creationTimestamp': '2024-08-07T19:48:58Z', 'labels': {'projectcalico.org/orchestrator': 'k8s', 'type': 'database', 'projectcalico.org/namespace': 'namespace1'}, 'namespace': 'namespace1', 'name': 'node1-k8s-abcd-eth0'}}, {'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node2', 'endpoint': 'eth0', 'orchestrator': 'cni', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': 'a47867a4-49ce-4e98-918a-b482c0a31af5', 'resourceVersion': '558', 'creationTimestamp': '2024-08-07T19:48:58Z', 'labels': {'projectcalico.org/orchestrator': 'cni', 'type': 'database', 'projectcalico.org/namespace': 'namespace1'}, 'namespace': 'namespace1', 'name': 'node2-cni-container1234-eth0'}}], 'kind': 'WorkloadEndpointList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '559'}}
Writing /tmp/input-data: 
- apiVersion: projectcalico.org/v3
  kind: GlobalNetworkPolicy
  metadata:
    creationTimestamp: '2024-08-07T19:48:58Z'
    labels:
      projectcalico.org/tier: default
    name: default.policy-mypolicy1
    resourceVersion: '556'
    uid: 13ab425c-9567-433a-bef6-e4220cc4c01c
  spec:
    egress:
    - action: Allow
      destination:
        domains:
        - microsoft.com
        - www.microsoft.com
      source:
        selector: type=='application'
    ingress:
    - action: Deny
      destination:
        nets:
        - 10.2.0.0/16
        notNets:
        - 10.3.0.0/16
        notPorts:
        - 110:1050
        notSelector: type=='apples'
        ports:
        - 100:200
        selector: type=='application'
      ipVersion: 4
      protocol: TCP
      source:
        namespaceSelector: has(role)
        nets:
        - 10.0.0.0/16
        notNets:
        - 10.1.0.0/16
        notPorts:
        - 1050
        notSelector: type=='database'
        ports:
        - 1234
        - 10:1024
        selector: type=='application'
    order: 100
    selector: type=='database'
    tier: default
    types:
    - Ingress
    - Egress
- apiVersion: projectcalico.org/v3
  items:
  - apiVersion: projectcalico.org/v3
    kind: WorkloadEndpoint
    metadata:
      creationTimestamp: '2024-08-07T19:48:58Z'
      labels:
        projectcalico.org/namespace: namespace1
        projectcalico.org/orchestrator: k8s
        type: database
      name: node1-k8s-abcd-eth0
      namespace: namespace1
      resourceVersion: '557'
      uid: 49aaee33-cae1-442e-ab76-ab1bf41d5e91
    spec:
      containerID: container1234
      endpoint: eth0
      interfaceName: cali1234
      ipNetworks:
      - 1.2.3.4/32
      node: node1
      orchestrator: k8s
      pod: abcd
      profiles:
      - prof1
      - prof2
    status: {}
  - apiVersion: projectcalico.org/v3
    kind: WorkloadEndpoint
    metadata:
      creationTimestamp: '2024-08-07T19:48:58Z'
      labels:
        projectcalico.org/namespace: namespace1
        projectcalico.org/orchestrator: cni
        type: database
      name: node2-cni-container1234-eth0
      namespace: namespace1
      resourceVersion: '558'
      uid: a47867a4-49ce-4e98-918a-b482c0a31af5
    spec:
      containerID: container1234
      endpoint: eth0
      interfaceName: cali1234
      ipNetworks:
      - 1.2.3.4/32
      node: node2
      orchestrator: cni
      profiles:
      - prof1
      - prof2
    status: {}
  kind: WorkloadEndpointList
  metadata:
    resourceVersion: '559'

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 3 resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get workloadendpoints -o yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: WorkloadEndpointList
  # metadata:
  #   resourceVersion: "562"
{'items': [], 'kind': 'WorkloadEndpointList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '562'}}
ok ([32m0.3726s[0m)
Test CRUD operations using a file containing a single List. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":95,"createdIndex":94},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":94,"createdIndex":94}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":96,"createdIndex":96}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
- apiVersion: projectcalico.org/v3
  kind: WorkloadEndpoint
  metadata:
    labels:
      projectcalico.org/namespace: namespace1
      projectcalico.org/orchestrator: k8s
      type: database
    name: node1-k8s-abcd-eth0
    namespace: namespace1
  spec:
    containerID: container1234
    endpoint: eth0
    interfaceName: cali1234
    ipNetworks:
    - 1.2.3.4/32
    node: node1
    orchestrator: k8s
    pod: abcd
    profiles:
    - prof1
    - prof2
- apiVersion: projectcalico.org/v3
  kind: WorkloadEndpoint
  metadata:
    labels:
      projectcalico.org/namespace: namespace1
      projectcalico.org/orchestrator: cni
      type: database
    name: node2-cni-container1234-eth0
    namespace: namespace1
  spec:
    containerID: container1234
    endpoint: eth0
    interfaceName: cali1234
    ipNetworks:
    - 1.2.3.4/32
    node: node2
    orchestrator: cni
    profiles:
    - prof1
    - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 2 'WorkloadEndpoint' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get workloadendpoints -o yaml --all-namespaces
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: WorkloadEndpoint
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:58Z"
  #     labels:
  #       projectcalico.org/namespace: namespace1
  #       projectcalico.org/orchestrator: k8s
  #       type: database
  #     name: node1-k8s-abcd-eth0
  #     namespace: namespace1
  #     resourceVersion: "567"
  #     uid: 834d6360-27ce-49a7-8ee6-8123d8d061f1
  #   spec:
  #     containerID: container1234
  #     endpoint: eth0
  #     interfaceName: cali1234
  #     ipNetworks:
  #     - 1.2.3.4/32
  #     node: node1
  #     orchestrator: k8s
  #     pod: abcd
  #     profiles:
  #     - prof1
  #     - prof2
  #   status: {}
  # - apiVersion: projectcalico.org/v3
  #   kind: WorkloadEndpoint
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:58Z"
  #     labels:
  #       projectcalico.org/namespace: namespace1
  #       projectcalico.org/orchestrator: cni
  #       type: database
  #     name: node2-cni-container1234-eth0
  #     namespace: namespace1
  #     resourceVersion: "568"
  #     uid: 1c6b49f6-3c7c-4fd2-a801-eac558b70624
  #   spec:
  #     containerID: container1234
  #     endpoint: eth0
  #     interfaceName: cali1234
  #     ipNetworks:
  #     - 1.2.3.4/32
  #     node: node2
  #     orchestrator: cni
  #     profiles:
  #     - prof1
  #     - prof2
  #   status: {}
  # kind: WorkloadEndpointList
  # metadata:
  #   resourceVersion: "568"
{'items': [{'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node1', 'endpoint': 'eth0', 'orchestrator': 'k8s', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'pod': 'abcd', 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '834d6360-27ce-49a7-8ee6-8123d8d061f1', 'resourceVersion': '567', 'creationTimestamp': '2024-08-07T19:48:58Z', 'labels': {'projectcalico.org/orchestrator': 'k8s', 'type': 'database', 'projectcalico.org/namespace': 'namespace1'}, 'namespace': 'namespace1', 'name': 'node1-k8s-abcd-eth0'}}, {'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node2', 'endpoint': 'eth0', 'orchestrator': 'cni', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '1c6b49f6-3c7c-4fd2-a801-eac558b70624', 'resourceVersion': '568', 'creationTimestamp': '2024-08-07T19:48:58Z', 'labels': {'projectcalico.org/orchestrator': 'cni', 'type': 'database', 'projectcalico.org/namespace': 'namespace1'}, 'namespace': 'namespace1', 'name': 'node2-cni-container1234-eth0'}}], 'kind': 'WorkloadEndpointList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '568'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
items:
- apiVersion: projectcalico.org/v3
  kind: WorkloadEndpoint
  metadata:
    creationTimestamp: '2024-08-07T19:48:58Z'
    labels:
      projectcalico.org/namespace: namespace1
      projectcalico.org/orchestrator: k8s
      type: database
    name: node1-k8s-abcd-eth0
    namespace: namespace1
    resourceVersion: '567'
    uid: 834d6360-27ce-49a7-8ee6-8123d8d061f1
  spec:
    containerID: container1234
    endpoint: eth0
    interfaceName: cali1234
    ipNetworks:
    - 1.2.3.4/32
    node: node1
    orchestrator: k8s
    pod: abcd
    profiles:
    - prof1
    - prof2
  status: {}
- apiVersion: projectcalico.org/v3
  kind: WorkloadEndpoint
  metadata:
    creationTimestamp: '2024-08-07T19:48:58Z'
    labels:
      projectcalico.org/namespace: namespace1
      projectcalico.org/orchestrator: cni
      type: database
    name: node2-cni-container1234-eth0
    namespace: namespace1
    resourceVersion: '568'
    uid: 1c6b49f6-3c7c-4fd2-a801-eac558b70624
  spec:
    containerID: container1234
    endpoint: eth0
    interfaceName: cali1234
    ipNetworks:
    - 1.2.3.4/32
    node: node2
    orchestrator: cni
    profiles:
    - prof1
    - prof2
  status: {}
kind: WorkloadEndpointList
metadata:
  resourceVersion: '568'

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # - apiVersion: projectcalico.org/v3
  #   kind: WorkloadEndpoint
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:58Z"
  #     labels:
  #       projectcalico.org/namespace: namespace1
  #       projectcalico.org/orchestrator: k8s
  #       type: database
  #     name: node1-k8s-abcd-eth0
  #     namespace: namespace1
  #     resourceVersion: "567"
  #     uid: 834d6360-27ce-49a7-8ee6-8123d8d061f1
  #   spec:
  #     containerID: container1234
  #     endpoint: eth0
  #     interfaceName: cali1234
  #     ipNetworks:
  #     - 1.2.3.4/32
  #     node: node1
  #     orchestrator: k8s
  #     pod: abcd
  #     profiles:
  #     - prof1
  #     - prof2
  #   status: {}
  # - apiVersion: projectcalico.org/v3
  #   kind: WorkloadEndpoint
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:58Z"
  #     labels:
  #       projectcalico.org/namespace: namespace1
  #       projectcalico.org/orchestrator: cni
  #       type: database
  #     name: node2-cni-container1234-eth0
  #     namespace: namespace1
  #     resourceVersion: "568"
  #     uid: 1c6b49f6-3c7c-4fd2-a801-eac558b70624
  #   spec:
  #     containerID: container1234
  #     endpoint: eth0
  #     interfaceName: cali1234
  #     ipNetworks:
  #     - 1.2.3.4/32
  #     node: node2
  #     orchestrator: cni
  #     profiles:
  #     - prof1
  #     - prof2
  #   status: {}
[{'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node1', 'endpoint': 'eth0', 'orchestrator': 'k8s', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'pod': 'abcd', 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '834d6360-27ce-49a7-8ee6-8123d8d061f1', 'resourceVersion': '567', 'creationTimestamp': '2024-08-07T19:48:58Z', 'labels': {'projectcalico.org/orchestrator': 'k8s', 'type': 'database', 'projectcalico.org/namespace': 'namespace1'}, 'namespace': 'namespace1', 'name': 'node1-k8s-abcd-eth0'}}, {'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node2', 'endpoint': 'eth0', 'orchestrator': 'cni', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '1c6b49f6-3c7c-4fd2-a801-eac558b70624', 'resourceVersion': '568', 'creationTimestamp': '2024-08-07T19:48:58Z', 'labels': {'projectcalico.org/orchestrator': 'cni', 'type': 'database', 'projectcalico.org/namespace': 'namespace1'}, 'namespace': 'namespace1', 'name': 'node2-cni-container1234-eth0'}}]
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
items:
- apiVersion: projectcalico.org/v3
  kind: WorkloadEndpoint
  metadata:
    creationTimestamp: '2024-08-07T19:48:58Z'
    labels:
      projectcalico.org/namespace: namespace1
      projectcalico.org/orchestrator: k8s
      type: database
    name: node1-k8s-abcd-eth0
    namespace: namespace1
    resourceVersion: '567'
    uid: 834d6360-27ce-49a7-8ee6-8123d8d061f1
  spec:
    containerID: container1234
    endpoint: eth0
    interfaceName: cali1234
    ipNetworks:
    - 1.2.3.4/32
    node: node1
    orchestrator: k8s
    pod: abcd
    profiles:
    - prof1
    - prof2
  status: {}
- apiVersion: projectcalico.org/v3
  kind: WorkloadEndpoint
  metadata:
    creationTimestamp: '2024-08-07T19:48:58Z'
    labels:
      projectcalico.org/namespace: namespace1
      projectcalico.org/orchestrator: cni
      type: database
    name: node2-cni-container1234-eth0
    namespace: namespace1
    resourceVersion: '568'
    uid: 1c6b49f6-3c7c-4fd2-a801-eac558b70624
  spec:
    containerID: container1234
    endpoint: eth0
    interfaceName: cali1234
    ipNetworks:
    - 1.2.3.4/32
    node: node2
    orchestrator: cni
    profiles:
    - prof1
    - prof2
  status: {}
kind: WorkloadEndpointList
metadata:
  resourceVersion: '568'

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 2 'WorkloadEndpoint' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get workloadendpoints -o yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: WorkloadEndpointList
  # metadata:
  #   resourceVersion: "570"
{'items': [], 'kind': 'WorkloadEndpointList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '570'}}
ok ([32m0.3160s[0m)
Test that a basic CRUD flow for pool commands works. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":97,"createdIndex":96},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":96,"createdIndex":96}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":98,"createdIndex":98}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name2
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 123
  cidr: fed0:8001::/64
  ipipMode: Never
  nodeSelector: all()
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name2 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:58Z"
  #   name: ippool-name2
  #   resourceVersion: "575"
  #   uid: b78d6bcc-4fcc-4a5c-baa9-a85cd14ddc5a
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 123
  #   cidr: fed0:8001::/64
  #   ipipMode: Never
  #   nodeSelector: all()
  #   vxlanMode: Never
{'kind': 'IPPool', 'spec': {'ipipMode': 'Never', 'vxlanMode': 'Never', 'blockSize': 123, 'cidr': 'fed0:8001::/64', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '575', 'creationTimestamp': '2024-08-07T19:48:58Z', 'uid': 'b78d6bcc-4fcc-4a5c-baa9-a85cd14ddc5a', 'name': 'ippool-name2'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: IPPool
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:58Z"
  #     name: ippool-name2
  #     resourceVersion: "575"
  #     uid: b78d6bcc-4fcc-4a5c-baa9-a85cd14ddc5a
  #   spec:
  #     allowedUses:
  #     - Workload
  #     - Tunnel
  #     blockSize: 123
  #     cidr: fed0:8001::/64
  #     ipipMode: Never
  #     nodeSelector: all()
  #     vxlanMode: Never
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "575"
{'items': [{'kind': 'IPPool', 'spec': {'ipipMode': 'Never', 'vxlanMode': 'Never', 'blockSize': 123, 'cidr': 'fed0:8001::/64', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '575', 'creationTimestamp': '2024-08-07T19:48:58Z', 'uid': 'b78d6bcc-4fcc-4a5c-baa9-a85cd14ddc5a', 'name': 'ippool-name2'}}], 'kind': 'IPPoolList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '575'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name1
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:48:58Z"
  #   name: ippool-name1
  #   resourceVersion: "576"
  #   uid: 2ffb44a2-44ff-453e-a597-9c0c3a3af1a1
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.0/24
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'vxlanMode': 'Never', 'blockSize': 27, 'cidr': '10.0.1.0/24', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': "foo == 'bar'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '576', 'creationTimestamp': '2024-08-07T19:48:58Z', 'uid': '2ffb44a2-44ff-453e-a597-9c0c3a3af1a1', 'name': 'ippool-name1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: IPPool
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:58Z"
  #     name: ippool-name1
  #     resourceVersion: "576"
  #     uid: 2ffb44a2-44ff-453e-a597-9c0c3a3af1a1
  #   spec:
  #     allowedUses:
  #     - Workload
  #     - Tunnel
  #     blockSize: 27
  #     cidr: 10.0.1.0/24
  #     ipipMode: Always
  #     nodeSelector: foo == 'bar'
  #     vxlanMode: Never
  # - apiVersion: projectcalico.org/v3
  #   kind: IPPool
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:48:58Z"
  #     name: ippool-name2
  #     resourceVersion: "575"
  #     uid: b78d6bcc-4fcc-4a5c-baa9-a85cd14ddc5a
  #   spec:
  #     allowedUses:
  #     - Workload
  #     - Tunnel
  #     blockSize: 123
  #     cidr: fed0:8001::/64
  #     ipipMode: Never
  #     nodeSelector: all()
  #     vxlanMode: Never
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "576"
{'items': [{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'vxlanMode': 'Never', 'blockSize': 27, 'cidr': '10.0.1.0/24', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': "foo == 'bar'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '576', 'creationTimestamp': '2024-08-07T19:48:58Z', 'uid': '2ffb44a2-44ff-453e-a597-9c0c3a3af1a1', 'name': 'ippool-name1'}}, {'kind': 'IPPool', 'spec': {'ipipMode': 'Never', 'vxlanMode': 'Never', 'blockSize': 123, 'cidr': 'fed0:8001::/64', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '575', 'creationTimestamp': '2024-08-07T19:48:58Z', 'uid': 'b78d6bcc-4fcc-4a5c-baa9-a85cd14ddc5a', 'name': 'ippool-name2'}}], 'kind': 'IPPoolList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '576'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1
  # NAME           CIDR          SELECTOR
  # ippool-name1   10.0.1.0/24   foo == 'bar'
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1 -o wide
  # NAME           CIDR          NAT     IPIPMODE   VXLANMODE   DISABLED   DISABLEBGPEXPORT   SELECTOR
  # ippool-name1   10.0.1.0/24   false   Always     Never       false      false              foo == 'bar'
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool ippool-name1
  # Successfully deleted 1 'IPPool' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name2
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 123
  cidr: fed0:8001::/64
  ipipMode: Never
  nodeSelector: all()
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool -o yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "581"
{'items': [], 'kind': 'IPPoolList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '581'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool ippool-name2
  # Return code: 1
  # Failed to delete 'IPPool' resource: resource does not exist: IPPool(ippool-name2) with error: <nil>
  # 
  # 
ok ([33m1.5489s[0m)
Test get/delete resource kind works with multiple names ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":99,"createdIndex":98},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":98,"createdIndex":98}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":100,"createdIndex":100}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name2
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 123
  cidr: fed0:8001::/64
  ipipMode: Never
  nodeSelector: all()
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'IPPool' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name1
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1 ippool-name2 --export
  # NAME           CIDR          SELECTOR
  # ippool-name1   10.0.1.0/24   foo == 'bar'
  # 
  # NAME           CIDR             SELECTOR
  # ippool-name2   fed0:8001::/64   all()
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1 blah ippool-name2 --export
  # Return code: 1
  # NAME           CIDR          SELECTOR
  # ippool-name1   10.0.1.0/24   foo == 'bar'
  # 
  # NAME           CIDR             SELECTOR
  # ippool-name2   fed0:8001::/64   all()
  # 
  # resource does not exist: IPPool(blah) with error: <nil>
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1 blah ippool-name2 --export
resource does not exist: IPPool(blah) with error: <nil>
  # Return code: 1
  # NAME           CIDR          SELECTOR
  # ippool-name1   10.0.1.0/24   foo == 'bar'
  # 
  # NAME           CIDR             SELECTOR
  # ippool-name2   fed0:8001::/64   all()
  # 
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool ippool-name1 ippool-name2
  # Successfully deleted 2 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool -o yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "591"
{'items': [], 'kind': 'IPPoolList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '591'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name2
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 123
  cidr: fed0:8001::/64
  ipipMode: Never
  nodeSelector: all()
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'IPPool' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name1
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool ippool-name1 blah ippool-name2
  # Return code: 1
  # Successfully deleted 2 'IPPool' resource(s)
  # Failed to delete 'IPPool' resource: resource does not exist: IPPool(blah) with error: <nil>
  # 
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool -o yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "598"
{'items': [], 'kind': 'IPPoolList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '598'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name2
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 123
  cidr: fed0:8001::/64
  ipipMode: Never
  nodeSelector: all()
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'IPPool' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name1
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: IPPool
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:02Z"
  #     name: ippool-name1
  #     resourceVersion: "600"
  #     uid: 141e945f-527e-4c15-ba39-374f28cd4492
  #   spec:
  #     allowedUses:
  #     - Workload
  #     - Tunnel
  #     blockSize: 27
  #     cidr: 10.0.1.0/24
  #     ipipMode: Always
  #     nodeSelector: foo == 'bar'
  #     vxlanMode: Never
  # - apiVersion: projectcalico.org/v3
  #   kind: IPPool
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:02Z"
  #     name: ippool-name2
  #     resourceVersion: "599"
  #     uid: 4f8df2a3-2956-4742-ba44-1b20cab4ba54
  #   spec:
  #     allowedUses:
  #     - Workload
  #     - Tunnel
  #     blockSize: 123
  #     cidr: fed0:8001::/64
  #     ipipMode: Never
  #     nodeSelector: all()
  #     vxlanMode: Never
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "600"
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool x y z
  # Return code: 1
  # Failed to delete 'IPPool' resource: resource does not exist: IPPool(x) with error: <nil>
  # Failed to delete 'IPPool' resource: resource does not exist: IPPool(y) with error: <nil>
  # Failed to delete 'IPPool' resource: resource does not exist: IPPool(z) with error: <nil>
  # 
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: IPPool
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:02Z"
  #     name: ippool-name1
  #     resourceVersion: "600"
  #     uid: 141e945f-527e-4c15-ba39-374f28cd4492
  #   spec:
  #     allowedUses:
  #     - Workload
  #     - Tunnel
  #     blockSize: 27
  #     cidr: 10.0.1.0/24
  #     ipipMode: Always
  #     nodeSelector: foo == 'bar'
  #     vxlanMode: Never
  # - apiVersion: projectcalico.org/v3
  #   kind: IPPool
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:02Z"
  #     name: ippool-name2
  #     resourceVersion: "599"
  #     uid: 4f8df2a3-2956-4742-ba44-1b20cab4ba54
  #   spec:
  #     allowedUses:
  #     - Workload
  #     - Tunnel
  #     blockSize: 123
  #     cidr: fed0:8001::/64
  #     ipipMode: Never
  #     nodeSelector: all()
  #     vxlanMode: Never
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "600"
ok ([33m2.7040s[0m)
Test CRUD commands behave as expected on GlobalThreatFeed resource ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":101,"createdIndex":100},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":100,"createdIndex":100}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":102,"createdIndex":102}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get globalthreatfeed -o yaml
  # apiVersion: projectcalico.org/v3
  # items: []
  # kind: GlobalThreatFeedList
  # metadata:
  #   resourceVersion: "604"
{'items': [], 'kind': 'GlobalThreatFeedList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '604'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalThreatFeed
metadata:
  name: name1
spec:
  content: IPSet
  globalNetworkSet:
    labels:
      fizz: buzz
      foo: bar
  pull:
    http:
      headers:
      - name: Accept
        value: text/plain
      - name: APIKey
        valueFrom:
          secretKeyRef:
            key: my-key
            name: globalthreatfeed-name1-my-secret
      url: https://notreal.tigera.io/threatfeed
    period: 13.5h

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'GlobalThreatFeed' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get globalthreatfeed -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: GlobalThreatFeed
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:03Z"
  #     name: name1
  #     resourceVersion: "605"
  #     uid: db2b88f1-164a-4b42-b7d7-770728332314
  #   spec:
  #     content: IPSet
  #     globalNetworkSet:
  #       labels:
  #         fizz: buzz
  #         foo: bar
  #     pull:
  #       http:
  #         format: {}
  #         headers:
  #         - name: Accept
  #           value: text/plain
  #         - name: APIKey
  #           valueFrom:
  #             secretKeyRef:
  #               key: my-key
  #               name: globalthreatfeed-name1-my-secret
  #         url: https://notreal.tigera.io/threatfeed
  #       period: 13.5h
  #   status: {}
  # kind: GlobalThreatFeedList
  # metadata:
  #   resourceVersion: "605"
{'items': [{'status': {}, 'kind': 'GlobalThreatFeed', 'spec': {'content': 'IPSet', 'pull': {'http': {'url': 'https://notreal.tigera.io/threatfeed', 'headers': [{'name': 'Accept', 'value': 'text/plain'}, {'valueFrom': {'secretKeyRef': {'name': 'globalthreatfeed-name1-my-secret', 'key': 'my-key'}}, 'name': 'APIKey'}], 'format': {}}, 'period': '13.5h'}, 'globalNetworkSet': {'labels': {'foo': 'bar', 'fizz': 'buzz'}}}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '605', 'creationTimestamp': '2024-08-07T19:49:03Z', 'uid': 'db2b88f1-164a-4b42-b7d7-770728332314', 'name': 'name1'}}], 'kind': 'GlobalThreatFeedList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '605'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalThreatFeed
metadata:
  name: name2
spec:
  pull:
    http:
      url: https://notreal.tigera.io/threatfeed2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'GlobalThreatFeed' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get globalthreatfeed -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: GlobalThreatFeed
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:03Z"
  #     name: name1
  #     resourceVersion: "605"
  #     uid: db2b88f1-164a-4b42-b7d7-770728332314
  #   spec:
  #     content: IPSet
  #     globalNetworkSet:
  #       labels:
  #         fizz: buzz
  #         foo: bar
  #     pull:
  #       http:
  #         format: {}
  #         headers:
  #         - name: Accept
  #           value: text/plain
  #         - name: APIKey
  #           valueFrom:
  #             secretKeyRef:
  #               key: my-key
  #               name: globalthreatfeed-name1-my-secret
  #         url: https://notreal.tigera.io/threatfeed
  #       period: 13.5h
  #   status: {}
  # - apiVersion: projectcalico.org/v3
  #   kind: GlobalThreatFeed
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:03Z"
  #     name: name2
  #     resourceVersion: "606"
  #     uid: 0400dab9-0cc6-4d8a-b779-475c182cd347
  #   spec:
  #     pull:
  #       http:
  #         format: {}
  #         url: https://notreal.tigera.io/threatfeed2
  #   status: {}
  # kind: GlobalThreatFeedList
  # metadata:
  #   resourceVersion: "606"
{'items': [{'status': {}, 'kind': 'GlobalThreatFeed', 'spec': {'content': 'IPSet', 'pull': {'http': {'url': 'https://notreal.tigera.io/threatfeed', 'headers': [{'name': 'Accept', 'value': 'text/plain'}, {'valueFrom': {'secretKeyRef': {'name': 'globalthreatfeed-name1-my-secret', 'key': 'my-key'}}, 'name': 'APIKey'}], 'format': {}}, 'period': '13.5h'}, 'globalNetworkSet': {'labels': {'foo': 'bar', 'fizz': 'buzz'}}}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '605', 'creationTimestamp': '2024-08-07T19:49:03Z', 'uid': 'db2b88f1-164a-4b42-b7d7-770728332314', 'name': 'name1'}}, {'status': {}, 'kind': 'GlobalThreatFeed', 'spec': {'pull': {'http': {'url': 'https://notreal.tigera.io/threatfeed2', 'format': {}}}}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '606', 'creationTimestamp': '2024-08-07T19:49:03Z', 'uid': '0400dab9-0cc6-4d8a-b779-475c182cd347', 'name': 'name2'}}], 'kind': 'GlobalThreatFeedList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '606'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalThreatFeed
metadata:
  name: name2
spec:
  pull:
    http:
      url: https://notreal.tigera.io/threatfeed/rev2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'GlobalThreatFeed' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get globalthreatfeed -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: GlobalThreatFeed
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:03Z"
  #     name: name1
  #     resourceVersion: "605"
  #     uid: db2b88f1-164a-4b42-b7d7-770728332314
  #   spec:
  #     content: IPSet
  #     globalNetworkSet:
  #       labels:
  #         fizz: buzz
  #         foo: bar
  #     pull:
  #       http:
  #         format: {}
  #         headers:
  #         - name: Accept
  #           value: text/plain
  #         - name: APIKey
  #           valueFrom:
  #             secretKeyRef:
  #               key: my-key
  #               name: globalthreatfeed-name1-my-secret
  #         url: https://notreal.tigera.io/threatfeed
  #       period: 13.5h
  #   status: {}
  # - apiVersion: projectcalico.org/v3
  #   kind: GlobalThreatFeed
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:03Z"
  #     name: name2
  #     resourceVersion: "607"
  #     uid: 0400dab9-0cc6-4d8a-b779-475c182cd347
  #   spec:
  #     pull:
  #       http:
  #         format: {}
  #         url: https://notreal.tigera.io/threatfeed/rev2
  #   status: {}
  # kind: GlobalThreatFeedList
  # metadata:
  #   resourceVersion: "607"
{'items': [{'status': {}, 'kind': 'GlobalThreatFeed', 'spec': {'content': 'IPSet', 'pull': {'http': {'url': 'https://notreal.tigera.io/threatfeed', 'headers': [{'name': 'Accept', 'value': 'text/plain'}, {'valueFrom': {'secretKeyRef': {'name': 'globalthreatfeed-name1-my-secret', 'key': 'my-key'}}, 'name': 'APIKey'}], 'format': {}}, 'period': '13.5h'}, 'globalNetworkSet': {'labels': {'foo': 'bar', 'fizz': 'buzz'}}}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '605', 'creationTimestamp': '2024-08-07T19:49:03Z', 'uid': 'db2b88f1-164a-4b42-b7d7-770728332314', 'name': 'name1'}}, {'status': {}, 'kind': 'GlobalThreatFeed', 'spec': {'pull': {'http': {'url': 'https://notreal.tigera.io/threatfeed/rev2', 'format': {}}}}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '607', 'creationTimestamp': '2024-08-07T19:49:03Z', 'uid': '0400dab9-0cc6-4d8a-b779-475c182cd347', 'name': 'name2'}}], 'kind': 'GlobalThreatFeedList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '607'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalThreatFeed
metadata:
  name: name0

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'GlobalThreatFeed' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get globalthreatfeed -o wide
  # NAME    PERIOD   URL
  # name0
  # name1   13.5h    https://notreal.tigera.io/threatfeed
  # name2   24h      https://notreal.tigera.io/threatfeed/rev2
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete globalthreatfeed name1
  # Successfully deleted 1 'GlobalThreatFeed' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get globalthreatfeed -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: GlobalThreatFeed
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:03Z"
  #     name: name0
  #     resourceVersion: "608"
  #     uid: 0c016a57-0145-4094-89db-6196c4e60263
  #   spec: {}
  #   status: {}
  # - apiVersion: projectcalico.org/v3
  #   kind: GlobalThreatFeed
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:03Z"
  #     name: name2
  #     resourceVersion: "607"
  #     uid: 0400dab9-0cc6-4d8a-b779-475c182cd347
  #   spec:
  #     pull:
  #       http:
  #         format: {}
  #         url: https://notreal.tigera.io/threatfeed/rev2
  #   status: {}
  # kind: GlobalThreatFeedList
  # metadata:
  #   resourceVersion: "609"
{'items': [{'status': {}, 'kind': 'GlobalThreatFeed', 'spec': {}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '608', 'creationTimestamp': '2024-08-07T19:49:03Z', 'uid': '0c016a57-0145-4094-89db-6196c4e60263', 'name': 'name0'}}, {'status': {}, 'kind': 'GlobalThreatFeed', 'spec': {'pull': {'http': {'url': 'https://notreal.tigera.io/threatfeed/rev2', 'format': {}}}}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '607', 'creationTimestamp': '2024-08-07T19:49:03Z', 'uid': '0400dab9-0cc6-4d8a-b779-475c182cd347', 'name': 'name2'}}], 'kind': 'GlobalThreatFeedList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '609'}}
ok ([32m0.5080s[0m)
Test that the list of CIDRd is truncated if it's too long. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":103,"createdIndex":102},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":102,"createdIndex":102}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":104,"createdIndex":104}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPReservation
metadata:
  name: ipreservation-name1
spec:
  reservedCIDRs:
  - 10.0.1.0/24
  - 11.0.0.1/32

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'IPReservation' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPReservation -o wide
  # NAME                  CIDRS
  # ipreservation-name1   10.0.1.0/24,11.0.0.1/32
ok ([32m0.1782s[0m)
Test that the list of CIDRs is truncated if it's too long. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":105,"createdIndex":104},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":104,"createdIndex":104}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":106,"createdIndex":106}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPReservation
metadata:
  name: ipreservation-name1
spec:
  reservedCIDRs:
  - 10.0.0.0/28
  - 10.0.1.0/28
  - 10.0.2.0/28
  - 10.0.3.0/28
  - 10.0.4.0/28
  - 10.0.5.0/28
  - 10.0.6.0/28
  - 10.0.7.0/28
  - 10.0.8.0/28
  - 10.0.9.0/28
  - 10.0.10.0/28
  - 10.0.11.0/28
  - 10.0.12.0/28
  - 10.0.13.0/28
  - 10.0.14.0/28
  - 10.0.15.0/28
  - 10.0.16.0/28
  - 10.0.17.0/28
  - 10.0.18.0/28
  - 10.0.19.0/28
  - 10.0.20.0/28
  - 10.0.21.0/28
  - 10.0.22.0/28
  - 10.0.23.0/28
  - 10.0.24.0/28
  - 10.0.25.0/28
  - 10.0.26.0/28
  - 10.0.27.0/28
  - 10.0.28.0/28
  - 10.0.29.0/28
  - 10.0.30.0/28
  - 10.0.31.0/28
  - 10.0.32.0/28
  - 10.0.33.0/28
  - 10.0.34.0/28
  - 10.0.35.0/28
  - 10.0.36.0/28
  - 10.0.37.0/28
  - 10.0.38.0/28
  - 10.0.39.0/28
  - 10.0.40.0/28
  - 10.0.41.0/28
  - 10.0.42.0/28
  - 10.0.43.0/28
  - 10.0.44.0/28
  - 10.0.45.0/28
  - 10.0.46.0/28
  - 10.0.47.0/28
  - 10.0.48.0/28
  - 10.0.49.0/28
  - 10.0.50.0/28
  - 10.0.51.0/28
  - 10.0.52.0/28
  - 10.0.53.0/28
  - 10.0.54.0/28
  - 10.0.55.0/28
  - 10.0.56.0/28
  - 10.0.57.0/28
  - 10.0.58.0/28
  - 10.0.59.0/28
  - 10.0.60.0/28
  - 10.0.61.0/28
  - 10.0.62.0/28
  - 10.0.63.0/28
  - 10.0.64.0/28
  - 10.0.65.0/28
  - 10.0.66.0/28
  - 10.0.67.0/28
  - 10.0.68.0/28
  - 10.0.69.0/28
  - 10.0.70.0/28
  - 10.0.71.0/28
  - 10.0.72.0/28
  - 10.0.73.0/28
  - 10.0.74.0/28
  - 10.0.75.0/28
  - 10.0.76.0/28
  - 10.0.77.0/28
  - 10.0.78.0/28
  - 10.0.79.0/28
  - 10.0.80.0/28
  - 10.0.81.0/28
  - 10.0.82.0/28
  - 10.0.83.0/28
  - 10.0.84.0/28
  - 10.0.85.0/28
  - 10.0.86.0/28
  - 10.0.87.0/28
  - 10.0.88.0/28
  - 10.0.89.0/28
  - 10.0.90.0/28
  - 10.0.91.0/28
  - 10.0.92.0/28
  - 10.0.93.0/28
  - 10.0.94.0/28
  - 10.0.95.0/28
  - 10.0.96.0/28
  - 10.0.97.0/28
  - 10.0.98.0/28
  - 10.0.99.0/28
  - 10.0.100.0/28
  - 10.0.101.0/28
  - 10.0.102.0/28
  - 10.0.103.0/28
  - 10.0.104.0/28
  - 10.0.105.0/28
  - 10.0.106.0/28
  - 10.0.107.0/28
  - 10.0.108.0/28
  - 10.0.109.0/28
  - 10.0.110.0/28
  - 10.0.111.0/28
  - 10.0.112.0/28
  - 10.0.113.0/28
  - 10.0.114.0/28
  - 10.0.115.0/28
  - 10.0.116.0/28
  - 10.0.117.0/28
  - 10.0.118.0/28
  - 10.0.119.0/28
  - 10.0.120.0/28
  - 10.0.121.0/28
  - 10.0.122.0/28
  - 10.0.123.0/28
  - 10.0.124.0/28
  - 10.0.125.0/28
  - 10.0.126.0/28
  - 10.0.127.0/28
  - 10.0.128.0/28
  - 10.0.129.0/28
  - 10.0.130.0/28
  - 10.0.131.0/28
  - 10.0.132.0/28
  - 10.0.133.0/28
  - 10.0.134.0/28
  - 10.0.135.0/28
  - 10.0.136.0/28
  - 10.0.137.0/28
  - 10.0.138.0/28
  - 10.0.139.0/28
  - 10.0.140.0/28
  - 10.0.141.0/28
  - 10.0.142.0/28
  - 10.0.143.0/28
  - 10.0.144.0/28
  - 10.0.145.0/28
  - 10.0.146.0/28
  - 10.0.147.0/28
  - 10.0.148.0/28
  - 10.0.149.0/28
  - 10.0.150.0/28
  - 10.0.151.0/28
  - 10.0.152.0/28
  - 10.0.153.0/28
  - 10.0.154.0/28
  - 10.0.155.0/28
  - 10.0.156.0/28
  - 10.0.157.0/28
  - 10.0.158.0/28
  - 10.0.159.0/28
  - 10.0.160.0/28
  - 10.0.161.0/28
  - 10.0.162.0/28
  - 10.0.163.0/28
  - 10.0.164.0/28
  - 10.0.165.0/28
  - 10.0.166.0/28
  - 10.0.167.0/28
  - 10.0.168.0/28
  - 10.0.169.0/28
  - 10.0.170.0/28
  - 10.0.171.0/28
  - 10.0.172.0/28
  - 10.0.173.0/28
  - 10.0.174.0/28
  - 10.0.175.0/28
  - 10.0.176.0/28
  - 10.0.177.0/28
  - 10.0.178.0/28
  - 10.0.179.0/28
  - 10.0.180.0/28
  - 10.0.181.0/28
  - 10.0.182.0/28
  - 10.0.183.0/28
  - 10.0.184.0/28
  - 10.0.185.0/28
  - 10.0.186.0/28
  - 10.0.187.0/28
  - 10.0.188.0/28
  - 10.0.189.0/28
  - 10.0.190.0/28
  - 10.0.191.0/28
  - 10.0.192.0/28
  - 10.0.193.0/28
  - 10.0.194.0/28
  - 10.0.195.0/28
  - 10.0.196.0/28
  - 10.0.197.0/28
  - 10.0.198.0/28
  - 10.0.199.0/28
  - 10.0.200.0/28
  - 10.0.201.0/28
  - 10.0.202.0/28
  - 10.0.203.0/28
  - 10.0.204.0/28
  - 10.0.205.0/28
  - 10.0.206.0/28
  - 10.0.207.0/28
  - 10.0.208.0/28
  - 10.0.209.0/28
  - 10.0.210.0/28
  - 10.0.211.0/28
  - 10.0.212.0/28
  - 10.0.213.0/28
  - 10.0.214.0/28
  - 10.0.215.0/28
  - 10.0.216.0/28
  - 10.0.217.0/28
  - 10.0.218.0/28
  - 10.0.219.0/28
  - 10.0.220.0/28
  - 10.0.221.0/28
... <truncated>
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'IPReservation' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPReservation -o wide
  # NAME                  CIDRS
  # ipreservation-name1   10.0.0.0/28,10.0.1.0/28,10.0.2.0/28,10.0.3.0/28,10.0.4.0/28,10.0.5.0/28,10.0....
ok ([32m0.6713s[0m)
Test mainline CRUD operations using JSON input and output. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":107,"createdIndex":106},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":106,"createdIndex":106}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":108,"createdIndex":108}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
{
  "apiVersion": "projectcalico.org/v3",
  "kind": "Profile",
  "metadata": {
    "labels": {
      "foo": "bar"
    },
    "name": "profile-name1"
  },
  "spec": {
    "egress": [
      {
        "action": "Allow",
        "source": {
          "selector": "type=='application'"
        }
      }
    ],
    "ingress": [
      {
        "action": "Deny",
        "destination": {
          "nets": [
            "10.2.0.0/16"
          ],
          "notNets": [
            "10.3.0.0/16"
          ],
          "notPorts": [
            "110:1050"
          ],
          "notSelector": "type=='apples'",
          "ports": [
            "100:200"
          ],
          "selector": "type=='application'"
        },
        "ipVersion": 4,
        "protocol": "TCP",
        "source": {
          "nets": [
            "10.0.0.0/16"
          ],
          "notNets": [
            "10.1.0.0/16"
          ],
          "notPorts": [
            1050
          ],
          "notSelector": "type=='database'",
          "ports": [
            1234,
            "10:20"
          ],
          "selector": "type=='application'"
        }
      }
    ]
  }
}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'Profile' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get profile profile-name1 -o json
  # {
  #   "kind": "Profile",
  #   "apiVersion": "projectcalico.org/v3",
  #   "metadata": {
  #     "name": "profile-name1",
  #     "uid": "e9a6f635-b568-4230-9f17-825d881c6ef7",
  #     "resourceVersion": "625",
  #     "creationTimestamp": "2024-08-07T19:49:04Z",
  #     "labels": {
  #       "foo": "bar"
  #     }
  #   },
  #   "spec": {
  #     "ingress": [
  #       {
  #         "action": "Deny",
  #         "ipVersion": 4,
  #         "protocol": "TCP",
  #         "source": {
  #           "nets": [
  #             "10.0.0.0/16"
  #           ],
  #           "selector": "type=='application'",
  #           "ports": [
  #             1234,
  #             "10:20"
  #           ],
  #           "notNets": [
  #             "10.1.0.0/16"
  #           ],
  #           "notSelector": "type=='database'",
  #           "notPorts": [
  #             1050
  #           ]
  #         },
  #         "destination": {
  #           "nets": [
  #             "10.2.0.0/16"
  #           ],
  #           "selector": "type=='application'",
  #           "ports": [
  #             "100:200"
  #           ],
  #           "notNets": [
  #             "10.3.0.0/16"
  #           ],
  #           "notSelector": "type=='apples'",
  #           "notPorts": [
  #             "110:1050"
  #           ]
  #         }
  #       }
  #     ],
  #     "egress": [
  #       {
  #         "action": "Allow",
  #         "source": {
  #           "selector": "type=='application'"
  #         },
  #         "destination": {}
  #       }
  #     ]
  #   }
  # }
{u'kind': u'Profile', u'spec': {u'ingress': [{u'action': u'Deny', u'ipVersion': 4, u'destination': {u'notNets': [u'10.3.0.0/16'], u'notSelector': u"type=='apples'", u'selector': u"type=='application'", u'notPorts': [u'110:1050'], u'nets': [u'10.2.0.0/16'], u'ports': [u'100:200']}, u'protocol': u'TCP', u'source': {u'notNets': [u'10.1.0.0/16'], u'notSelector': u"type=='database'", u'selector': u"type=='application'", u'notPorts': [1050], u'nets': [u'10.0.0.0/16'], u'ports': [1234, u'10:20']}}], u'egress': [{u'action': u'Allow', u'source': {u'selector': u"type=='application'"}, u'destination': {}}]}, u'apiVersion': u'projectcalico.org/v3', u'metadata': {u'labels': {u'foo': u'bar'}, u'resourceVersion': u'625', u'creationTimestamp': u'2024-08-07T19:49:04Z', u'name': u'profile-name1', u'uid': u'e9a6f635-b568-4230-9f17-825d881c6ef7'}}
Writing /tmp/input-data: 
{
  "apiVersion": "projectcalico.org/v3",
  "kind": "Profile",
  "metadata": {
    "name": "profile-name1"
  },
  "spec": {
    "egress": [
      {
        "action": "Allow"
      }
    ],
    "ingress": [
      {
        "action": "Deny",
        "ipVersion": 6
      }
    ]
  }
}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'Profile' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get profile profile-name1 -o json
  # {
  #   "kind": "Profile",
  #   "apiVersion": "projectcalico.org/v3",
  #   "metadata": {
  #     "name": "profile-name1",
  #     "uid": "e9a6f635-b568-4230-9f17-825d881c6ef7",
  #     "resourceVersion": "626",
  #     "creationTimestamp": "2024-08-07T19:49:04Z"
  #   },
  #   "spec": {
  #     "ingress": [
  #       {
  #         "action": "Deny",
  #         "ipVersion": 6,
  #         "source": {},
  #         "destination": {}
  #       }
  #     ],
  #     "egress": [
  #       {
  #         "action": "Allow",
  #         "source": {},
  #         "destination": {}
  #       }
  #     ]
  #   }
  # }
{u'kind': u'Profile', u'spec': {u'ingress': [{u'action': u'Deny', u'ipVersion': 6, u'destination': {}, u'source': {}}], u'egress': [{u'action': u'Allow', u'source': {}, u'destination': {}}]}, u'apiVersion': u'projectcalico.org/v3', u'metadata': {u'resourceVersion': u'626', u'creationTimestamp': u'2024-08-07T19:49:04Z', u'name': u'profile-name1', u'uid': u'e9a6f635-b568-4230-9f17-825d881c6ef7'}}
Writing /tmp/input-data: 
{
  "apiVersion": "projectcalico.org/v3",
  "kind": "Profile",
  "metadata": {
    "labels": {
      "foo": "bar"
    },
    "name": "profile-name1"
  },
  "spec": {
    "egress": [
      {
        "action": "Allow",
        "source": {
          "selector": "type=='application'"
        }
      }
    ],
    "ingress": [
      {
        "action": "Deny",
        "destination": {
          "nets": [
            "10.2.0.0/16"
          ],
          "notNets": [
            "10.3.0.0/16"
          ],
          "notPorts": [
            "110:1050"
          ],
          "notSelector": "type=='apples'",
          "ports": [
            "100:200"
          ],
          "selector": "type=='application'"
        },
        "ipVersion": 4,
        "protocol": "TCP",
        "source": {
          "nets": [
            "10.0.0.0/16"
          ],
          "notNets": [
            "10.1.0.0/16"
          ],
          "notPorts": [
            1050
          ],
          "notSelector": "type=='database'",
          "ports": [
            1234,
            "10:20"
          ],
          "selector": "type=='application'"
        }
      }
    ]
  }
}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Successfully replaced 1 'Profile' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get profile profile-name1 -o json
  # {
  #   "kind": "Profile",
  #   "apiVersion": "projectcalico.org/v3",
  #   "metadata": {
  #     "name": "profile-name1",
  #     "uid": "e9a6f635-b568-4230-9f17-825d881c6ef7",
  #     "resourceVersion": "627",
  #     "creationTimestamp": "2024-08-07T19:49:04Z",
  #     "labels": {
  #       "foo": "bar"
  #     }
  #   },
  #   "spec": {
  #     "ingress": [
  #       {
  #         "action": "Deny",
  #         "ipVersion": 4,
  #         "protocol": "TCP",
  #         "source": {
  #           "nets": [
  #             "10.0.0.0/16"
  #           ],
  #           "selector": "type=='application'",
  #           "ports": [
  #             1234,
  #             "10:20"
  #           ],
  #           "notNets": [
  #             "10.1.0.0/16"
  #           ],
  #           "notSelector": "type=='database'",
  #           "notPorts": [
  #             1050
  #           ]
  #         },
  #         "destination": {
  #           "nets": [
  #             "10.2.0.0/16"
  #           ],
  #           "selector": "type=='application'",
  #           "ports": [
  #             "100:200"
  #           ],
  #           "notNets": [
  #             "10.3.0.0/16"
  #           ],
  #           "notSelector": "type=='apples'",
  #           "notPorts": [
  #             "110:1050"
  #           ]
  #         }
  #       }
  #     ],
  #     "egress": [
  #       {
  #         "action": "Allow",
  #         "source": {
  #           "selector": "type=='application'"
  #         },
  #         "destination": {}
  #       }
  #     ]
  #   }
  # }
{u'kind': u'Profile', u'spec': {u'ingress': [{u'action': u'Deny', u'ipVersion': 4, u'destination': {u'notNets': [u'10.3.0.0/16'], u'notSelector': u"type=='apples'", u'selector': u"type=='application'", u'notPorts': [u'110:1050'], u'nets': [u'10.2.0.0/16'], u'ports': [u'100:200']}, u'protocol': u'TCP', u'source': {u'notNets': [u'10.1.0.0/16'], u'notSelector': u"type=='database'", u'selector': u"type=='application'", u'notPorts': [1050], u'nets': [u'10.0.0.0/16'], u'ports': [1234, u'10:20']}}], u'egress': [{u'action': u'Allow', u'source': {u'selector': u"type=='application'"}, u'destination': {}}]}, u'apiVersion': u'projectcalico.org/v3', u'metadata': {u'labels': {u'foo': u'bar'}, u'resourceVersion': u'627', u'creationTimestamp': u'2024-08-07T19:49:04Z', u'name': u'profile-name1', u'uid': u'e9a6f635-b568-4230-9f17-825d881c6ef7'}}
Writing /tmp/input-data: 
{
  "apiVersion": "projectcalico.org/v3",
  "kind": "Profile",
  "metadata": {
    "labels": {
      "foo": "bar"
    },
    "name": "profile-name1"
  },
  "spec": {
    "egress": [
      {
        "action": "Allow",
        "source": {
          "selector": "type=='application'"
        }
      }
    ],
    "ingress": [
      {
        "action": "Deny",
        "destination": {
          "nets": [
            "10.2.0.0/16"
          ],
          "notNets": [
            "10.3.0.0/16"
          ],
          "notPorts": [
            "110:1050"
          ],
          "notSelector": "type=='apples'",
          "ports": [
            "100:200"
          ],
          "selector": "type=='application'"
        },
        "ipVersion": 4,
        "protocol": "TCP",
        "source": {
          "nets": [
            "10.0.0.0/16"
          ],
          "notNets": [
            "10.1.0.0/16"
          ],
          "notPorts": [
            1050
          ],
          "notSelector": "type=='database'",
          "ports": [
            1234,
            "10:20"
          ],
          "selector": "type=='application'"
        }
      }
    ]
  }
}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'Profile' resource(s)
ok ([32m0.3489s[0m)
Test CRUD commands behave as expected on the kube controllers configuration resource: ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":109,"createdIndex":108},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":108,"createdIndex":108}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":110,"createdIndex":110}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: KubeControllersConfiguration
metadata:
  name: default
spec:
  controllers:
    node:
      hostEndpoint:
        autoCreate: Disabled
      syncLabels: Enabled
  logSeverityScreen: Info

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'KubeControllersConfiguration' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get kubecontrollersconfig default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: KubeControllersConfiguration
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:04Z"
  #   name: default
  #   resourceVersion: "633"
  #   uid: 1cac860b-9dc7-49ff-88de-add34afa0ccf
  # spec:
  #   controllers:
  #     node:
  #       hostEndpoint:
  #         autoCreate: Disabled
  #       leakGracePeriod: 15m0s
  #       syncLabels: Enabled
  #   logSeverityScreen: Info
  #   prometheusMetricsPort: 9094
  # status:
  #   runningConfig:
  #     controllers: {}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: KubeControllersConfiguration
metadata:
  name: default
spec:
  controllers:
    namespace: {}
    node:
      hostEndpoint:
        autoCreate: Disabled
      syncLabels: Enabled
  logSeverityScreen: Debug
status:
  environmentVars:
    LOG_LEVEL: Info

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Successfully replaced 1 'KubeControllersConfiguration' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get kubecontrollersconfig default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: KubeControllersConfiguration
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:04Z"
  #   name: default
  #   resourceVersion: "634"
  #   uid: 1cac860b-9dc7-49ff-88de-add34afa0ccf
  # spec:
  #   controllers:
  #     namespace: {}
  #     node:
  #       hostEndpoint:
  #         autoCreate: Disabled
  #       leakGracePeriod: 15m0s
  #       syncLabels: Enabled
  #   logSeverityScreen: Debug
  #   prometheusMetricsPort: 9094
  # status:
  #   environmentVars:
  #     LOG_LEVEL: Info
  #   runningConfig:
  #     controllers: {}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: KubeControllersConfiguration
metadata:
  name: default
spec:
  controllers:
    node:
      hostEndpoint:
        autoCreate: Disabled
      syncLabels: Enabled
  logSeverityScreen: Info

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'KubeControllersConfiguration' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get kubecontrollersconfig default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: KubeControllersConfiguration
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:04Z"
  #   name: default
  #   resourceVersion: "635"
  #   uid: 1cac860b-9dc7-49ff-88de-add34afa0ccf
  # spec:
  #   controllers:
  #     node:
  #       hostEndpoint:
  #         autoCreate: Disabled
  #       leakGracePeriod: 15m0s
  #       syncLabels: Enabled
  #   logSeverityScreen: Info
  #   prometheusMetricsPort: 9094
  # status:
  #   runningConfig:
  #     controllers: {}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete kubecontrollersconfig default
  # Successfully deleted 1 'KubeControllersConfiguration' resource(s)
ok ([32m0.3452s[0m)
Test calicoctl label command. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":111,"createdIndex":110},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":110,"createdIndex":110}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":112,"createdIndex":112}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: WorkloadEndpoint
metadata:
  labels:
    projectcalico.org/namespace: namespace1
    projectcalico.org/orchestrator: k8s
    type: database
  name: node1-k8s-abcd-eth0
  namespace: namespace1
spec:
  containerID: container1234
  endpoint: eth0
  interfaceName: cali1234
  ipNetworks:
  - 1.2.3.4/32
  node: node1
  orchestrator: k8s
  pod: abcd
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'WorkloadEndpoint' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch label workloadendpoint node1-k8s-abcd-eth0 app=web --namespace=namespace1
  # Successfully set label app on workloadendpoint node1-k8s-abcd-eth0
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get workloadendpoint node1-k8s-abcd-eth0 --namespace=namespace1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: WorkloadEndpoint
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:05Z"
  #   labels:
  #     app: web
  #     projectcalico.org/namespace: namespace1
  #     projectcalico.org/orchestrator: k8s
  #     type: database
  #   name: node1-k8s-abcd-eth0
  #   namespace: namespace1
  #   resourceVersion: "642"
  #   uid: b9fd4480-d2c2-4dbd-945d-5bd68f744431
  # spec:
  #   containerID: container1234
  #   endpoint: eth0
  #   interfaceName: cali1234
  #   ipNetworks:
  #   - 1.2.3.4/32
  #   node: node1
  #   orchestrator: k8s
  #   pod: abcd
  #   profiles:
  #   - prof1
  #   - prof2
  # status: {}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch label workloadendpoint node1-k8s-abcd-eth0 app=order --namespace=namespace1
  # Return code: 1
  # failed to update label of workloadendpoint node1-k8s-abcd-eth0, key app is already present. please use '--overwrite' to set a new value.
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch label workloadendpoint node1-k8s-abcd-eth0 app=order --namespace=namespace1 --overwrite
  # Successfully updated label app on workloadendpoint node1-k8s-abcd-eth0
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get workloadendpoint node1-k8s-abcd-eth0 --namespace=namespace1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: WorkloadEndpoint
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:05Z"
  #   labels:
  #     app: order
  #     projectcalico.org/namespace: namespace1
  #     projectcalico.org/orchestrator: k8s
  #     type: database
  #   name: node1-k8s-abcd-eth0
  #   namespace: namespace1
  #   resourceVersion: "643"
  #   uid: b9fd4480-d2c2-4dbd-945d-5bd68f744431
  # spec:
  #   containerID: container1234
  #   endpoint: eth0
  #   interfaceName: cali1234
  #   ipNetworks:
  #   - 1.2.3.4/32
  #   node: node1
  #   orchestrator: k8s
  #   pod: abcd
  #   profiles:
  #   - prof1
  #   - prof2
  # status: {}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch label workloadendpoint node1-k8s-abcd-eth0 app --namespace=namespace1 --remove
  # Successfully removed label app from workloadendpoint node1-k8s-abcd-eth0
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get workloadendpoint node1-k8s-abcd-eth0 --namespace=namespace1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: WorkloadEndpoint
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:05Z"
  #   labels:
  #     projectcalico.org/namespace: namespace1
  #     projectcalico.org/orchestrator: k8s
  #     type: database
  #   name: node1-k8s-abcd-eth0
  #   namespace: namespace1
  #   resourceVersion: "644"
  #   uid: b9fd4480-d2c2-4dbd-945d-5bd68f744431
  # spec:
  #   containerID: container1234
  #   endpoint: eth0
  #   interfaceName: cali1234
  #   ipNetworks:
  #   - 1.2.3.4/32
  #   node: node1
  #   orchestrator: k8s
  #   pod: abcd
  #   profiles:
  #   - prof1
  #   - prof2
  # status: {}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Node
metadata:
  name: node1
spec:
  bgp:
    ipv4Address: 1.2.3.4/24
    ipv6Address: aa:bb:cc::ff/120

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'Node' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch label nodes node1 cluster=frontend
  # Successfully set label cluster on nodes node1
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get nodes node1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: Node
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:05Z"
  #   labels:
  #     cluster: frontend
  #   name: node1
  #   resourceVersion: "646"
  #   uid: df270b67-6e17-4152-b5d9-34d696dbe0fe
  # spec:
  #   bgp:
  #     ipv4Address: 1.2.3.4/24
  #     ipv6Address: aa:bb:cc::ff/120
  # status: {}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Node
metadata:
  name: node1
spec:
  bgp:
    ipv4Address: 1.2.3.4/24
    ipv6Address: aa:bb:cc::ff/120

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'Node' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch label nodes node1 cluster --remove
  # Return code: 1
  # cannot remove label of nodes node1, key cluster does not exist
  # 
ok ([32m0.5468s[0m)
Test that the metadata fields other than labels and annotations cannot be changed [with create_cmd='create', update_cmd='replace'] ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":113,"createdIndex":112},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":112,"createdIndex":112}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":114,"createdIndex":114}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get hostendpoint endpoint1 -o yaml
  # Return code: 1
  # null
  # resource does not exist: HostEndpoint(endpoint1) with error: <nil>
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: HostEndpoint
metadata:
  labels:
    type: frontend
  name: endpoint1
spec:
  interfaceName: cali7
  node: host2
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'HostEndpoint' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get hostendpoint endpoint1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: HostEndpoint
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:05Z"
  #   labels:
  #     type: frontend
  #   name: endpoint1
  #   resourceVersion: "653"
  #   uid: 18336fd6-e4c8-449a-8371-2a19f7fb1eb8
  # spec:
  #   interfaceName: cali7
  #   node: host2
  #   profiles:
  #   - prof1
  #   - prof2
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: HostEndpoint
metadata:
  annotations:
    key: value
  creationTimestamp: '2006-01-02T15:04:05Z'
  finalizers:
  - finalizer1
  - finalizer2
  generation: 3
  labels:
    misc: version1
    type: frontend
  name: endpoint1
  selfLink: test-self-link
  uid: test-uid-change
spec:
  interfaceName: cali7
  node: host2
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Successfully replaced 1 'HostEndpoint' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get hostendpoint endpoint1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: HostEndpoint
  # metadata:
  #   annotations:
  #     key: value
  #   creationTimestamp: "2024-08-07T19:49:05Z"
  #   labels:
  #     misc: version1
  #     type: frontend
  #   name: endpoint1
  #   resourceVersion: "654"
  #   uid: 18336fd6-e4c8-449a-8371-2a19f7fb1eb8
  # spec:
  #   interfaceName: cali7
  #   node: host2
  #   profiles:
  #   - prof1
  #   - prof2
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete hostendpoint endpoint1
  # Successfully deleted 1 'HostEndpoint' resource(s)
ok ([32m0.3073s[0m)
Test that the metadata fields other than labels and annotations cannot be changed [with create_cmd='apply', update_cmd='apply'] ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":115,"createdIndex":114},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":114,"createdIndex":114}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":116,"createdIndex":116}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get hostendpoint endpoint1 -o yaml
  # Return code: 1
  # null
  # resource does not exist: HostEndpoint(endpoint1) with error: <nil>
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: HostEndpoint
metadata:
  labels:
    type: frontend
  name: endpoint1
spec:
  interfaceName: cali7
  node: host2
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'HostEndpoint' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get hostendpoint endpoint1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: HostEndpoint
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:06Z"
  #   labels:
  #     type: frontend
  #   name: endpoint1
  #   resourceVersion: "660"
  #   uid: 27c908a9-91ae-4958-9dd1-94da687bab1d
  # spec:
  #   interfaceName: cali7
  #   node: host2
  #   profiles:
  #   - prof1
  #   - prof2
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: HostEndpoint
metadata:
  annotations:
    key: value
  creationTimestamp: '2006-01-02T15:04:05Z'
  finalizers:
  - finalizer1
  - finalizer2
  generation: 3
  labels:
    misc: version1
    type: frontend
  name: endpoint1
  selfLink: test-self-link
  uid: test-uid-change
spec:
  interfaceName: cali7
  node: host2
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'HostEndpoint' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get hostendpoint endpoint1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: HostEndpoint
  # metadata:
  #   annotations:
  #     key: value
  #   creationTimestamp: "2024-08-07T19:49:06Z"
  #   labels:
  #     misc: version1
  #     type: frontend
  #   name: endpoint1
  #   resourceVersion: "661"
  #   uid: 27c908a9-91ae-4958-9dd1-94da687bab1d
  # spec:
  #   interfaceName: cali7
  #   node: host2
  #   profiles:
  #   - prof1
  #   - prof2
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete hostendpoint endpoint1
  # Successfully deleted 1 'HostEndpoint' resource(s)
ok ([32m0.3068s[0m)
Tests namespace is handled as expected for each namespaced resource type [with data={'kind': 'NetworkPolicy', 'spec'...e': 'default.policy-mypolicy1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":117,"createdIndex":116},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":116,"createdIndex":116}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":118,"createdIndex":118}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name1
  namespace: ''
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'NetworkPolicy' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name2
  namespace: namespace2
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'NetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get networkpolicy default.name1 --namespace default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:06Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.name1
  #   namespace: default
  #   resourceVersion: "668"
  #   uid: 3bda52dd-e671-4bd7-874d-a7d0fe643b74
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '3bda52dd-e671-4bd7-874d-a7d0fe643b74', 'resourceVersion': '668', 'creationTimestamp': '2024-08-07T19:49:06Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'default', 'name': 'default.name1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy --all-namespaces -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: NetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:06Z"
  #     labels:
  #       projectcalico.org/tier: default
  #     name: default.name1
  #     namespace: default
  #     resourceVersion: "668"
  #     uid: 3bda52dd-e671-4bd7-874d-a7d0fe643b74
  #   spec:
  #     egress:
  #     - action: Allow
  #       destination: {}
  #       source:
  #         selector: type=='application'
  #     ingress:
  #     - action: Deny
  #       destination:
  #         nets:
  #         - 10.2.0.0/16
  #         notNets:
  #         - 10.3.0.0/16
  #         notPorts:
  #         - 110:1050
  #         notSelector: type=='apples'
  #         ports:
  #         - 100:200
  #         selector: type=='application'
  #       ipVersion: 4
  #       protocol: TCP
  #       source:
  #         namespaceSelector: has(role)
  #         nets:
  #         - 10.0.0.0/16
  #         notNets:
  #         - 10.1.0.0/16
  #         notPorts:
  #         - 1050
  #         notSelector: type=='database'
  #         ports:
  #         - 1234
  #         - 10:1024
  #         selector: type=='application'
  #     order: 100
  #     selector: type=='database'
  #     tier: default
  #     types:
  #     - Ingress
  #     - Egress
  # - apiVersion: projectcalico.org/v3
  #   kind: NetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:06Z"
  #     labels:
  #       projectcalico.org/tier: default
  #     name: default.name2
  #     namespace: namespace2
  #     resourceVersion: "669"
  #     uid: 69e22ed5-cb6a-467a-9752-c834a3f04665
  #   spec:
  #     egress:
  #     - action: Allow
  #       destination: {}
  #       source:
  #         selector: type=='application'
  #     ingress:
  #     - action: Deny
  #       destination:
  #         nets:
  #         - 10.2.0.0/16
  #         notNets:
  #         - 10.3.0.0/16
  #         notPorts:
  #         - 110:1050
  #         notSelector: type=='apples'
  #         ports:
  #         - 100:200
  #         selector: type=='application'
  #       ipVersion: 4
  #       protocol: TCP
  #       source:
  #         namespaceSelector: has(role)
  #         nets:
  #         - 10.0.0.0/16
  #         notNets:
  #         - 10.1.0.0/16
  #         notPorts:
  #         - 1050
  #         notSelector: type=='database'
  #         ports:
  #         - 1234
  #         - 10:1024
  #         selector: type=='application'
  #     order: 100
  #     selector: type=='database'
  #     tier: default
  #     types:
  #     - Ingress
  #     - Egress
  # kind: NetworkPolicyList
  # metadata:
  #   resourceVersion: "669"
{'items': [{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '3bda52dd-e671-4bd7-874d-a7d0fe643b74', 'resourceVersion': '668', 'creationTimestamp': '2024-08-07T19:49:06Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'default', 'name': 'default.name1'}}, {'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '69e22ed5-cb6a-467a-9752-c834a3f04665', 'resourceVersion': '669', 'creationTimestamp': '2024-08-07T19:49:06Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'namespace2', 'name': 'default.name2'}}], 'kind': 'NetworkPolicyList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '669'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: NetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:06Z"
  #     labels:
  #       projectcalico.org/tier: default
  #     name: default.name1
  #     namespace: default
  #     resourceVersion: "668"
  #     uid: 3bda52dd-e671-4bd7-874d-a7d0fe643b74
  #   spec:
  #     egress:
  #     - action: Allow
  #       destination: {}
  #       source:
  #         selector: type=='application'
  #     ingress:
  #     - action: Deny
  #       destination:
  #         nets:
  #         - 10.2.0.0/16
  #         notNets:
  #         - 10.3.0.0/16
  #         notPorts:
  #         - 110:1050
  #         notSelector: type=='apples'
  #         ports:
  #         - 100:200
  #         selector: type=='application'
  #       ipVersion: 4
  #       protocol: TCP
  #       source:
  #         namespaceSelector: has(role)
  #         nets:
  #         - 10.0.0.0/16
  #         notNets:
  #         - 10.1.0.0/16
  #         notPorts:
  #         - 1050
  #         notSelector: type=='database'
  #         ports:
  #         - 1234
  #         - 10:1024
  #         selector: type=='application'
  #     order: 100
  #     selector: type=='database'
  #     tier: default
  #     types:
  #     - Ingress
  #     - Egress
  # kind: NetworkPolicyList
  # metadata:
  #   resourceVersion: "670"
{'items': [{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '3bda52dd-e671-4bd7-874d-a7d0fe643b74', 'resourceVersion': '668', 'creationTimestamp': '2024-08-07T19:49:06Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'default', 'name': 'default.name1'}}], 'kind': 'NetworkPolicyList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '670'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy -o yaml -n namespace2
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: NetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:06Z"
  #     labels:
  #       projectcalico.org/tier: default
  #     name: default.name2
  #     namespace: namespace2
  #     resourceVersion: "669"
  #     uid: 69e22ed5-cb6a-467a-9752-c834a3f04665
  #   spec:
  #     egress:
  #     - action: Allow
  #       destination: {}
  #       source:
  #         selector: type=='application'
  #     ingress:
  #     - action: Deny
  #       destination:
  #         nets:
  #         - 10.2.0.0/16
  #         notNets:
  #         - 10.3.0.0/16
  #         notPorts:
  #         - 110:1050
  #         notSelector: type=='apples'
  #         ports:
  #         - 100:200
  #         selector: type=='application'
  #       ipVersion: 4
  #       protocol: TCP
  #       source:
  #         namespaceSelector: has(role)
  #         nets:
  #         - 10.0.0.0/16
  #         notNets:
  #         - 10.1.0.0/16
  #         notPorts:
  #         - 1050
  #         notSelector: type=='database'
  #         ports:
  #         - 1234
  #         - 10:1024
  #         selector: type=='application'
  #     order: 100
  #     selector: type=='database'
  #     tier: default
  #     types:
  #     - Ingress
  #     - Egress
  # kind: NetworkPolicyList
  # metadata:
  #   resourceVersion: "670"
{'items': [{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '69e22ed5-cb6a-467a-9752-c834a3f04665', 'resourceVersion': '669', 'creationTimestamp': '2024-08-07T19:49:06Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'namespace2', 'name': 'default.name2'}}], 'kind': 'NetworkPolicyList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '670'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name1
  namespace: default
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:06Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.name1
  #   namespace: default
  #   resourceVersion: "668"
  #   uid: 3bda52dd-e671-4bd7-874d-a7d0fe643b74
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '3bda52dd-e671-4bd7-874d-a7d0fe643b74', 'resourceVersion': '668', 'creationTimestamp': '2024-08-07T19:49:06Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'default', 'name': 'default.name1'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name2
  namespace: namespace2
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:06Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.name2
  #   namespace: namespace2
  #   resourceVersion: "669"
  #   uid: 69e22ed5-cb6a-467a-9752-c834a3f04665
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '69e22ed5-cb6a-467a-9752-c834a3f04665', 'resourceVersion': '669', 'creationTimestamp': '2024-08-07T19:49:06Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'namespace2', 'name': 'default.name2'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name1
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:06Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.name1
  #   namespace: default
  #   resourceVersion: "668"
  #   uid: 3bda52dd-e671-4bd7-874d-a7d0fe643b74
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '3bda52dd-e671-4bd7-874d-a7d0fe643b74', 'resourceVersion': '668', 'creationTimestamp': '2024-08-07T19:49:06Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'default', 'name': 'default.name1'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name1
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -n namespace2 -f /tmp/input-data
  # Return code: 1
  # null
  # resource does not exist: NetworkPolicy(namespace2/default.name1) with error: <nil>
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name2
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -n namespace2 -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:06Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.name2
  #   namespace: namespace2
  #   resourceVersion: "669"
  #   uid: 69e22ed5-cb6a-467a-9752-c834a3f04665
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '69e22ed5-cb6a-467a-9752-c834a3f04665', 'resourceVersion': '669', 'creationTimestamp': '2024-08-07T19:49:06Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'namespace2', 'name': 'default.name2'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name2
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # Return code: 1
  # null
  # resource does not exist: NetworkPolicy(default/default.name2) with error: <nil>
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete NetworkPolicy default.name1
  # Successfully deleted 1 'NetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete NetworkPolicy default.name2
  # Return code: 1
  # Failed to delete 'NetworkPolicy' resource: resource does not exist: NetworkPolicy(default/default.name2) with error: <nil>
  # 
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name2
  namespace: namespace2
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'NetworkPolicy' resource(s)
ok ([32m0.6961s[0m)
Tests namespace is handled as expected for each namespaced resource type [with data={'kind': 'StagedNetworkPolicy', ...efault.policy-mystagedpolicy1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":119,"createdIndex":118},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":118,"createdIndex":118}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":120,"createdIndex":120}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name1
  namespace: ''
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'StagedNetworkPolicy' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name2
  namespace: namespace2
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'StagedNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get stagednetworkpolicy default.name1 --namespace default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:07Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.name1
  #   namespace: default
  #   resourceVersion: "677"
  #   uid: d6744ebe-0517-4606-b27c-d8f4a4e135a1
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': 'd6744ebe-0517-4606-b27c-d8f4a4e135a1', 'resourceVersion': '677', 'creationTimestamp': '2024-08-07T19:49:07Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'default', 'name': 'default.name1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedNetworkPolicy --all-namespaces -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: StagedNetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:07Z"
  #     labels:
  #       projectcalico.org/tier: default
  #     name: default.name1
  #     namespace: default
  #     resourceVersion: "677"
  #     uid: d6744ebe-0517-4606-b27c-d8f4a4e135a1
  #   spec:
  #     egress:
  #     - action: Allow
  #       destination: {}
  #       source:
  #         selector: type=='application'
  #     ingress:
  #     - action: Deny
  #       destination:
  #         nets:
  #         - 10.2.0.0/16
  #         notNets:
  #         - 10.3.0.0/16
  #         notPorts:
  #         - 110:1050
  #         notSelector: type=='apples'
  #         ports:
  #         - 100:200
  #         selector: type=='application'
  #       ipVersion: 4
  #       protocol: TCP
  #       source:
  #         namespaceSelector: has(role)
  #         nets:
  #         - 10.0.0.0/16
  #         notNets:
  #         - 10.1.0.0/16
  #         notPorts:
  #         - 1050
  #         notSelector: type=='database'
  #         ports:
  #         - 1234
  #         - 10:1024
  #         selector: type=='application'
  #     order: 100
  #     selector: type=='database'
  #     stagedAction: Set
  #     tier: default
  #     types:
  #     - Ingress
  #     - Egress
  # - apiVersion: projectcalico.org/v3
  #   kind: StagedNetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:07Z"
  #     labels:
  #       projectcalico.org/tier: default
  #     name: default.name2
  #     namespace: namespace2
  #     resourceVersion: "678"
  #     uid: 549674a3-0c2a-4ec6-869f-7724b0da337d
  #   spec:
  #     egress:
  #     - action: Allow
  #       destination: {}
  #       source:
  #         selector: type=='application'
  #     ingress:
  #     - action: Deny
  #       destination:
  #         nets:
  #         - 10.2.0.0/16
  #         notNets:
  #         - 10.3.0.0/16
  #         notPorts:
  #         - 110:1050
  #         notSelector: type=='apples'
  #         ports:
  #         - 100:200
  #         selector: type=='application'
  #       ipVersion: 4
  #       protocol: TCP
  #       source:
  #         namespaceSelector: has(role)
  #         nets:
  #         - 10.0.0.0/16
  #         notNets:
  #         - 10.1.0.0/16
  #         notPorts:
  #         - 1050
  #         notSelector: type=='database'
  #         ports:
  #         - 1234
  #         - 10:1024
  #         selector: type=='application'
  #     order: 100
  #     selector: type=='database'
  #     stagedAction: Set
  #     tier: default
  #     types:
  #     - Ingress
  #     - Egress
  # kind: StagedNetworkPolicyList
  # metadata:
  #   resourceVersion: "678"
{'items': [{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': 'd6744ebe-0517-4606-b27c-d8f4a4e135a1', 'resourceVersion': '677', 'creationTimestamp': '2024-08-07T19:49:07Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'default', 'name': 'default.name1'}}, {'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '549674a3-0c2a-4ec6-869f-7724b0da337d', 'resourceVersion': '678', 'creationTimestamp': '2024-08-07T19:49:07Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'namespace2', 'name': 'default.name2'}}], 'kind': 'StagedNetworkPolicyList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '678'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedNetworkPolicy -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: StagedNetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:07Z"
  #     labels:
  #       projectcalico.org/tier: default
  #     name: default.name1
  #     namespace: default
  #     resourceVersion: "677"
  #     uid: d6744ebe-0517-4606-b27c-d8f4a4e135a1
  #   spec:
  #     egress:
  #     - action: Allow
  #       destination: {}
  #       source:
  #         selector: type=='application'
  #     ingress:
  #     - action: Deny
  #       destination:
  #         nets:
  #         - 10.2.0.0/16
  #         notNets:
  #         - 10.3.0.0/16
  #         notPorts:
  #         - 110:1050
  #         notSelector: type=='apples'
  #         ports:
  #         - 100:200
  #         selector: type=='application'
  #       ipVersion: 4
  #       protocol: TCP
  #       source:
  #         namespaceSelector: has(role)
  #         nets:
  #         - 10.0.0.0/16
  #         notNets:
  #         - 10.1.0.0/16
  #         notPorts:
  #         - 1050
  #         notSelector: type=='database'
  #         ports:
  #         - 1234
  #         - 10:1024
  #         selector: type=='application'
  #     order: 100
  #     selector: type=='database'
  #     stagedAction: Set
  #     tier: default
  #     types:
  #     - Ingress
  #     - Egress
  # kind: StagedNetworkPolicyList
  # metadata:
  #   resourceVersion: "678"
{'items': [{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': 'd6744ebe-0517-4606-b27c-d8f4a4e135a1', 'resourceVersion': '677', 'creationTimestamp': '2024-08-07T19:49:07Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'default', 'name': 'default.name1'}}], 'kind': 'StagedNetworkPolicyList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '678'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedNetworkPolicy -o yaml -n namespace2
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: StagedNetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:07Z"
  #     labels:
  #       projectcalico.org/tier: default
  #     name: default.name2
  #     namespace: namespace2
  #     resourceVersion: "678"
  #     uid: 549674a3-0c2a-4ec6-869f-7724b0da337d
  #   spec:
  #     egress:
  #     - action: Allow
  #       destination: {}
  #       source:
  #         selector: type=='application'
  #     ingress:
  #     - action: Deny
  #       destination:
  #         nets:
  #         - 10.2.0.0/16
  #         notNets:
  #         - 10.3.0.0/16
  #         notPorts:
  #         - 110:1050
  #         notSelector: type=='apples'
  #         ports:
  #         - 100:200
  #         selector: type=='application'
  #       ipVersion: 4
  #       protocol: TCP
  #       source:
  #         namespaceSelector: has(role)
  #         nets:
  #         - 10.0.0.0/16
  #         notNets:
  #         - 10.1.0.0/16
  #         notPorts:
  #         - 1050
  #         notSelector: type=='database'
  #         ports:
  #         - 1234
  #         - 10:1024
  #         selector: type=='application'
  #     order: 100
  #     selector: type=='database'
  #     stagedAction: Set
  #     tier: default
  #     types:
  #     - Ingress
  #     - Egress
  # kind: StagedNetworkPolicyList
  # metadata:
  #   resourceVersion: "678"
{'items': [{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '549674a3-0c2a-4ec6-869f-7724b0da337d', 'resourceVersion': '678', 'creationTimestamp': '2024-08-07T19:49:07Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'namespace2', 'name': 'default.name2'}}], 'kind': 'StagedNetworkPolicyList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '678'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name1
  namespace: default
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:07Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.name1
  #   namespace: default
  #   resourceVersion: "677"
  #   uid: d6744ebe-0517-4606-b27c-d8f4a4e135a1
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': 'd6744ebe-0517-4606-b27c-d8f4a4e135a1', 'resourceVersion': '677', 'creationTimestamp': '2024-08-07T19:49:07Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'default', 'name': 'default.name1'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name2
  namespace: namespace2
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:07Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.name2
  #   namespace: namespace2
  #   resourceVersion: "678"
  #   uid: 549674a3-0c2a-4ec6-869f-7724b0da337d
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '549674a3-0c2a-4ec6-869f-7724b0da337d', 'resourceVersion': '678', 'creationTimestamp': '2024-08-07T19:49:07Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'namespace2', 'name': 'default.name2'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name1
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:07Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.name1
  #   namespace: default
  #   resourceVersion: "677"
  #   uid: d6744ebe-0517-4606-b27c-d8f4a4e135a1
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': 'd6744ebe-0517-4606-b27c-d8f4a4e135a1', 'resourceVersion': '677', 'creationTimestamp': '2024-08-07T19:49:07Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'default', 'name': 'default.name1'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name1
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -n namespace2 -f /tmp/input-data
  # Return code: 1
  # null
  # resource does not exist: StagedNetworkPolicy(namespace2/default.name1) with error: <nil>
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name2
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -n namespace2 -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:07Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.name2
  #   namespace: namespace2
  #   resourceVersion: "678"
  #   uid: 549674a3-0c2a-4ec6-869f-7724b0da337d
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '549674a3-0c2a-4ec6-869f-7724b0da337d', 'resourceVersion': '678', 'creationTimestamp': '2024-08-07T19:49:07Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'namespace2', 'name': 'default.name2'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name2
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # Return code: 1
  # null
  # resource does not exist: StagedNetworkPolicy(default/default.name2) with error: <nil>
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete StagedNetworkPolicy default.name1
  # Successfully deleted 1 'StagedNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete StagedNetworkPolicy default.name2
  # Return code: 1
  # Failed to delete 'StagedNetworkPolicy' resource: resource does not exist: StagedNetworkPolicy(default/default.name2) with error: <nil>
  # 
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: default
  name: default.name2
  namespace: namespace2
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'StagedNetworkPolicy' resource(s)
ok ([32m0.6966s[0m)
Tests namespace is handled as expected for each namespaced resource type [with data={'kind': 'NetworkSet', 'spec': {...metadata': {'name': 'net-set1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":121,"createdIndex":120},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":120,"createdIndex":120}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":122,"createdIndex":122}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkSet
metadata:
  name: name1
  namespace: ''
spec:
  nets:
  - 10.0.0.1
  - 11.0.0.0/16
  - feed:beef::1
  - dead:beef::96

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'NetworkSet' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkSet
metadata:
  name: name2
  namespace: namespace2
spec:
  nets:
  - 10.0.0.1
  - 11.0.0.0/16
  - feed:beef::1
  - dead:beef::96

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'NetworkSet' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get networkset name1 --namespace default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: NetworkSet
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:07Z"
  #   name: name1
  #   namespace: default
  #   resourceVersion: "685"
  #   uid: 34a82bd3-c185-440c-88c2-5c992d7f6260
  # spec:
  #   nets:
  #   - 10.0.0.1
  #   - 11.0.0.0/16
  #   - feed:beef::1
  #   - dead:beef::96
{'kind': 'NetworkSet', 'spec': {'nets': ['10.0.0.1', '11.0.0.0/16', 'feed:beef::1', 'dead:beef::96']}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:07Z', 'resourceVersion': '685', 'namespace': 'default', 'uid': '34a82bd3-c185-440c-88c2-5c992d7f6260', 'name': 'name1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkSet --all-namespaces -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: NetworkSet
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:07Z"
  #     name: name1
  #     namespace: default
  #     resourceVersion: "685"
  #     uid: 34a82bd3-c185-440c-88c2-5c992d7f6260
  #   spec:
  #     nets:
  #     - 10.0.0.1
  #     - 11.0.0.0/16
  #     - feed:beef::1
  #     - dead:beef::96
  # - apiVersion: projectcalico.org/v3
  #   kind: NetworkSet
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:07Z"
  #     name: name2
  #     namespace: namespace2
  #     resourceVersion: "686"
  #     uid: 39223ee1-be85-45ab-82a6-e4647c218692
  #   spec:
  #     nets:
  #     - 10.0.0.1
  #     - 11.0.0.0/16
  #     - feed:beef::1
  #     - dead:beef::96
  # kind: NetworkSetList
  # metadata:
  #   resourceVersion: "686"
{'items': [{'kind': 'NetworkSet', 'spec': {'nets': ['10.0.0.1', '11.0.0.0/16', 'feed:beef::1', 'dead:beef::96']}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:07Z', 'resourceVersion': '685', 'namespace': 'default', 'uid': '34a82bd3-c185-440c-88c2-5c992d7f6260', 'name': 'name1'}}, {'kind': 'NetworkSet', 'spec': {'nets': ['10.0.0.1', '11.0.0.0/16', 'feed:beef::1', 'dead:beef::96']}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:07Z', 'resourceVersion': '686', 'namespace': 'namespace2', 'uid': '39223ee1-be85-45ab-82a6-e4647c218692', 'name': 'name2'}}], 'kind': 'NetworkSetList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '686'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkSet -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: NetworkSet
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:07Z"
  #     name: name1
  #     namespace: default
  #     resourceVersion: "685"
  #     uid: 34a82bd3-c185-440c-88c2-5c992d7f6260
  #   spec:
  #     nets:
  #     - 10.0.0.1
  #     - 11.0.0.0/16
  #     - feed:beef::1
  #     - dead:beef::96
  # kind: NetworkSetList
  # metadata:
  #   resourceVersion: "686"
{'items': [{'kind': 'NetworkSet', 'spec': {'nets': ['10.0.0.1', '11.0.0.0/16', 'feed:beef::1', 'dead:beef::96']}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:07Z', 'resourceVersion': '685', 'namespace': 'default', 'uid': '34a82bd3-c185-440c-88c2-5c992d7f6260', 'name': 'name1'}}], 'kind': 'NetworkSetList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '686'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkSet -o yaml -n namespace2
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: NetworkSet
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:07Z"
  #     name: name2
  #     namespace: namespace2
  #     resourceVersion: "686"
  #     uid: 39223ee1-be85-45ab-82a6-e4647c218692
  #   spec:
  #     nets:
  #     - 10.0.0.1
  #     - 11.0.0.0/16
  #     - feed:beef::1
  #     - dead:beef::96
  # kind: NetworkSetList
  # metadata:
  #   resourceVersion: "686"
{'items': [{'kind': 'NetworkSet', 'spec': {'nets': ['10.0.0.1', '11.0.0.0/16', 'feed:beef::1', 'dead:beef::96']}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:07Z', 'resourceVersion': '686', 'namespace': 'namespace2', 'uid': '39223ee1-be85-45ab-82a6-e4647c218692', 'name': 'name2'}}], 'kind': 'NetworkSetList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '686'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkSet
metadata:
  name: name1
  namespace: default
spec:
  nets:
  - 10.0.0.1
  - 11.0.0.0/16
  - feed:beef::1
  - dead:beef::96

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: NetworkSet
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:07Z"
  #   name: name1
  #   namespace: default
  #   resourceVersion: "685"
  #   uid: 34a82bd3-c185-440c-88c2-5c992d7f6260
  # spec:
  #   nets:
  #   - 10.0.0.1
  #   - 11.0.0.0/16
  #   - feed:beef::1
  #   - dead:beef::96
{'kind': 'NetworkSet', 'spec': {'nets': ['10.0.0.1', '11.0.0.0/16', 'feed:beef::1', 'dead:beef::96']}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:07Z', 'resourceVersion': '685', 'namespace': 'default', 'uid': '34a82bd3-c185-440c-88c2-5c992d7f6260', 'name': 'name1'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkSet
metadata:
  name: name2
  namespace: namespace2
spec:
  nets:
  - 10.0.0.1
  - 11.0.0.0/16
  - feed:beef::1
  - dead:beef::96

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: NetworkSet
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:07Z"
  #   name: name2
  #   namespace: namespace2
  #   resourceVersion: "686"
  #   uid: 39223ee1-be85-45ab-82a6-e4647c218692
  # spec:
  #   nets:
  #   - 10.0.0.1
  #   - 11.0.0.0/16
  #   - feed:beef::1
  #   - dead:beef::96
{'kind': 'NetworkSet', 'spec': {'nets': ['10.0.0.1', '11.0.0.0/16', 'feed:beef::1', 'dead:beef::96']}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:07Z', 'resourceVersion': '686', 'namespace': 'namespace2', 'uid': '39223ee1-be85-45ab-82a6-e4647c218692', 'name': 'name2'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkSet
metadata:
  name: name1
spec:
  nets:
  - 10.0.0.1
  - 11.0.0.0/16
  - feed:beef::1
  - dead:beef::96

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: NetworkSet
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:07Z"
  #   name: name1
  #   namespace: default
  #   resourceVersion: "685"
  #   uid: 34a82bd3-c185-440c-88c2-5c992d7f6260
  # spec:
  #   nets:
  #   - 10.0.0.1
  #   - 11.0.0.0/16
  #   - feed:beef::1
  #   - dead:beef::96
{'kind': 'NetworkSet', 'spec': {'nets': ['10.0.0.1', '11.0.0.0/16', 'feed:beef::1', 'dead:beef::96']}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:07Z', 'resourceVersion': '685', 'namespace': 'default', 'uid': '34a82bd3-c185-440c-88c2-5c992d7f6260', 'name': 'name1'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkSet
metadata:
  name: name1
spec:
  nets:
  - 10.0.0.1
  - 11.0.0.0/16
  - feed:beef::1
  - dead:beef::96

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -n namespace2 -f /tmp/input-data
  # Return code: 1
  # null
  # resource does not exist: NetworkSet(namespace2/name1) with error: <nil>
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkSet
metadata:
  name: name2
spec:
  nets:
  - 10.0.0.1
  - 11.0.0.0/16
  - feed:beef::1
  - dead:beef::96

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -n namespace2 -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: NetworkSet
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:07Z"
  #   name: name2
  #   namespace: namespace2
  #   resourceVersion: "686"
  #   uid: 39223ee1-be85-45ab-82a6-e4647c218692
  # spec:
  #   nets:
  #   - 10.0.0.1
  #   - 11.0.0.0/16
  #   - feed:beef::1
  #   - dead:beef::96
{'kind': 'NetworkSet', 'spec': {'nets': ['10.0.0.1', '11.0.0.0/16', 'feed:beef::1', 'dead:beef::96']}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:07Z', 'resourceVersion': '686', 'namespace': 'namespace2', 'uid': '39223ee1-be85-45ab-82a6-e4647c218692', 'name': 'name2'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkSet
metadata:
  name: name2
spec:
  nets:
  - 10.0.0.1
  - 11.0.0.0/16
  - feed:beef::1
  - dead:beef::96

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # Return code: 1
  # null
  # resource does not exist: NetworkSet(default/name2) with error: <nil>
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete NetworkSet name1
  # Successfully deleted 1 'NetworkSet' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete NetworkSet name2
  # Return code: 1
  # Failed to delete 'NetworkSet' resource: resource does not exist: NetworkSet(default/name2) with error: <nil>
  # 
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkSet
metadata:
  name: name2
  namespace: namespace2
spec:
  nets:
  - 10.0.0.1
  - 11.0.0.0/16
  - feed:beef::1
  - dead:beef::96

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'NetworkSet' resource(s)
ok ([32m0.6313s[0m)
Tests namespace is handled as expected for each namespaced resource type [with data={'kind': 'WorkloadEndpoint', 'sp... 'name': 'node1-k8s-abcd-eth0'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":123,"createdIndex":122},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":122,"createdIndex":122}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":124,"createdIndex":124}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: WorkloadEndpoint
metadata:
  labels:
    projectcalico.org/namespace: namespace1
    projectcalico.org/orchestrator: k8s
    type: database
  name: node1-k8s-abcd-eth0
  namespace: ''
spec:
  containerID: container1234
  endpoint: eth0
  interfaceName: cali1234
  ipNetworks:
  - 1.2.3.4/32
  node: node1
  orchestrator: k8s
  pod: abcd
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'WorkloadEndpoint' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: WorkloadEndpoint
metadata:
  labels:
    projectcalico.org/namespace: namespace1
    projectcalico.org/orchestrator: k8s
    type: database
  name: node1-k8s-abcd-eth1
  namespace: namespace2
spec:
  containerID: container1234
  endpoint: eth1
  interfaceName: cali1234
  ipNetworks:
  - 1.2.3.4/32
  node: node1
  orchestrator: k8s
  pod: abcd
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'WorkloadEndpoint' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get workloadendpoint node1-k8s-abcd-eth0 --namespace default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: WorkloadEndpoint
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:08Z"
  #   labels:
  #     projectcalico.org/namespace: default
  #     projectcalico.org/orchestrator: k8s
  #     type: database
  #   name: node1-k8s-abcd-eth0
  #   namespace: default
  #   resourceVersion: "694"
  #   uid: 52350f38-0845-4f13-9d79-8ebac0814158
  # spec:
  #   containerID: container1234
  #   endpoint: eth0
  #   interfaceName: cali1234
  #   ipNetworks:
  #   - 1.2.3.4/32
  #   node: node1
  #   orchestrator: k8s
  #   pod: abcd
  #   profiles:
  #   - prof1
  #   - prof2
  # status: {}
{'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node1', 'endpoint': 'eth0', 'orchestrator': 'k8s', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'pod': 'abcd', 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '52350f38-0845-4f13-9d79-8ebac0814158', 'resourceVersion': '694', 'creationTimestamp': '2024-08-07T19:49:08Z', 'labels': {'projectcalico.org/orchestrator': 'k8s', 'type': 'database', 'projectcalico.org/namespace': 'default'}, 'namespace': 'default', 'name': 'node1-k8s-abcd-eth0'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get WorkloadEndpoint --all-namespaces -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: WorkloadEndpoint
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:08Z"
  #     labels:
  #       projectcalico.org/namespace: default
  #       projectcalico.org/orchestrator: k8s
  #       type: database
  #     name: node1-k8s-abcd-eth0
  #     namespace: default
  #     resourceVersion: "694"
  #     uid: 52350f38-0845-4f13-9d79-8ebac0814158
  #   spec:
  #     containerID: container1234
  #     endpoint: eth0
  #     interfaceName: cali1234
  #     ipNetworks:
  #     - 1.2.3.4/32
  #     node: node1
  #     orchestrator: k8s
  #     pod: abcd
  #     profiles:
  #     - prof1
  #     - prof2
  #   status: {}
  # - apiVersion: projectcalico.org/v3
  #   kind: WorkloadEndpoint
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:08Z"
  #     labels:
  #       projectcalico.org/namespace: namespace2
  #       projectcalico.org/orchestrator: k8s
  #       type: database
  #     name: node1-k8s-abcd-eth1
  #     namespace: namespace2
  #     resourceVersion: "695"
  #     uid: 13b6dd8c-df09-4b6c-accc-803468563074
  #   spec:
  #     containerID: container1234
  #     endpoint: eth1
  #     interfaceName: cali1234
  #     ipNetworks:
  #     - 1.2.3.4/32
  #     node: node1
  #     orchestrator: k8s
  #     pod: abcd
  #     profiles:
  #     - prof1
  #     - prof2
  #   status: {}
  # kind: WorkloadEndpointList
  # metadata:
  #   resourceVersion: "695"
{'items': [{'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node1', 'endpoint': 'eth0', 'orchestrator': 'k8s', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'pod': 'abcd', 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '52350f38-0845-4f13-9d79-8ebac0814158', 'resourceVersion': '694', 'creationTimestamp': '2024-08-07T19:49:08Z', 'labels': {'projectcalico.org/orchestrator': 'k8s', 'type': 'database', 'projectcalico.org/namespace': 'default'}, 'namespace': 'default', 'name': 'node1-k8s-abcd-eth0'}}, {'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node1', 'endpoint': 'eth1', 'orchestrator': 'k8s', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'pod': 'abcd', 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '13b6dd8c-df09-4b6c-accc-803468563074', 'resourceVersion': '695', 'creationTimestamp': '2024-08-07T19:49:08Z', 'labels': {'projectcalico.org/orchestrator': 'k8s', 'type': 'database', 'projectcalico.org/namespace': 'namespace2'}, 'namespace': 'namespace2', 'name': 'node1-k8s-abcd-eth1'}}], 'kind': 'WorkloadEndpointList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '695'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get WorkloadEndpoint -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: WorkloadEndpoint
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:08Z"
  #     labels:
  #       projectcalico.org/namespace: default
  #       projectcalico.org/orchestrator: k8s
  #       type: database
  #     name: node1-k8s-abcd-eth0
  #     namespace: default
  #     resourceVersion: "694"
  #     uid: 52350f38-0845-4f13-9d79-8ebac0814158
  #   spec:
  #     containerID: container1234
  #     endpoint: eth0
  #     interfaceName: cali1234
  #     ipNetworks:
  #     - 1.2.3.4/32
  #     node: node1
  #     orchestrator: k8s
  #     pod: abcd
  #     profiles:
  #     - prof1
  #     - prof2
  #   status: {}
  # kind: WorkloadEndpointList
  # metadata:
  #   resourceVersion: "695"
{'items': [{'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node1', 'endpoint': 'eth0', 'orchestrator': 'k8s', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'pod': 'abcd', 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '52350f38-0845-4f13-9d79-8ebac0814158', 'resourceVersion': '694', 'creationTimestamp': '2024-08-07T19:49:08Z', 'labels': {'projectcalico.org/orchestrator': 'k8s', 'type': 'database', 'projectcalico.org/namespace': 'default'}, 'namespace': 'default', 'name': 'node1-k8s-abcd-eth0'}}], 'kind': 'WorkloadEndpointList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '695'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get WorkloadEndpoint -o yaml -n namespace2
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: WorkloadEndpoint
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:08Z"
  #     labels:
  #       projectcalico.org/namespace: namespace2
  #       projectcalico.org/orchestrator: k8s
  #       type: database
  #     name: node1-k8s-abcd-eth1
  #     namespace: namespace2
  #     resourceVersion: "695"
  #     uid: 13b6dd8c-df09-4b6c-accc-803468563074
  #   spec:
  #     containerID: container1234
  #     endpoint: eth1
  #     interfaceName: cali1234
  #     ipNetworks:
  #     - 1.2.3.4/32
  #     node: node1
  #     orchestrator: k8s
  #     pod: abcd
  #     profiles:
  #     - prof1
  #     - prof2
  #   status: {}
  # kind: WorkloadEndpointList
  # metadata:
  #   resourceVersion: "695"
{'items': [{'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node1', 'endpoint': 'eth1', 'orchestrator': 'k8s', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'pod': 'abcd', 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '13b6dd8c-df09-4b6c-accc-803468563074', 'resourceVersion': '695', 'creationTimestamp': '2024-08-07T19:49:08Z', 'labels': {'projectcalico.org/orchestrator': 'k8s', 'type': 'database', 'projectcalico.org/namespace': 'namespace2'}, 'namespace': 'namespace2', 'name': 'node1-k8s-abcd-eth1'}}], 'kind': 'WorkloadEndpointList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '695'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: WorkloadEndpoint
metadata:
  labels:
    projectcalico.org/namespace: default
    projectcalico.org/orchestrator: k8s
    type: database
  name: node1-k8s-abcd-eth0
  namespace: default
spec:
  containerID: container1234
  endpoint: eth0
  interfaceName: cali1234
  ipNetworks:
  - 1.2.3.4/32
  node: node1
  orchestrator: k8s
  pod: abcd
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: WorkloadEndpoint
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:08Z"
  #   labels:
  #     projectcalico.org/namespace: default
  #     projectcalico.org/orchestrator: k8s
  #     type: database
  #   name: node1-k8s-abcd-eth0
  #   namespace: default
  #   resourceVersion: "694"
  #   uid: 52350f38-0845-4f13-9d79-8ebac0814158
  # spec:
  #   containerID: container1234
  #   endpoint: eth0
  #   interfaceName: cali1234
  #   ipNetworks:
  #   - 1.2.3.4/32
  #   node: node1
  #   orchestrator: k8s
  #   pod: abcd
  #   profiles:
  #   - prof1
  #   - prof2
  # status: {}
{'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node1', 'endpoint': 'eth0', 'orchestrator': 'k8s', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'pod': 'abcd', 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '52350f38-0845-4f13-9d79-8ebac0814158', 'resourceVersion': '694', 'creationTimestamp': '2024-08-07T19:49:08Z', 'labels': {'projectcalico.org/orchestrator': 'k8s', 'type': 'database', 'projectcalico.org/namespace': 'default'}, 'namespace': 'default', 'name': 'node1-k8s-abcd-eth0'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: WorkloadEndpoint
metadata:
  labels:
    projectcalico.org/namespace: namespace2
    projectcalico.org/orchestrator: k8s
    type: database
  name: node1-k8s-abcd-eth1
  namespace: namespace2
spec:
  containerID: container1234
  endpoint: eth1
  interfaceName: cali1234
  ipNetworks:
  - 1.2.3.4/32
  node: node1
  orchestrator: k8s
  pod: abcd
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: WorkloadEndpoint
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:08Z"
  #   labels:
  #     projectcalico.org/namespace: namespace2
  #     projectcalico.org/orchestrator: k8s
  #     type: database
  #   name: node1-k8s-abcd-eth1
  #   namespace: namespace2
  #   resourceVersion: "695"
  #   uid: 13b6dd8c-df09-4b6c-accc-803468563074
  # spec:
  #   containerID: container1234
  #   endpoint: eth1
  #   interfaceName: cali1234
  #   ipNetworks:
  #   - 1.2.3.4/32
  #   node: node1
  #   orchestrator: k8s
  #   pod: abcd
  #   profiles:
  #   - prof1
  #   - prof2
  # status: {}
{'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node1', 'endpoint': 'eth1', 'orchestrator': 'k8s', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'pod': 'abcd', 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '13b6dd8c-df09-4b6c-accc-803468563074', 'resourceVersion': '695', 'creationTimestamp': '2024-08-07T19:49:08Z', 'labels': {'projectcalico.org/orchestrator': 'k8s', 'type': 'database', 'projectcalico.org/namespace': 'namespace2'}, 'namespace': 'namespace2', 'name': 'node1-k8s-abcd-eth1'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: WorkloadEndpoint
metadata:
  labels:
    projectcalico.org/namespace: default
    projectcalico.org/orchestrator: k8s
    type: database
  name: node1-k8s-abcd-eth0
spec:
  containerID: container1234
  endpoint: eth0
  interfaceName: cali1234
  ipNetworks:
  - 1.2.3.4/32
  node: node1
  orchestrator: k8s
  pod: abcd
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: WorkloadEndpoint
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:08Z"
  #   labels:
  #     projectcalico.org/namespace: default
  #     projectcalico.org/orchestrator: k8s
  #     type: database
  #   name: node1-k8s-abcd-eth0
  #   namespace: default
  #   resourceVersion: "694"
  #   uid: 52350f38-0845-4f13-9d79-8ebac0814158
  # spec:
  #   containerID: container1234
  #   endpoint: eth0
  #   interfaceName: cali1234
  #   ipNetworks:
  #   - 1.2.3.4/32
  #   node: node1
  #   orchestrator: k8s
  #   pod: abcd
  #   profiles:
  #   - prof1
  #   - prof2
  # status: {}
{'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node1', 'endpoint': 'eth0', 'orchestrator': 'k8s', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'pod': 'abcd', 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '52350f38-0845-4f13-9d79-8ebac0814158', 'resourceVersion': '694', 'creationTimestamp': '2024-08-07T19:49:08Z', 'labels': {'projectcalico.org/orchestrator': 'k8s', 'type': 'database', 'projectcalico.org/namespace': 'default'}, 'namespace': 'default', 'name': 'node1-k8s-abcd-eth0'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: WorkloadEndpoint
metadata:
  labels:
    projectcalico.org/namespace: default
    projectcalico.org/orchestrator: k8s
    type: database
  name: node1-k8s-abcd-eth0
spec:
  containerID: container1234
  endpoint: eth0
  interfaceName: cali1234
  ipNetworks:
  - 1.2.3.4/32
  node: node1
  orchestrator: k8s
  pod: abcd
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -n namespace2 -f /tmp/input-data
  # Return code: 1
  # null
  # resource does not exist: WorkloadEndpoint(namespace2/node1-k8s-abcd-eth0) with error: <nil>
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: WorkloadEndpoint
metadata:
  labels:
    projectcalico.org/namespace: namespace2
    projectcalico.org/orchestrator: k8s
    type: database
  name: node1-k8s-abcd-eth1
spec:
  containerID: container1234
  endpoint: eth1
  interfaceName: cali1234
  ipNetworks:
  - 1.2.3.4/32
  node: node1
  orchestrator: k8s
  pod: abcd
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -n namespace2 -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: WorkloadEndpoint
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:08Z"
  #   labels:
  #     projectcalico.org/namespace: namespace2
  #     projectcalico.org/orchestrator: k8s
  #     type: database
  #   name: node1-k8s-abcd-eth1
  #   namespace: namespace2
  #   resourceVersion: "695"
  #   uid: 13b6dd8c-df09-4b6c-accc-803468563074
  # spec:
  #   containerID: container1234
  #   endpoint: eth1
  #   interfaceName: cali1234
  #   ipNetworks:
  #   - 1.2.3.4/32
  #   node: node1
  #   orchestrator: k8s
  #   pod: abcd
  #   profiles:
  #   - prof1
  #   - prof2
  # status: {}
{'status': {}, 'kind': 'WorkloadEndpoint', 'spec': {'node': 'node1', 'endpoint': 'eth1', 'orchestrator': 'k8s', 'containerID': 'container1234', 'ipNetworks': ['1.2.3.4/32'], 'profiles': ['prof1', 'prof2'], 'pod': 'abcd', 'interfaceName': 'cali1234'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '13b6dd8c-df09-4b6c-accc-803468563074', 'resourceVersion': '695', 'creationTimestamp': '2024-08-07T19:49:08Z', 'labels': {'projectcalico.org/orchestrator': 'k8s', 'type': 'database', 'projectcalico.org/namespace': 'namespace2'}, 'namespace': 'namespace2', 'name': 'node1-k8s-abcd-eth1'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: WorkloadEndpoint
metadata:
  labels:
    projectcalico.org/namespace: namespace2
    projectcalico.org/orchestrator: k8s
    type: database
  name: node1-k8s-abcd-eth1
spec:
  containerID: container1234
  endpoint: eth1
  interfaceName: cali1234
  ipNetworks:
  - 1.2.3.4/32
  node: node1
  orchestrator: k8s
  pod: abcd
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # Return code: 1
  # null
  # resource does not exist: WorkloadEndpoint(default/node1-k8s-abcd-eth1) with error: <nil>
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete WorkloadEndpoint node1-k8s-abcd-eth0
  # Successfully deleted 1 'WorkloadEndpoint' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete WorkloadEndpoint node1-k8s-abcd-eth1
  # Return code: 1
  # Failed to delete 'WorkloadEndpoint' resource: resource does not exist: WorkloadEndpoint(default/node1-k8s-abcd-eth1) with error: <nil>
  # 
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: WorkloadEndpoint
metadata:
  labels:
    projectcalico.org/namespace: namespace2
    projectcalico.org/orchestrator: k8s
    type: database
  name: node1-k8s-abcd-eth1
  namespace: namespace2
spec:
  containerID: container1234
  endpoint: eth1
  interfaceName: cali1234
  ipNetworks:
  - 1.2.3.4/32
  node: node1
  orchestrator: k8s
  pod: abcd
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'WorkloadEndpoint' resource(s)
ok ([32m0.6513s[0m)
Tests namespace is handled as expected for each namespaced resource type [with data={'kind': 'PacketCapture', 'spec'...1', 'name': 'packet-capture-1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":125,"createdIndex":124},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":124,"createdIndex":124}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":126,"createdIndex":126}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: name1
  namespace: ''
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'PacketCapture' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: name2
  namespace: namespace2
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'PacketCapture' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get packetcapture name1 --namespace default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: PacketCapture
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:09Z"
  #   name: name1
  #   namespace: default
  #   resourceVersion: "702"
  #   uid: c53b4231-f74e-415c-938b-85dc01a01765
  # spec:
  #   selector: all()
  # status: {}
{'status': {}, 'kind': 'PacketCapture', 'spec': {'selector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:09Z', 'resourceVersion': '702', 'namespace': 'default', 'uid': 'c53b4231-f74e-415c-938b-85dc01a01765', 'name': 'name1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get PacketCapture --all-namespaces -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: PacketCapture
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:09Z"
  #     name: name1
  #     namespace: default
  #     resourceVersion: "702"
  #     uid: c53b4231-f74e-415c-938b-85dc01a01765
  #   spec:
  #     selector: all()
  #   status: {}
  # - apiVersion: projectcalico.org/v3
  #   kind: PacketCapture
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:09Z"
  #     name: name2
  #     namespace: namespace2
  #     resourceVersion: "703"
  #     uid: 92bd905a-e66a-4c2f-a1f1-d70e9a3b6941
  #   spec:
  #     selector: all()
  #   status: {}
  # kind: PacketCaptureList
  # metadata:
  #   resourceVersion: "703"
{'items': [{'status': {}, 'kind': 'PacketCapture', 'spec': {'selector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:09Z', 'resourceVersion': '702', 'namespace': 'default', 'uid': 'c53b4231-f74e-415c-938b-85dc01a01765', 'name': 'name1'}}, {'status': {}, 'kind': 'PacketCapture', 'spec': {'selector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:09Z', 'resourceVersion': '703', 'namespace': 'namespace2', 'uid': '92bd905a-e66a-4c2f-a1f1-d70e9a3b6941', 'name': 'name2'}}], 'kind': 'PacketCaptureList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '703'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get PacketCapture -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: PacketCapture
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:09Z"
  #     name: name1
  #     namespace: default
  #     resourceVersion: "702"
  #     uid: c53b4231-f74e-415c-938b-85dc01a01765
  #   spec:
  #     selector: all()
  #   status: {}
  # kind: PacketCaptureList
  # metadata:
  #   resourceVersion: "703"
{'items': [{'status': {}, 'kind': 'PacketCapture', 'spec': {'selector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:09Z', 'resourceVersion': '702', 'namespace': 'default', 'uid': 'c53b4231-f74e-415c-938b-85dc01a01765', 'name': 'name1'}}], 'kind': 'PacketCaptureList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '703'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get PacketCapture -o yaml -n namespace2
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: PacketCapture
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:09Z"
  #     name: name2
  #     namespace: namespace2
  #     resourceVersion: "703"
  #     uid: 92bd905a-e66a-4c2f-a1f1-d70e9a3b6941
  #   spec:
  #     selector: all()
  #   status: {}
  # kind: PacketCaptureList
  # metadata:
  #   resourceVersion: "703"
{'items': [{'status': {}, 'kind': 'PacketCapture', 'spec': {'selector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:09Z', 'resourceVersion': '703', 'namespace': 'namespace2', 'uid': '92bd905a-e66a-4c2f-a1f1-d70e9a3b6941', 'name': 'name2'}}], 'kind': 'PacketCaptureList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '703'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: name1
  namespace: default
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: PacketCapture
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:09Z"
  #   name: name1
  #   namespace: default
  #   resourceVersion: "702"
  #   uid: c53b4231-f74e-415c-938b-85dc01a01765
  # spec:
  #   selector: all()
  # status: {}
{'status': {}, 'kind': 'PacketCapture', 'spec': {'selector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:09Z', 'resourceVersion': '702', 'namespace': 'default', 'uid': 'c53b4231-f74e-415c-938b-85dc01a01765', 'name': 'name1'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: name2
  namespace: namespace2
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: PacketCapture
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:09Z"
  #   name: name2
  #   namespace: namespace2
  #   resourceVersion: "703"
  #   uid: 92bd905a-e66a-4c2f-a1f1-d70e9a3b6941
  # spec:
  #   selector: all()
  # status: {}
{'status': {}, 'kind': 'PacketCapture', 'spec': {'selector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:09Z', 'resourceVersion': '703', 'namespace': 'namespace2', 'uid': '92bd905a-e66a-4c2f-a1f1-d70e9a3b6941', 'name': 'name2'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: name1
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: PacketCapture
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:09Z"
  #   name: name1
  #   namespace: default
  #   resourceVersion: "702"
  #   uid: c53b4231-f74e-415c-938b-85dc01a01765
  # spec:
  #   selector: all()
  # status: {}
{'status': {}, 'kind': 'PacketCapture', 'spec': {'selector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:09Z', 'resourceVersion': '702', 'namespace': 'default', 'uid': 'c53b4231-f74e-415c-938b-85dc01a01765', 'name': 'name1'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: name1
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -n namespace2 -f /tmp/input-data
  # Return code: 1
  # null
  # resource does not exist: PacketCapture(namespace2/name1) with error: <nil>
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: name2
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -n namespace2 -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: PacketCapture
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:09Z"
  #   name: name2
  #   namespace: namespace2
  #   resourceVersion: "703"
  #   uid: 92bd905a-e66a-4c2f-a1f1-d70e9a3b6941
  # spec:
  #   selector: all()
  # status: {}
{'status': {}, 'kind': 'PacketCapture', 'spec': {'selector': 'all()'}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'creationTimestamp': '2024-08-07T19:49:09Z', 'resourceVersion': '703', 'namespace': 'namespace2', 'uid': '92bd905a-e66a-4c2f-a1f1-d70e9a3b6941', 'name': 'name2'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: name2
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # Return code: 1
  # null
  # resource does not exist: PacketCapture(default/name2) with error: <nil>
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete PacketCapture name1
  # Successfully deleted 1 'PacketCapture' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete PacketCapture name2
  # Return code: 1
  # Failed to delete 'PacketCapture' resource: resource does not exist: PacketCapture(default/name2) with error: <nil>
  # 
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: name2
  namespace: namespace2
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'PacketCapture' resource(s)
ok ([32m0.6328s[0m)
Tests namespace is handled as expected for each namespaced resource type [with data={'kind': 'NetworkPolicy', 'spec'...lt', 'name': 'admin.mypolicy2'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":127,"createdIndex":126},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":126,"createdIndex":126}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":128,"createdIndex":128}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Tier
metadata:
  name: admin
spec:
  Order: 1000

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'Tier' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name1
  namespace: ''
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'NetworkPolicy' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name2
  namespace: namespace2
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'NetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get networkpolicy admin.name1 --namespace default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:09Z"
  #   labels:
  #     projectcalico.org/tier: admin
  #   name: admin.name1
  #   namespace: default
  #   resourceVersion: "711"
  #   uid: 9ef48f22-3650-4035-afae-190412e3863b
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   tier: admin
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '9ef48f22-3650-4035-afae-190412e3863b', 'resourceVersion': '711', 'creationTimestamp': '2024-08-07T19:49:09Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'default', 'name': 'admin.name1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy --all-namespaces -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: NetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:09Z"
  #     labels:
  #       projectcalico.org/tier: admin
  #     name: admin.name1
  #     namespace: default
  #     resourceVersion: "711"
  #     uid: 9ef48f22-3650-4035-afae-190412e3863b
  #   spec:
  #     egress:
  #     - action: Deny
  #       destination: {}
  #       protocol: TCP
  #       source: {}
  #     ingress:
  #     - action: Allow
  #       destination: {}
  #       protocol: UDP
  #       source: {}
  #     order: 100000
  #     selector: type=='sql'
  #     tier: admin
  #     types:
  #     - Ingress
  #     - Egress
  # - apiVersion: projectcalico.org/v3
  #   kind: NetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:09Z"
  #     labels:
  #       projectcalico.org/tier: admin
  #     name: admin.name2
  #     namespace: namespace2
  #     resourceVersion: "712"
  #     uid: a9e0757b-a488-4bcc-b71b-25f1231d2508
  #   spec:
  #     egress:
  #     - action: Deny
  #       destination: {}
  #       protocol: TCP
  #       source: {}
  #     ingress:
  #     - action: Allow
  #       destination: {}
  #       protocol: UDP
  #       source: {}
  #     order: 100000
  #     selector: type=='sql'
  #     tier: admin
  #     types:
  #     - Ingress
  #     - Egress
  # kind: NetworkPolicyList
  # metadata:
  #   resourceVersion: "712"
{'items': [{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '9ef48f22-3650-4035-afae-190412e3863b', 'resourceVersion': '711', 'creationTimestamp': '2024-08-07T19:49:09Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'default', 'name': 'admin.name1'}}, {'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': 'a9e0757b-a488-4bcc-b71b-25f1231d2508', 'resourceVersion': '712', 'creationTimestamp': '2024-08-07T19:49:09Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'namespace2', 'name': 'admin.name2'}}], 'kind': 'NetworkPolicyList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '712'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: NetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:09Z"
  #     labels:
  #       projectcalico.org/tier: admin
  #     name: admin.name1
  #     namespace: default
  #     resourceVersion: "711"
  #     uid: 9ef48f22-3650-4035-afae-190412e3863b
  #   spec:
  #     egress:
  #     - action: Deny
  #       destination: {}
  #       protocol: TCP
  #       source: {}
  #     ingress:
  #     - action: Allow
  #       destination: {}
  #       protocol: UDP
  #       source: {}
  #     order: 100000
  #     selector: type=='sql'
  #     tier: admin
  #     types:
  #     - Ingress
  #     - Egress
  # kind: NetworkPolicyList
  # metadata:
  #   resourceVersion: "712"
{'items': [{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '9ef48f22-3650-4035-afae-190412e3863b', 'resourceVersion': '711', 'creationTimestamp': '2024-08-07T19:49:09Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'default', 'name': 'admin.name1'}}], 'kind': 'NetworkPolicyList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '712'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy -o yaml -n namespace2
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: NetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:09Z"
  #     labels:
  #       projectcalico.org/tier: admin
  #     name: admin.name2
  #     namespace: namespace2
  #     resourceVersion: "712"
  #     uid: a9e0757b-a488-4bcc-b71b-25f1231d2508
  #   spec:
  #     egress:
  #     - action: Deny
  #       destination: {}
  #       protocol: TCP
  #       source: {}
  #     ingress:
  #     - action: Allow
  #       destination: {}
  #       protocol: UDP
  #       source: {}
  #     order: 100000
  #     selector: type=='sql'
  #     tier: admin
  #     types:
  #     - Ingress
  #     - Egress
  # kind: NetworkPolicyList
  # metadata:
  #   resourceVersion: "712"
{'items': [{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': 'a9e0757b-a488-4bcc-b71b-25f1231d2508', 'resourceVersion': '712', 'creationTimestamp': '2024-08-07T19:49:09Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'namespace2', 'name': 'admin.name2'}}], 'kind': 'NetworkPolicyList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '712'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name1
  namespace: default
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:09Z"
  #   labels:
  #     projectcalico.org/tier: admin
  #   name: admin.name1
  #   namespace: default
  #   resourceVersion: "711"
  #   uid: 9ef48f22-3650-4035-afae-190412e3863b
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   tier: admin
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '9ef48f22-3650-4035-afae-190412e3863b', 'resourceVersion': '711', 'creationTimestamp': '2024-08-07T19:49:09Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'default', 'name': 'admin.name1'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name2
  namespace: namespace2
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:09Z"
  #   labels:
  #     projectcalico.org/tier: admin
  #   name: admin.name2
  #   namespace: namespace2
  #   resourceVersion: "712"
  #   uid: a9e0757b-a488-4bcc-b71b-25f1231d2508
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   tier: admin
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': 'a9e0757b-a488-4bcc-b71b-25f1231d2508', 'resourceVersion': '712', 'creationTimestamp': '2024-08-07T19:49:09Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'namespace2', 'name': 'admin.name2'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name1
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:09Z"
  #   labels:
  #     projectcalico.org/tier: admin
  #   name: admin.name1
  #   namespace: default
  #   resourceVersion: "711"
  #   uid: 9ef48f22-3650-4035-afae-190412e3863b
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   tier: admin
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '9ef48f22-3650-4035-afae-190412e3863b', 'resourceVersion': '711', 'creationTimestamp': '2024-08-07T19:49:09Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'default', 'name': 'admin.name1'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name1
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -n namespace2 -f /tmp/input-data
  # Return code: 1
  # null
  # resource does not exist: NetworkPolicy(namespace2/admin.name1) with error: <nil>
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name2
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -n namespace2 -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:09Z"
  #   labels:
  #     projectcalico.org/tier: admin
  #   name: admin.name2
  #   namespace: namespace2
  #   resourceVersion: "712"
  #   uid: a9e0757b-a488-4bcc-b71b-25f1231d2508
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   tier: admin
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': 'a9e0757b-a488-4bcc-b71b-25f1231d2508', 'resourceVersion': '712', 'creationTimestamp': '2024-08-07T19:49:09Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'namespace2', 'name': 'admin.name2'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name2
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # Return code: 1
  # null
  # resource does not exist: NetworkPolicy(default/admin.name2) with error: <nil>
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete NetworkPolicy admin.name1
  # Successfully deleted 1 'NetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete NetworkPolicy admin.name2
  # Return code: 1
  # Failed to delete 'NetworkPolicy' resource: resource does not exist: NetworkPolicy(default/admin.name2) with error: <nil>
  # 
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name2
  namespace: namespace2
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'NetworkPolicy' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Tier
metadata:
  name: admin
spec:
  Order: 1000

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'Tier' resource(s)
ok ([32m0.7227s[0m)
Tests namespace is handled as expected for each namespaced resource type [with data={'kind': 'StagedNetworkPolicy', ...name': 'admin.mystagedpolicy2'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":129,"createdIndex":128},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":128,"createdIndex":128}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":130,"createdIndex":130}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Tier
metadata:
  name: admin
spec:
  Order: 1000

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'Tier' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name1
  namespace: ''
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'StagedNetworkPolicy' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name2
  namespace: namespace2
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'StagedNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get stagednetworkpolicy admin.name1 --namespace default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:10Z"
  #   labels:
  #     projectcalico.org/tier: admin
  #   name: admin.name1
  #   namespace: default
  #   resourceVersion: "722"
  #   uid: 0fa34570-cbf9-4322-b6ef-a515af2db3c4
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   stagedAction: Set
  #   tier: admin
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '0fa34570-cbf9-4322-b6ef-a515af2db3c4', 'resourceVersion': '722', 'creationTimestamp': '2024-08-07T19:49:10Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'default', 'name': 'admin.name1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedNetworkPolicy --all-namespaces -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: StagedNetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:10Z"
  #     labels:
  #       projectcalico.org/tier: admin
  #     name: admin.name1
  #     namespace: default
  #     resourceVersion: "722"
  #     uid: 0fa34570-cbf9-4322-b6ef-a515af2db3c4
  #   spec:
  #     egress:
  #     - action: Deny
  #       destination: {}
  #       protocol: TCP
  #       source: {}
  #     ingress:
  #     - action: Allow
  #       destination: {}
  #       protocol: UDP
  #       source: {}
  #     order: 100000
  #     selector: type=='sql'
  #     stagedAction: Set
  #     tier: admin
  #     types:
  #     - Ingress
  #     - Egress
  # - apiVersion: projectcalico.org/v3
  #   kind: StagedNetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:10Z"
  #     labels:
  #       projectcalico.org/tier: admin
  #     name: admin.name2
  #     namespace: namespace2
  #     resourceVersion: "723"
  #     uid: 40c1778f-7db9-4c8c-878b-0a0b986f959e
  #   spec:
  #     egress:
  #     - action: Deny
  #       destination: {}
  #       protocol: TCP
  #       source: {}
  #     ingress:
  #     - action: Allow
  #       destination: {}
  #       protocol: UDP
  #       source: {}
  #     order: 100000
  #     selector: type=='sql'
  #     stagedAction: Set
  #     tier: admin
  #     types:
  #     - Ingress
  #     - Egress
  # kind: StagedNetworkPolicyList
  # metadata:
  #   resourceVersion: "723"
{'items': [{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '0fa34570-cbf9-4322-b6ef-a515af2db3c4', 'resourceVersion': '722', 'creationTimestamp': '2024-08-07T19:49:10Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'default', 'name': 'admin.name1'}}, {'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '40c1778f-7db9-4c8c-878b-0a0b986f959e', 'resourceVersion': '723', 'creationTimestamp': '2024-08-07T19:49:10Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'namespace2', 'name': 'admin.name2'}}], 'kind': 'StagedNetworkPolicyList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '723'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedNetworkPolicy -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: StagedNetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:10Z"
  #     labels:
  #       projectcalico.org/tier: admin
  #     name: admin.name1
  #     namespace: default
  #     resourceVersion: "722"
  #     uid: 0fa34570-cbf9-4322-b6ef-a515af2db3c4
  #   spec:
  #     egress:
  #     - action: Deny
  #       destination: {}
  #       protocol: TCP
  #       source: {}
  #     ingress:
  #     - action: Allow
  #       destination: {}
  #       protocol: UDP
  #       source: {}
  #     order: 100000
  #     selector: type=='sql'
  #     stagedAction: Set
  #     tier: admin
  #     types:
  #     - Ingress
  #     - Egress
  # kind: StagedNetworkPolicyList
  # metadata:
  #   resourceVersion: "723"
{'items': [{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '0fa34570-cbf9-4322-b6ef-a515af2db3c4', 'resourceVersion': '722', 'creationTimestamp': '2024-08-07T19:49:10Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'default', 'name': 'admin.name1'}}], 'kind': 'StagedNetworkPolicyList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '723'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedNetworkPolicy -o yaml -n namespace2
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: StagedNetworkPolicy
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:10Z"
  #     labels:
  #       projectcalico.org/tier: admin
  #     name: admin.name2
  #     namespace: namespace2
  #     resourceVersion: "723"
  #     uid: 40c1778f-7db9-4c8c-878b-0a0b986f959e
  #   spec:
  #     egress:
  #     - action: Deny
  #       destination: {}
  #       protocol: TCP
  #       source: {}
  #     ingress:
  #     - action: Allow
  #       destination: {}
  #       protocol: UDP
  #       source: {}
  #     order: 100000
  #     selector: type=='sql'
  #     stagedAction: Set
  #     tier: admin
  #     types:
  #     - Ingress
  #     - Egress
  # kind: StagedNetworkPolicyList
  # metadata:
  #   resourceVersion: "723"
{'items': [{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '40c1778f-7db9-4c8c-878b-0a0b986f959e', 'resourceVersion': '723', 'creationTimestamp': '2024-08-07T19:49:10Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'namespace2', 'name': 'admin.name2'}}], 'kind': 'StagedNetworkPolicyList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '723'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name1
  namespace: default
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:10Z"
  #   labels:
  #     projectcalico.org/tier: admin
  #   name: admin.name1
  #   namespace: default
  #   resourceVersion: "722"
  #   uid: 0fa34570-cbf9-4322-b6ef-a515af2db3c4
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   stagedAction: Set
  #   tier: admin
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '0fa34570-cbf9-4322-b6ef-a515af2db3c4', 'resourceVersion': '722', 'creationTimestamp': '2024-08-07T19:49:10Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'default', 'name': 'admin.name1'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name2
  namespace: namespace2
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:10Z"
  #   labels:
  #     projectcalico.org/tier: admin
  #   name: admin.name2
  #   namespace: namespace2
  #   resourceVersion: "723"
  #   uid: 40c1778f-7db9-4c8c-878b-0a0b986f959e
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   stagedAction: Set
  #   tier: admin
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '40c1778f-7db9-4c8c-878b-0a0b986f959e', 'resourceVersion': '723', 'creationTimestamp': '2024-08-07T19:49:10Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'namespace2', 'name': 'admin.name2'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name1
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:10Z"
  #   labels:
  #     projectcalico.org/tier: admin
  #   name: admin.name1
  #   namespace: default
  #   resourceVersion: "722"
  #   uid: 0fa34570-cbf9-4322-b6ef-a515af2db3c4
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   stagedAction: Set
  #   tier: admin
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '0fa34570-cbf9-4322-b6ef-a515af2db3c4', 'resourceVersion': '722', 'creationTimestamp': '2024-08-07T19:49:10Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'default', 'name': 'admin.name1'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name1
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -n namespace2 -f /tmp/input-data
  # Return code: 1
  # null
  # resource does not exist: StagedNetworkPolicy(namespace2/admin.name1) with error: <nil>
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name2
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -n namespace2 -f /tmp/input-data
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:10Z"
  #   labels:
  #     projectcalico.org/tier: admin
  #   name: admin.name2
  #   namespace: namespace2
  #   resourceVersion: "723"
  #   uid: 40c1778f-7db9-4c8c-878b-0a0b986f959e
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   stagedAction: Set
  #   tier: admin
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'tier': 'admin', 'order': 100000, 'types': ['Ingress', 'Egress'], 'selector': "type=='sql'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '40c1778f-7db9-4c8c-878b-0a0b986f959e', 'resourceVersion': '723', 'creationTimestamp': '2024-08-07T19:49:10Z', 'labels': {'projectcalico.org/tier': 'admin'}, 'namespace': 'namespace2', 'name': 'admin.name2'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name2
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get -o yaml -f /tmp/input-data
  # Return code: 1
  # null
  # resource does not exist: StagedNetworkPolicy(default/admin.name2) with error: <nil>
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete StagedNetworkPolicy admin.name1
  # Successfully deleted 1 'StagedNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete StagedNetworkPolicy admin.name2
  # Return code: 1
  # Failed to delete 'StagedNetworkPolicy' resource: resource does not exist: StagedNetworkPolicy(default/admin.name2) with error: <nil>
  # 
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  labels:
    projectcalico.org/tier: admin
  name: admin.name2
  namespace: namespace2
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'StagedNetworkPolicy' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Tier
metadata:
  name: admin
spec:
  Order: 1000

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'Tier' resource(s)
ok ([32m0.7329s[0m)
Test that the list of nets is shown in full if not too long [with data={'kind': 'GlobalNetworkSet', 'sp...metadata': {'name': 'net-set1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":131,"createdIndex":130},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":130,"createdIndex":130}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":132,"createdIndex":132}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalNetworkSet
metadata:
  name: net-set1
spec:
  allowedEgressDomains:
  - microsoft.com
  - www.microsoft.com
  nets:
  - 10.0.0.1
  - 11.0.0.0/16
  - feed:beef::1
  - dead:beef::96

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'GlobalNetworkSet' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkSet -o wide
  # NAME       NETS
  # net-set1   10.0.0.1,11.0.0.0/16,feed:beef::1,dead:beef::96
ok ([32m0.1824s[0m)
Test that the list of nets is shown in full if not too long [with data={'kind': 'NetworkSet', 'spec': {...metadata': {'name': 'net-set1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":133,"createdIndex":132},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":132,"createdIndex":132}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":134,"createdIndex":134}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkSet
metadata:
  name: net-set1
spec:
  nets:
  - 10.0.0.1
  - 11.0.0.0/16
  - feed:beef::1
  - dead:beef::96

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'NetworkSet' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkSet -o wide
  # NAME       NETS
  # net-set1   10.0.0.1,11.0.0.0/16,feed:beef::1,dead:beef::96
ok ([32m0.1814s[0m)
Test that the list of nets is truncated if it's too long [with data={'kind': 'GlobalNetworkSet', 'sp...metadata': {'name': 'net-set1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":135,"createdIndex":134},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":134,"createdIndex":134}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":136,"createdIndex":136}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalNetworkSet
metadata:
  name: net-set1
spec:
  nets:
  - 10.0.0.0/28
  - 10.0.1.0/28
  - 10.0.2.0/28
  - 10.0.3.0/28
  - 10.0.4.0/28
  - 10.0.5.0/28
  - 10.0.6.0/28
  - 10.0.7.0/28
  - 10.0.8.0/28
  - 10.0.9.0/28
  - 10.0.10.0/28
  - 10.0.11.0/28
  - 10.0.12.0/28
  - 10.0.13.0/28
  - 10.0.14.0/28
  - 10.0.15.0/28
  - 10.0.16.0/28
  - 10.0.17.0/28
  - 10.0.18.0/28
  - 10.0.19.0/28
  - 10.0.20.0/28
  - 10.0.21.0/28
  - 10.0.22.0/28
  - 10.0.23.0/28
  - 10.0.24.0/28
  - 10.0.25.0/28
  - 10.0.26.0/28
  - 10.0.27.0/28
  - 10.0.28.0/28
  - 10.0.29.0/28
  - 10.0.30.0/28
  - 10.0.31.0/28
  - 10.0.32.0/28
  - 10.0.33.0/28
  - 10.0.34.0/28
  - 10.0.35.0/28
  - 10.0.36.0/28
  - 10.0.37.0/28
  - 10.0.38.0/28
  - 10.0.39.0/28
  - 10.0.40.0/28
  - 10.0.41.0/28
  - 10.0.42.0/28
  - 10.0.43.0/28
  - 10.0.44.0/28
  - 10.0.45.0/28
  - 10.0.46.0/28
  - 10.0.47.0/28
  - 10.0.48.0/28
  - 10.0.49.0/28
  - 10.0.50.0/28
  - 10.0.51.0/28
  - 10.0.52.0/28
  - 10.0.53.0/28
  - 10.0.54.0/28
  - 10.0.55.0/28
  - 10.0.56.0/28
  - 10.0.57.0/28
  - 10.0.58.0/28
  - 10.0.59.0/28
  - 10.0.60.0/28
  - 10.0.61.0/28
  - 10.0.62.0/28
  - 10.0.63.0/28
  - 10.0.64.0/28
  - 10.0.65.0/28
  - 10.0.66.0/28
  - 10.0.67.0/28
  - 10.0.68.0/28
  - 10.0.69.0/28
  - 10.0.70.0/28
  - 10.0.71.0/28
  - 10.0.72.0/28
  - 10.0.73.0/28
  - 10.0.74.0/28
  - 10.0.75.0/28
  - 10.0.76.0/28
  - 10.0.77.0/28
  - 10.0.78.0/28
  - 10.0.79.0/28
  - 10.0.80.0/28
  - 10.0.81.0/28
  - 10.0.82.0/28
  - 10.0.83.0/28
  - 10.0.84.0/28
  - 10.0.85.0/28
  - 10.0.86.0/28
  - 10.0.87.0/28
  - 10.0.88.0/28
  - 10.0.89.0/28
  - 10.0.90.0/28
  - 10.0.91.0/28
  - 10.0.92.0/28
  - 10.0.93.0/28
  - 10.0.94.0/28
  - 10.0.95.0/28
  - 10.0.96.0/28
  - 10.0.97.0/28
  - 10.0.98.0/28
  - 10.0.99.0/28
  - 10.0.100.0/28
  - 10.0.101.0/28
  - 10.0.102.0/28
  - 10.0.103.0/28
  - 10.0.104.0/28
  - 10.0.105.0/28
  - 10.0.106.0/28
  - 10.0.107.0/28
  - 10.0.108.0/28
  - 10.0.109.0/28
  - 10.0.110.0/28
  - 10.0.111.0/28
  - 10.0.112.0/28
  - 10.0.113.0/28
  - 10.0.114.0/28
  - 10.0.115.0/28
  - 10.0.116.0/28
  - 10.0.117.0/28
  - 10.0.118.0/28
  - 10.0.119.0/28
  - 10.0.120.0/28
  - 10.0.121.0/28
  - 10.0.122.0/28
  - 10.0.123.0/28
  - 10.0.124.0/28
  - 10.0.125.0/28
  - 10.0.126.0/28
  - 10.0.127.0/28
  - 10.0.128.0/28
  - 10.0.129.0/28
  - 10.0.130.0/28
  - 10.0.131.0/28
  - 10.0.132.0/28
  - 10.0.133.0/28
  - 10.0.134.0/28
  - 10.0.135.0/28
  - 10.0.136.0/28
  - 10.0.137.0/28
  - 10.0.138.0/28
  - 10.0.139.0/28
  - 10.0.140.0/28
  - 10.0.141.0/28
  - 10.0.142.0/28
  - 10.0.143.0/28
  - 10.0.144.0/28
  - 10.0.145.0/28
  - 10.0.146.0/28
  - 10.0.147.0/28
  - 10.0.148.0/28
  - 10.0.149.0/28
  - 10.0.150.0/28
  - 10.0.151.0/28
  - 10.0.152.0/28
  - 10.0.153.0/28
  - 10.0.154.0/28
  - 10.0.155.0/28
  - 10.0.156.0/28
  - 10.0.157.0/28
  - 10.0.158.0/28
  - 10.0.159.0/28
  - 10.0.160.0/28
  - 10.0.161.0/28
  - 10.0.162.0/28
  - 10.0.163.0/28
  - 10.0.164.0/28
  - 10.0.165.0/28
  - 10.0.166.0/28
  - 10.0.167.0/28
  - 10.0.168.0/28
  - 10.0.169.0/28
  - 10.0.170.0/28
  - 10.0.171.0/28
  - 10.0.172.0/28
  - 10.0.173.0/28
  - 10.0.174.0/28
  - 10.0.175.0/28
  - 10.0.176.0/28
  - 10.0.177.0/28
  - 10.0.178.0/28
  - 10.0.179.0/28
  - 10.0.180.0/28
  - 10.0.181.0/28
  - 10.0.182.0/28
  - 10.0.183.0/28
  - 10.0.184.0/28
  - 10.0.185.0/28
  - 10.0.186.0/28
  - 10.0.187.0/28
  - 10.0.188.0/28
  - 10.0.189.0/28
  - 10.0.190.0/28
  - 10.0.191.0/28
  - 10.0.192.0/28
  - 10.0.193.0/28
  - 10.0.194.0/28
  - 10.0.195.0/28
  - 10.0.196.0/28
  - 10.0.197.0/28
  - 10.0.198.0/28
  - 10.0.199.0/28
  - 10.0.200.0/28
  - 10.0.201.0/28
  - 10.0.202.0/28
  - 10.0.203.0/28
  - 10.0.204.0/28
  - 10.0.205.0/28
  - 10.0.206.0/28
  - 10.0.207.0/28
  - 10.0.208.0/28
  - 10.0.209.0/28
  - 10.0.210.0/28
  - 10.0.211.0/28
  - 10.0.212.0/28
  - 10.0.213.0/28
  - 10.0.214.0/28
  - 10.0.215.0/28
  - 10.0.216.0/28
  - 10.0.217.0/28
  - 10.0.218.0/28
  - 10.0.219.0/28
  - 10.0.220.0/28
  - 10.0.221.0/28
  - 10.0.222.0/28... <truncated>
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'GlobalNetworkSet' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkSet -o wide
  # NAME       NETS
  # net-set1   10.0.0.0/28,10.0.1.0/28,10.0.2.0/28,10.0.3.0/28,10.0.4.0/28,10.0.5.0/28,10.0....
ok ([32m0.6939s[0m)
Test that the list of nets is truncated if it's too long [with data={'kind': 'NetworkSet', 'spec': {...mespace-1', 'name': 'net-set1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":137,"createdIndex":136},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":136,"createdIndex":136}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":138,"createdIndex":138}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkSet
metadata:
  name: net-set1
  namespace: namespace-1
spec:
  nets:
  - 10.0.0.0/28
  - 10.0.1.0/28
  - 10.0.2.0/28
  - 10.0.3.0/28
  - 10.0.4.0/28
  - 10.0.5.0/28
  - 10.0.6.0/28
  - 10.0.7.0/28
  - 10.0.8.0/28
  - 10.0.9.0/28
  - 10.0.10.0/28
  - 10.0.11.0/28
  - 10.0.12.0/28
  - 10.0.13.0/28
  - 10.0.14.0/28
  - 10.0.15.0/28
  - 10.0.16.0/28
  - 10.0.17.0/28
  - 10.0.18.0/28
  - 10.0.19.0/28
  - 10.0.20.0/28
  - 10.0.21.0/28
  - 10.0.22.0/28
  - 10.0.23.0/28
  - 10.0.24.0/28
  - 10.0.25.0/28
  - 10.0.26.0/28
  - 10.0.27.0/28
  - 10.0.28.0/28
  - 10.0.29.0/28
  - 10.0.30.0/28
  - 10.0.31.0/28
  - 10.0.32.0/28
  - 10.0.33.0/28
  - 10.0.34.0/28
  - 10.0.35.0/28
  - 10.0.36.0/28
  - 10.0.37.0/28
  - 10.0.38.0/28
  - 10.0.39.0/28
  - 10.0.40.0/28
  - 10.0.41.0/28
  - 10.0.42.0/28
  - 10.0.43.0/28
  - 10.0.44.0/28
  - 10.0.45.0/28
  - 10.0.46.0/28
  - 10.0.47.0/28
  - 10.0.48.0/28
  - 10.0.49.0/28
  - 10.0.50.0/28
  - 10.0.51.0/28
  - 10.0.52.0/28
  - 10.0.53.0/28
  - 10.0.54.0/28
  - 10.0.55.0/28
  - 10.0.56.0/28
  - 10.0.57.0/28
  - 10.0.58.0/28
  - 10.0.59.0/28
  - 10.0.60.0/28
  - 10.0.61.0/28
  - 10.0.62.0/28
  - 10.0.63.0/28
  - 10.0.64.0/28
  - 10.0.65.0/28
  - 10.0.66.0/28
  - 10.0.67.0/28
  - 10.0.68.0/28
  - 10.0.69.0/28
  - 10.0.70.0/28
  - 10.0.71.0/28
  - 10.0.72.0/28
  - 10.0.73.0/28
  - 10.0.74.0/28
  - 10.0.75.0/28
  - 10.0.76.0/28
  - 10.0.77.0/28
  - 10.0.78.0/28
  - 10.0.79.0/28
  - 10.0.80.0/28
  - 10.0.81.0/28
  - 10.0.82.0/28
  - 10.0.83.0/28
  - 10.0.84.0/28
  - 10.0.85.0/28
  - 10.0.86.0/28
  - 10.0.87.0/28
  - 10.0.88.0/28
  - 10.0.89.0/28
  - 10.0.90.0/28
  - 10.0.91.0/28
  - 10.0.92.0/28
  - 10.0.93.0/28
  - 10.0.94.0/28
  - 10.0.95.0/28
  - 10.0.96.0/28
  - 10.0.97.0/28
  - 10.0.98.0/28
  - 10.0.99.0/28
  - 10.0.100.0/28
  - 10.0.101.0/28
  - 10.0.102.0/28
  - 10.0.103.0/28
  - 10.0.104.0/28
  - 10.0.105.0/28
  - 10.0.106.0/28
  - 10.0.107.0/28
  - 10.0.108.0/28
  - 10.0.109.0/28
  - 10.0.110.0/28
  - 10.0.111.0/28
  - 10.0.112.0/28
  - 10.0.113.0/28
  - 10.0.114.0/28
  - 10.0.115.0/28
  - 10.0.116.0/28
  - 10.0.117.0/28
  - 10.0.118.0/28
  - 10.0.119.0/28
  - 10.0.120.0/28
  - 10.0.121.0/28
  - 10.0.122.0/28
  - 10.0.123.0/28
  - 10.0.124.0/28
  - 10.0.125.0/28
  - 10.0.126.0/28
  - 10.0.127.0/28
  - 10.0.128.0/28
  - 10.0.129.0/28
  - 10.0.130.0/28
  - 10.0.131.0/28
  - 10.0.132.0/28
  - 10.0.133.0/28
  - 10.0.134.0/28
  - 10.0.135.0/28
  - 10.0.136.0/28
  - 10.0.137.0/28
  - 10.0.138.0/28
  - 10.0.139.0/28
  - 10.0.140.0/28
  - 10.0.141.0/28
  - 10.0.142.0/28
  - 10.0.143.0/28
  - 10.0.144.0/28
  - 10.0.145.0/28
  - 10.0.146.0/28
  - 10.0.147.0/28
  - 10.0.148.0/28
  - 10.0.149.0/28
  - 10.0.150.0/28
  - 10.0.151.0/28
  - 10.0.152.0/28
  - 10.0.153.0/28
  - 10.0.154.0/28
  - 10.0.155.0/28
  - 10.0.156.0/28
  - 10.0.157.0/28
  - 10.0.158.0/28
  - 10.0.159.0/28
  - 10.0.160.0/28
  - 10.0.161.0/28
  - 10.0.162.0/28
  - 10.0.163.0/28
  - 10.0.164.0/28
  - 10.0.165.0/28
  - 10.0.166.0/28
  - 10.0.167.0/28
  - 10.0.168.0/28
  - 10.0.169.0/28
  - 10.0.170.0/28
  - 10.0.171.0/28
  - 10.0.172.0/28
  - 10.0.173.0/28
  - 10.0.174.0/28
  - 10.0.175.0/28
  - 10.0.176.0/28
  - 10.0.177.0/28
  - 10.0.178.0/28
  - 10.0.179.0/28
  - 10.0.180.0/28
  - 10.0.181.0/28
  - 10.0.182.0/28
  - 10.0.183.0/28
  - 10.0.184.0/28
  - 10.0.185.0/28
  - 10.0.186.0/28
  - 10.0.187.0/28
  - 10.0.188.0/28
  - 10.0.189.0/28
  - 10.0.190.0/28
  - 10.0.191.0/28
  - 10.0.192.0/28
  - 10.0.193.0/28
  - 10.0.194.0/28
  - 10.0.195.0/28
  - 10.0.196.0/28
  - 10.0.197.0/28
  - 10.0.198.0/28
  - 10.0.199.0/28
  - 10.0.200.0/28
  - 10.0.201.0/28
  - 10.0.202.0/28
  - 10.0.203.0/28
  - 10.0.204.0/28
  - 10.0.205.0/28
  - 10.0.206.0/28
  - 10.0.207.0/28
  - 10.0.208.0/28
  - 10.0.209.0/28
  - 10.0.210.0/28
  - 10.0.211.0/28
  - 10.0.212.0/28
  - 10.0.213.0/28
  - 10.0.214.0/28
  - 10.0.215.0/28
  - 10.0.216.0/28
  - 10.0.217.0/28
  - 10.0.218.0/28
  - 10.0.219.0/28
  - 10.0.220.0/28
  - 10.0.221.0/2... <truncated>
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'NetworkSet' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkSet -o wide -n namespace-1
  # NAMESPACE     NAME       NETS
  # namespace-1   net-set1   10.0.0.0/28,10.0.1.0/28,10.0.2.0/28,10.0.3.0/28,10.0.4.0/28,10.0.5.0/28,10.0....
ok ([32m0.6702s[0m)
Test that broken store configuration does not crash ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":139,"createdIndex":138},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":138,"createdIndex":138}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":140,"createdIndex":140}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Got local IP from MY_IP=172.16.129.8
/code/bin/calicoctl-linux-amd64 --allow-version-mismatch get policy
  # Return code: 1
  # Failed to create Calico API client: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable
  # 
Got local IP from MY_IP=172.16.129.8
/code/bin/calicoctl-linux-amd64 --allow-version-mismatch get policy x
  # Return code: 1
  # Failed to create Calico API client: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name2
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 123
  cidr: fed0:8001::/64
  ipipMode: Never
  nodeSelector: all()
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
/code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Return code: 1
  # Failed to create Calico API client: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: bgppeer-name-123abc
spec:
  asNumber: 64515
  node: node2
  peerIP: 192.168.0.251

Got local IP from MY_IP=172.16.129.8
/code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Return code: 1
  # Failed to create Calico API client: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: policy-mypolicy1
  namespace: default
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
/code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Return code: 1
  # Failed to create Calico API client: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  name: policy-mystagedpolicy1
  namespace: default
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
/code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Return code: 1
  # Failed to create Calico API client: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable
  # 
Got local IP from MY_IP=172.16.129.8
/code/bin/calicoctl-linux-amd64 --allow-version-mismatch label workloadendpoint node1-k8s-abcd-eth0 app=web --namespace=namespace1
  # Return code: 1
  # Failed to create Calico API client: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable
  # 
Got local IP from MY_IP=172.16.129.8
/code/bin/calicoctl-linux-amd64 --allow-version-mismatch ipam show
  # Return code: 1
  # invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable
  # 
ok ([32m0.3326s[0m)
Test namespace is handled as expected for each non-namespaced resource type [with data={'kind': 'IPPool', 'spec': {'blo...data': {'name': 'ippool-name1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":141,"createdIndex":140},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":140,"createdIndex":140}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":142,"createdIndex":142}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name1
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPPool
  # NAME           CIDR          SELECTOR
  # ippool-name1   10.0.1.0/24   foo == 'bar'
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPPool -o wide
  # NAME           CIDR          NAT     IPIPMODE   VXLANMODE   DISABLED   DISABLEBGPEXPORT   SELECTOR
  # ippool-name1   10.0.1.0/24   false   Always     Never       false      false              foo == 'bar'
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPPool ippool-name1 --namespace default -o yaml
  # Return code: 1
  # null
  # IPPool is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPPool --all-namespaces -o yaml
  # Return code: 1
  # null
  # IPPool is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPPool --all-namespaces -o yaml
  # Return code: 1
  # null
  # IPPool is not namespaced
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name1
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'IPPool' resource(s)
ok ([32m0.8430s[0m)
Test namespace is handled as expected for each non-namespaced resource type [with data={'kind': 'IPReservation', 'spec'...{'name': 'ipreservation-name1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":143,"createdIndex":142},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":142,"createdIndex":142}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":144,"createdIndex":144}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPReservation
metadata:
  name: ipreservation-name1
spec:
  reservedCIDRs:
  - 10.0.1.0/24
  - 11.0.0.1/32

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'IPReservation' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPReservation
  # NAME
  # ipreservation-name1
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPReservation -o wide
  # NAME                  CIDRS
  # ipreservation-name1   10.0.1.0/24,11.0.0.1/32
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPReservation ipreservation-name1 --namespace default -o yaml
  # Return code: 1
  # null
  # IPReservation is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPReservation --all-namespaces -o yaml
  # Return code: 1
  # null
  # IPReservation is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get IPReservation --all-namespaces -o yaml
  # Return code: 1
  # null
  # IPReservation is not namespaced
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPReservation
metadata:
  name: ipreservation-name1
spec:
  reservedCIDRs:
  - 10.0.1.0/24
  - 11.0.0.1/32

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'IPReservation' resource(s)
ok ([32m0.3354s[0m)
Test namespace is handled as expected for each non-namespaced resource type [with data={'kind': 'Tier', 'spec': {'Order..., 'metadata': {'name': 'admin'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":145,"createdIndex":144},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":144,"createdIndex":144}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":146,"createdIndex":146}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Tier
metadata:
  name: admin
spec:
  Order: 1000

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'Tier' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Tier
  # NAME      ORDER
  # admin     1000
  # default   <nil>
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Tier -o wide
  # NAME      ORDER
  # admin     1000
  # default   <nil>
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Tier admin --namespace default -o yaml
  # Return code: 1
  # null
  # Tier is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Tier --all-namespaces -o yaml
  # Return code: 1
  # null
  # Tier is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Tier --all-namespaces -o yaml
  # Return code: 1
  # null
  # Tier is not namespaced
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Tier
metadata:
  name: admin
spec:
  Order: 1000

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'Tier' resource(s)
ok ([32m0.3412s[0m)
Test namespace is handled as expected for each non-namespaced resource type [with data={'kind': 'UISettingsGroup', 'spe...tadata': {'name': 'ui-group-1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":147,"createdIndex":146},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":146,"createdIndex":146}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":148,"createdIndex":148}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: UISettingsGroup
metadata:
  name: ui-group-1
spec:
  description: This is a UI Settings Group

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'UISettingsGroup' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get UISettingsGroup
  # NAME
  # ui-group-1
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get UISettingsGroup -o wide
  # NAME         DESCR
  # ui-group-1   This is a UI Settings Group
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get UISettingsGroup ui-group-1 --namespace default -o yaml
  # Return code: 1
  # null
  # UISettingsGroup is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get UISettingsGroup --all-namespaces -o yaml
  # Return code: 1
  # null
  # UISettingsGroup is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get UISettingsGroup --all-namespaces -o yaml
  # Return code: 1
  # null
  # UISettingsGroup is not namespaced
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: UISettingsGroup
metadata:
  name: ui-group-1
spec:
  description: This is a UI Settings Group

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'UISettingsGroup' resource(s)
ok ([32m0.3156s[0m)
Test namespace is handled as expected for each non-namespaced resource type [with data={'kind': 'Profile', 'spec': {'in...bar'}, 'name': 'profile-name1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":149,"createdIndex":148},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":148,"createdIndex":148}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":150,"createdIndex":150}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Profile
metadata:
  labels:
    foo: bar
  name: profile-name1
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - '10:20'
      selector: type=='application'

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'Profile' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Profile
  # NAME
  # profile-name1
  # projectcalico-default-allow
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Profile -o wide
  # NAME                          LABELS
  # profile-name1
  # projectcalico-default-allow
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Profile profile-name1 --namespace default -o yaml
  # Return code: 1
  # null
  # Profile is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Profile --all-namespaces -o yaml
  # Return code: 1
  # null
  # Profile is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Profile --all-namespaces -o yaml
  # Return code: 1
  # null
  # Profile is not namespaced
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Profile
metadata:
  labels:
    foo: bar
  name: profile-name1
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - '10:20'
      selector: type=='application'

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'Profile' resource(s)
ok ([32m0.3237s[0m)
Test namespace is handled as expected for each non-namespaced resource type [with data={'kind': 'GlobalNetworkPolicy', ...e': 'default.policy-mypolicy1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":151,"createdIndex":150},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":150,"createdIndex":150}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":152,"createdIndex":152}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalNetworkPolicy
metadata:
  name: default.policy-mypolicy1
spec:
  egress:
  - action: Allow
    destination:
      domains:
      - microsoft.com
      - www.microsoft.com
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'GlobalNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkPolicy
  # NAME                       TIER
  # default.policy-mypolicy1   default
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkPolicy -o wide
  # NAME                       TIER      ORDER   SELECTOR
  # default.policy-mypolicy1   default   100     type=='database'
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkPolicy default.policy-mypolicy1 --namespace default -o yaml
  # Return code: 1
  # null
  # GlobalNetworkPolicy is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkPolicy --all-namespaces -o yaml
  # Return code: 1
  # null
  # GlobalNetworkPolicy is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkPolicy --all-namespaces -o yaml
  # Return code: 1
  # null
  # GlobalNetworkPolicy is not namespaced
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalNetworkPolicy
metadata:
  name: default.policy-mypolicy1
spec:
  egress:
  - action: Allow
    destination:
      domains:
      - microsoft.com
      - www.microsoft.com
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'GlobalNetworkPolicy' resource(s)
ok ([32m0.3335s[0m)
Test namespace is handled as expected for each non-namespaced resource type [with data={'kind': 'StagedGlobalNetworkPol...efault.policy-mystagedpolicy1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":153,"createdIndex":152},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":152,"createdIndex":152}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":154,"createdIndex":154}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedGlobalNetworkPolicy
metadata:
  name: default.policy-mystagedpolicy1
spec:
  egress:
  - action: Allow
    destination:
      domains:
      - microsoft.com
      - www.microsoft.com
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'StagedGlobalNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedGlobalNetworkPolicy
  # NAME                             TIER
  # default.policy-mystagedpolicy1   default
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedGlobalNetworkPolicy -o wide
  # NAME                             TIER      ORDER   SELECTOR
  # default.policy-mystagedpolicy1   default   100     type=='database'
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedGlobalNetworkPolicy default.policy-mystagedpolicy1 --namespace default -o yaml
  # Return code: 1
  # null
  # StagedGlobalNetworkPolicy is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedGlobalNetworkPolicy --all-namespaces -o yaml
  # Return code: 1
  # null
  # StagedGlobalNetworkPolicy is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedGlobalNetworkPolicy --all-namespaces -o yaml
  # Return code: 1
  # null
  # StagedGlobalNetworkPolicy is not namespaced
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedGlobalNetworkPolicy
metadata:
  name: default.policy-mystagedpolicy1
spec:
  egress:
  - action: Allow
    destination:
      domains:
      - microsoft.com
      - www.microsoft.com
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'StagedGlobalNetworkPolicy' resource(s)
ok ([32m0.3374s[0m)
Test namespace is handled as expected for each non-namespaced resource type [with data={'kind': 'GlobalNetworkSet', 'sp...metadata': {'name': 'net-set1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":155,"createdIndex":154},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":154,"createdIndex":154}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":156,"createdIndex":156}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalNetworkSet
metadata:
  name: net-set1
spec:
  allowedEgressDomains:
  - microsoft.com
  - www.microsoft.com
  nets:
  - 10.0.0.1
  - 11.0.0.0/16
  - feed:beef::1
  - dead:beef::96

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'GlobalNetworkSet' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkSet
  # NAME
  # net-set1
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkSet -o wide
  # NAME       NETS
  # net-set1   10.0.0.1,11.0.0.0/16,feed:beef::1,dead:beef::96
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkSet net-set1 --namespace default -o yaml
  # Return code: 1
  # null
  # GlobalNetworkSet is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkSet --all-namespaces -o yaml
  # Return code: 1
  # null
  # GlobalNetworkSet is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkSet --all-namespaces -o yaml
  # Return code: 1
  # null
  # GlobalNetworkSet is not namespaced
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalNetworkSet
metadata:
  name: net-set1
spec:
  allowedEgressDomains:
  - microsoft.com
  - www.microsoft.com
  nets:
  - 10.0.0.1
  - 11.0.0.0/16
  - feed:beef::1
  - dead:beef::96

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'GlobalNetworkSet' resource(s)
ok ([32m0.3276s[0m)
Test namespace is handled as expected for each non-namespaced resource type [with data={'kind': 'GlobalNetworkSet', 'sp...metadata': {'name': 'net-set1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":157,"createdIndex":156},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":156,"createdIndex":156}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":158,"createdIndex":158}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalNetworkSet
metadata:
  name: net-set1
spec:
  nets:
  - 10.0.0.0/28
  - 10.0.1.0/28
  - 10.0.2.0/28
  - 10.0.3.0/28
  - 10.0.4.0/28
  - 10.0.5.0/28
  - 10.0.6.0/28
  - 10.0.7.0/28
  - 10.0.8.0/28
  - 10.0.9.0/28
  - 10.0.10.0/28
  - 10.0.11.0/28
  - 10.0.12.0/28
  - 10.0.13.0/28
  - 10.0.14.0/28
  - 10.0.15.0/28
  - 10.0.16.0/28
  - 10.0.17.0/28
  - 10.0.18.0/28
  - 10.0.19.0/28
  - 10.0.20.0/28
  - 10.0.21.0/28
  - 10.0.22.0/28
  - 10.0.23.0/28
  - 10.0.24.0/28
  - 10.0.25.0/28
  - 10.0.26.0/28
  - 10.0.27.0/28
  - 10.0.28.0/28
  - 10.0.29.0/28
  - 10.0.30.0/28
  - 10.0.31.0/28
  - 10.0.32.0/28
  - 10.0.33.0/28
  - 10.0.34.0/28
  - 10.0.35.0/28
  - 10.0.36.0/28
  - 10.0.37.0/28
  - 10.0.38.0/28
  - 10.0.39.0/28
  - 10.0.40.0/28
  - 10.0.41.0/28
  - 10.0.42.0/28
  - 10.0.43.0/28
  - 10.0.44.0/28
  - 10.0.45.0/28
  - 10.0.46.0/28
  - 10.0.47.0/28
  - 10.0.48.0/28
  - 10.0.49.0/28
  - 10.0.50.0/28
  - 10.0.51.0/28
  - 10.0.52.0/28
  - 10.0.53.0/28
  - 10.0.54.0/28
  - 10.0.55.0/28
  - 10.0.56.0/28
  - 10.0.57.0/28
  - 10.0.58.0/28
  - 10.0.59.0/28
  - 10.0.60.0/28
  - 10.0.61.0/28
  - 10.0.62.0/28
  - 10.0.63.0/28
  - 10.0.64.0/28
  - 10.0.65.0/28
  - 10.0.66.0/28
  - 10.0.67.0/28
  - 10.0.68.0/28
  - 10.0.69.0/28
  - 10.0.70.0/28
  - 10.0.71.0/28
  - 10.0.72.0/28
  - 10.0.73.0/28
  - 10.0.74.0/28
  - 10.0.75.0/28
  - 10.0.76.0/28
  - 10.0.77.0/28
  - 10.0.78.0/28
  - 10.0.79.0/28
  - 10.0.80.0/28
  - 10.0.81.0/28
  - 10.0.82.0/28
  - 10.0.83.0/28
  - 10.0.84.0/28
  - 10.0.85.0/28
  - 10.0.86.0/28
  - 10.0.87.0/28
  - 10.0.88.0/28
  - 10.0.89.0/28
  - 10.0.90.0/28
  - 10.0.91.0/28
  - 10.0.92.0/28
  - 10.0.93.0/28
  - 10.0.94.0/28
  - 10.0.95.0/28
  - 10.0.96.0/28
  - 10.0.97.0/28
  - 10.0.98.0/28
  - 10.0.99.0/28
  - 10.0.100.0/28
  - 10.0.101.0/28
  - 10.0.102.0/28
  - 10.0.103.0/28
  - 10.0.104.0/28
  - 10.0.105.0/28
  - 10.0.106.0/28
  - 10.0.107.0/28
  - 10.0.108.0/28
  - 10.0.109.0/28
  - 10.0.110.0/28
  - 10.0.111.0/28
  - 10.0.112.0/28
  - 10.0.113.0/28
  - 10.0.114.0/28
  - 10.0.115.0/28
  - 10.0.116.0/28
  - 10.0.117.0/28
  - 10.0.118.0/28
  - 10.0.119.0/28
  - 10.0.120.0/28
  - 10.0.121.0/28
  - 10.0.122.0/28
  - 10.0.123.0/28
  - 10.0.124.0/28
  - 10.0.125.0/28
  - 10.0.126.0/28
  - 10.0.127.0/28
  - 10.0.128.0/28
  - 10.0.129.0/28
  - 10.0.130.0/28
  - 10.0.131.0/28
  - 10.0.132.0/28
  - 10.0.133.0/28
  - 10.0.134.0/28
  - 10.0.135.0/28
  - 10.0.136.0/28
  - 10.0.137.0/28
  - 10.0.138.0/28
  - 10.0.139.0/28
  - 10.0.140.0/28
  - 10.0.141.0/28
  - 10.0.142.0/28
  - 10.0.143.0/28
  - 10.0.144.0/28
  - 10.0.145.0/28
  - 10.0.146.0/28
  - 10.0.147.0/28
  - 10.0.148.0/28
  - 10.0.149.0/28
  - 10.0.150.0/28
  - 10.0.151.0/28
  - 10.0.152.0/28
  - 10.0.153.0/28
  - 10.0.154.0/28
  - 10.0.155.0/28
  - 10.0.156.0/28
  - 10.0.157.0/28
  - 10.0.158.0/28
  - 10.0.159.0/28
  - 10.0.160.0/28
  - 10.0.161.0/28
  - 10.0.162.0/28
  - 10.0.163.0/28
  - 10.0.164.0/28
  - 10.0.165.0/28
  - 10.0.166.0/28
  - 10.0.167.0/28
  - 10.0.168.0/28
  - 10.0.169.0/28
  - 10.0.170.0/28
  - 10.0.171.0/28
  - 10.0.172.0/28
  - 10.0.173.0/28
  - 10.0.174.0/28
  - 10.0.175.0/28
  - 10.0.176.0/28
  - 10.0.177.0/28
  - 10.0.178.0/28
  - 10.0.179.0/28
  - 10.0.180.0/28
  - 10.0.181.0/28
  - 10.0.182.0/28
  - 10.0.183.0/28
  - 10.0.184.0/28
  - 10.0.185.0/28
  - 10.0.186.0/28
  - 10.0.187.0/28
  - 10.0.188.0/28
  - 10.0.189.0/28
  - 10.0.190.0/28
  - 10.0.191.0/28
  - 10.0.192.0/28
  - 10.0.193.0/28
  - 10.0.194.0/28
  - 10.0.195.0/28
  - 10.0.196.0/28
  - 10.0.197.0/28
  - 10.0.198.0/28
  - 10.0.199.0/28
  - 10.0.200.0/28
  - 10.0.201.0/28
  - 10.0.202.0/28
  - 10.0.203.0/28
  - 10.0.204.0/28
  - 10.0.205.0/28
  - 10.0.206.0/28
  - 10.0.207.0/28
  - 10.0.208.0/28
  - 10.0.209.0/28
  - 10.0.210.0/28
  - 10.0.211.0/28
  - 10.0.212.0/28
  - 10.0.213.0/28
  - 10.0.214.0/28
  - 10.0.215.0/28
  - 10.0.216.0/28
  - 10.0.217.0/28
  - 10.0.218.0/28
  - 10.0.219.0/28
  - 10.0.220.0/28
  - 10.0.221.0/28
  - 10.0.222.0/28... <truncated>
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'GlobalNetworkSet' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkSet
  # NAME
  # net-set1
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkSet -o wide
  # NAME       NETS
  # net-set1   10.0.0.0/28,10.0.1.0/28,10.0.2.0/28,10.0.3.0/28,10.0.4.0/28,10.0.5.0/28,10.0....
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkSet net-set1 --namespace default -o yaml
  # Return code: 1
  # null
  # GlobalNetworkSet is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkSet --all-namespaces -o yaml
  # Return code: 1
  # null
  # GlobalNetworkSet is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkSet --all-namespaces -o yaml
  # Return code: 1
  # null
  # GlobalNetworkSet is not namespaced
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalNetworkSet
metadata:
  name: net-set1
spec:
  nets:
  - 10.0.0.0/28
  - 10.0.1.0/28
  - 10.0.2.0/28
  - 10.0.3.0/28
  - 10.0.4.0/28
  - 10.0.5.0/28
  - 10.0.6.0/28
  - 10.0.7.0/28
  - 10.0.8.0/28
  - 10.0.9.0/28
  - 10.0.10.0/28
  - 10.0.11.0/28
  - 10.0.12.0/28
  - 10.0.13.0/28
  - 10.0.14.0/28
  - 10.0.15.0/28
  - 10.0.16.0/28
  - 10.0.17.0/28
  - 10.0.18.0/28
  - 10.0.19.0/28
  - 10.0.20.0/28
  - 10.0.21.0/28
  - 10.0.22.0/28
  - 10.0.23.0/28
  - 10.0.24.0/28
  - 10.0.25.0/28
  - 10.0.26.0/28
  - 10.0.27.0/28
  - 10.0.28.0/28
  - 10.0.29.0/28
  - 10.0.30.0/28
  - 10.0.31.0/28
  - 10.0.32.0/28
  - 10.0.33.0/28
  - 10.0.34.0/28
  - 10.0.35.0/28
  - 10.0.36.0/28
  - 10.0.37.0/28
  - 10.0.38.0/28
  - 10.0.39.0/28
  - 10.0.40.0/28
  - 10.0.41.0/28
  - 10.0.42.0/28
  - 10.0.43.0/28
  - 10.0.44.0/28
  - 10.0.45.0/28
  - 10.0.46.0/28
  - 10.0.47.0/28
  - 10.0.48.0/28
  - 10.0.49.0/28
  - 10.0.50.0/28
  - 10.0.51.0/28
  - 10.0.52.0/28
  - 10.0.53.0/28
  - 10.0.54.0/28
  - 10.0.55.0/28
  - 10.0.56.0/28
  - 10.0.57.0/28
  - 10.0.58.0/28
  - 10.0.59.0/28
  - 10.0.60.0/28
  - 10.0.61.0/28
  - 10.0.62.0/28
  - 10.0.63.0/28
  - 10.0.64.0/28
  - 10.0.65.0/28
  - 10.0.66.0/28
  - 10.0.67.0/28
  - 10.0.68.0/28
  - 10.0.69.0/28
  - 10.0.70.0/28
  - 10.0.71.0/28
  - 10.0.72.0/28
  - 10.0.73.0/28
  - 10.0.74.0/28
  - 10.0.75.0/28
  - 10.0.76.0/28
  - 10.0.77.0/28
  - 10.0.78.0/28
  - 10.0.79.0/28
  - 10.0.80.0/28
  - 10.0.81.0/28
  - 10.0.82.0/28
  - 10.0.83.0/28
  - 10.0.84.0/28
  - 10.0.85.0/28
  - 10.0.86.0/28
  - 10.0.87.0/28
  - 10.0.88.0/28
  - 10.0.89.0/28
  - 10.0.90.0/28
  - 10.0.91.0/28
  - 10.0.92.0/28
  - 10.0.93.0/28
  - 10.0.94.0/28
  - 10.0.95.0/28
  - 10.0.96.0/28
  - 10.0.97.0/28
  - 10.0.98.0/28
  - 10.0.99.0/28
  - 10.0.100.0/28
  - 10.0.101.0/28
  - 10.0.102.0/28
  - 10.0.103.0/28
  - 10.0.104.0/28
  - 10.0.105.0/28
  - 10.0.106.0/28
  - 10.0.107.0/28
  - 10.0.108.0/28
  - 10.0.109.0/28
  - 10.0.110.0/28
  - 10.0.111.0/28
  - 10.0.112.0/28
  - 10.0.113.0/28
  - 10.0.114.0/28
  - 10.0.115.0/28
  - 10.0.116.0/28
  - 10.0.117.0/28
  - 10.0.118.0/28
  - 10.0.119.0/28
  - 10.0.120.0/28
  - 10.0.121.0/28
  - 10.0.122.0/28
  - 10.0.123.0/28
  - 10.0.124.0/28
  - 10.0.125.0/28
  - 10.0.126.0/28
  - 10.0.127.0/28
  - 10.0.128.0/28
  - 10.0.129.0/28
  - 10.0.130.0/28
  - 10.0.131.0/28
  - 10.0.132.0/28
  - 10.0.133.0/28
  - 10.0.134.0/28
  - 10.0.135.0/28
  - 10.0.136.0/28
  - 10.0.137.0/28
  - 10.0.138.0/28
  - 10.0.139.0/28
  - 10.0.140.0/28
  - 10.0.141.0/28
  - 10.0.142.0/28
  - 10.0.143.0/28
  - 10.0.144.0/28
  - 10.0.145.0/28
  - 10.0.146.0/28
  - 10.0.147.0/28
  - 10.0.148.0/28
  - 10.0.149.0/28
  - 10.0.150.0/28
  - 10.0.151.0/28
  - 10.0.152.0/28
  - 10.0.153.0/28
  - 10.0.154.0/28
  - 10.0.155.0/28
  - 10.0.156.0/28
  - 10.0.157.0/28
  - 10.0.158.0/28
  - 10.0.159.0/28
  - 10.0.160.0/28
  - 10.0.161.0/28
  - 10.0.162.0/28
  - 10.0.163.0/28
  - 10.0.164.0/28
  - 10.0.165.0/28
  - 10.0.166.0/28
  - 10.0.167.0/28
  - 10.0.168.0/28
  - 10.0.169.0/28
  - 10.0.170.0/28
  - 10.0.171.0/28
  - 10.0.172.0/28
  - 10.0.173.0/28
  - 10.0.174.0/28
  - 10.0.175.0/28
  - 10.0.176.0/28
  - 10.0.177.0/28
  - 10.0.178.0/28
  - 10.0.179.0/28
  - 10.0.180.0/28
  - 10.0.181.0/28
  - 10.0.182.0/28
  - 10.0.183.0/28
  - 10.0.184.0/28
  - 10.0.185.0/28
  - 10.0.186.0/28
  - 10.0.187.0/28
  - 10.0.188.0/28
  - 10.0.189.0/28
  - 10.0.190.0/28
  - 10.0.191.0/28
  - 10.0.192.0/28
  - 10.0.193.0/28
  - 10.0.194.0/28
  - 10.0.195.0/28
  - 10.0.196.0/28
  - 10.0.197.0/28
  - 10.0.198.0/28
  - 10.0.199.0/28
  - 10.0.200.0/28
  - 10.0.201.0/28
  - 10.0.202.0/28
  - 10.0.203.0/28
  - 10.0.204.0/28
  - 10.0.205.0/28
  - 10.0.206.0/28
  - 10.0.207.0/28
  - 10.0.208.0/28
  - 10.0.209.0/28
  - 10.0.210.0/28
  - 10.0.211.0/28
  - 10.0.212.0/28
  - 10.0.213.0/28
  - 10.0.214.0/28
  - 10.0.215.0/28
  - 10.0.216.0/28
  - 10.0.217.0/28
  - 10.0.218.0/28
  - 10.0.219.0/28
  - 10.0.220.0/28
  - 10.0.221.0/28
  - 10.0.222.0/28... <truncated>
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'GlobalNetworkSet' resource(s)
ok ([33m1.3075s[0m)
Test namespace is handled as expected for each non-namespaced resource type [with data={'kind': 'HostEndpoint', 'spec':...atabase'}, 'name': 'endpoint1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":159,"createdIndex":158},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":158,"createdIndex":158}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":160,"createdIndex":160}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: HostEndpoint
metadata:
  labels:
    type: database
  name: endpoint1
spec:
  interfaceName: eth0
  node: host1
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'HostEndpoint' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get HostEndpoint
  # NAME        NODE
  # endpoint1   host1
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get HostEndpoint -o wide
  # NAME        NODE    INTERFACE   IPS   PROFILES
  # endpoint1   host1   eth0              prof1,prof2
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get HostEndpoint endpoint1 --namespace default -o yaml
  # Return code: 1
  # null
  # HostEndpoint is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get HostEndpoint --all-namespaces -o yaml
  # Return code: 1
  # null
  # HostEndpoint is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get HostEndpoint --all-namespaces -o yaml
  # Return code: 1
  # null
  # HostEndpoint is not namespaced
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: HostEndpoint
metadata:
  labels:
    type: database
  name: endpoint1
spec:
  interfaceName: eth0
  node: host1
  profiles:
  - prof1
  - prof2

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'HostEndpoint' resource(s)
ok ([32m0.3336s[0m)
Test namespace is handled as expected for each non-namespaced resource type [with data={'kind': 'BGPPeer', 'spec': {'no...{'name': 'bgppeer-name-123abc'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":161,"createdIndex":160},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":160,"createdIndex":160}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":162,"createdIndex":162}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: bgppeer-name-123abc
spec:
  asNumber: 64514
  node: node1
  peerIP: 192.168.0.250

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'BGPPeer' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get BGPPeer
  # NAME                  PEERIP          NODE    ASN
  # bgppeer-name-123abc   192.168.0.250   node1   64514
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get BGPPeer -o wide
  # NAME                  PEERIP          NODE    ASN
  # bgppeer-name-123abc   192.168.0.250   node1   64514
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get BGPPeer bgppeer-name-123abc --namespace default -o yaml
  # Return code: 1
  # null
  # BGPPeer is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get BGPPeer --all-namespaces -o yaml
  # Return code: 1
  # null
  # BGPPeer is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get BGPPeer --all-namespaces -o yaml
  # Return code: 1
  # null
  # BGPPeer is not namespaced
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: BGPPeer
metadata:
  name: bgppeer-name-123abc
spec:
  asNumber: 64514
  node: node1
  peerIP: 192.168.0.250

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'BGPPeer' resource(s)
ok ([32m0.3302s[0m)
Test namespace is handled as expected for each non-namespaced resource type [with data={'kind': 'Node', 'spec': {'bgp':..., 'metadata': {'name': 'node1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":163,"createdIndex":162},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":162,"createdIndex":162}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":164,"createdIndex":164}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Node
metadata:
  name: node1
spec:
  bgp:
    ipv4Address: 1.2.3.4/24
    ipv6Address: aa:bb:cc::ff/120

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'Node' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Node
  # NAME
  # node1
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Node -o wide
  # NAME    ASN       IPV4         IPV6
  # node1   (64512)   1.2.3.4/24   aa:bb:cc::ff/120
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Node node1 --namespace default -o yaml
  # Return code: 1
  # null
  # Node is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Node --all-namespaces -o yaml
  # Return code: 1
  # null
  # Node is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get Node --all-namespaces -o yaml
  # Return code: 1
  # null
  # Node is not namespaced
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Node
metadata:
  name: node1
spec:
  bgp:
    ipv4Address: 1.2.3.4/24
    ipv6Address: aa:bb:cc::ff/120

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'Node' resource(s)
ok ([32m0.3323s[0m)
Test namespace is handled as expected for each non-namespaced resource type [with data={'kind': 'GlobalNetworkPolicy', ...a': {'name': 'admin.mypolicy2'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":165,"createdIndex":164},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":164,"createdIndex":164}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":166,"createdIndex":166}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Tier
metadata:
  name: admin
spec:
  Order: 1000

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'Tier' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalNetworkPolicy
metadata:
  name: admin.mypolicy2
spec:
  applyOnForward: true
  doNotTrack: true
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'GlobalNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkPolicy
  # NAME              TIER
  # admin.mypolicy2   admin
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkPolicy -o wide
  # NAME              TIER    ORDER    SELECTOR
  # admin.mypolicy2   admin   100000   type=='sql'
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkPolicy admin.mypolicy2 --namespace default -o yaml
  # Return code: 1
  # null
  # GlobalNetworkPolicy is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkPolicy --all-namespaces -o yaml
  # Return code: 1
  # null
  # GlobalNetworkPolicy is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkPolicy --all-namespaces -o yaml
  # Return code: 1
  # null
  # GlobalNetworkPolicy is not namespaced
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalNetworkPolicy
metadata:
  name: admin.mypolicy2
spec:
  applyOnForward: true
  doNotTrack: true
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'GlobalNetworkPolicy' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Tier
metadata:
  name: admin
spec:
  Order: 1000

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'Tier' resource(s)
ok ([32m0.3938s[0m)
Test namespace is handled as expected for each non-namespaced resource type [with data={'kind': 'StagedGlobalNetworkPol...name': 'admin.mystagedpolicy2'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":167,"createdIndex":166},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":166,"createdIndex":166}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":168,"createdIndex":168}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Tier
metadata:
  name: admin
spec:
  Order: 1000

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'Tier' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedGlobalNetworkPolicy
metadata:
  name: admin.mystagedpolicy2
spec:
  applyOnForward: true
  doNotTrack: true
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'StagedGlobalNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedGlobalNetworkPolicy
  # NAME                    TIER
  # admin.mystagedpolicy2   admin
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedGlobalNetworkPolicy -o wide
  # NAME                    TIER    ORDER    SELECTOR
  # admin.mystagedpolicy2   admin   100000   type=='sql'
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedGlobalNetworkPolicy admin.mystagedpolicy2 --namespace default -o yaml
  # Return code: 1
  # null
  # StagedGlobalNetworkPolicy is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedGlobalNetworkPolicy --all-namespaces -o yaml
  # Return code: 1
  # null
  # StagedGlobalNetworkPolicy is not namespaced
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedGlobalNetworkPolicy --all-namespaces -o yaml
  # Return code: 1
  # null
  # StagedGlobalNetworkPolicy is not namespaced
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedGlobalNetworkPolicy
metadata:
  name: admin.mystagedpolicy2
spec:
  applyOnForward: true
  doNotTrack: true
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: admin
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'StagedGlobalNetworkPolicy' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Tier
metadata:
  name: admin
spec:
  Order: 1000

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 1 'Tier' resource(s)
ok ([32m0.4063s[0m)
Test policy CRUD commands with calico (open source) style manifests [with data={'kind': 'GlobalNetworkPolicy', ...{'name': 'os-policy-mypolicy1'}}, is_namespaced=False]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":169,"createdIndex":168},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":168,"createdIndex":168}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":170,"createdIndex":170}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalNetworkPolicy
metadata:
  name: os-policy-mypolicy1
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'GlobalNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkPolicy os-policy-mypolicy1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: GlobalNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:19Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.os-policy-mypolicy1
  #   resourceVersion: "850"
  #   uid: 68fcc0d7-3ec1-4cc7-9362-69d35e1bf70d
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'GlobalNetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '850', 'labels': {'projectcalico.org/tier': 'default'}, 'creationTimestamp': '2024-08-07T19:49:19Z', 'uid': '68fcc0d7-3ec1-4cc7-9362-69d35e1bf70d', 'name': 'default.os-policy-mypolicy1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkPolicy default.os-policy-mypolicy1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: GlobalNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:19Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.os-policy-mypolicy1
  #   resourceVersion: "850"
  #   uid: 68fcc0d7-3ec1-4cc7-9362-69d35e1bf70d
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'GlobalNetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '850', 'labels': {'projectcalico.org/tier': 'default'}, 'creationTimestamp': '2024-08-07T19:49:19Z', 'uid': '68fcc0d7-3ec1-4cc7-9362-69d35e1bf70d', 'name': 'default.os-policy-mypolicy1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete GlobalNetworkPolicy os-policy-mypolicy1
  # Successfully deleted 1 'GlobalNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get GlobalNetworkPolicy os-policy-mypolicy1 -o yaml
  # Return code: 1
  # null
  # resource does not exist: GlobalNetworkPolicy(default.os-policy-mypolicy1) with error: <nil>
  # 
ok ([32m0.2919s[0m)
Test policy CRUD commands with calico (open source) style manifests [with data={'kind': 'StagedGlobalNetworkPol...': 'os-policy-mystagedpolicy1'}}, is_namespaced=False]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":171,"createdIndex":170},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":170,"createdIndex":170}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":172,"createdIndex":172}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedGlobalNetworkPolicy
metadata:
  name: os-policy-mystagedpolicy1
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'StagedGlobalNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedGlobalNetworkPolicy os-policy-mystagedpolicy1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: StagedGlobalNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:19Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.os-policy-mystagedpolicy1
  #   resourceVersion: "856"
  #   uid: d0b680a6-2f1a-48df-a4fc-f5ab65a9238e
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedGlobalNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '856', 'labels': {'projectcalico.org/tier': 'default'}, 'creationTimestamp': '2024-08-07T19:49:19Z', 'uid': 'd0b680a6-2f1a-48df-a4fc-f5ab65a9238e', 'name': 'default.os-policy-mystagedpolicy1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedGlobalNetworkPolicy default.os-policy-mystagedpolicy1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: StagedGlobalNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:19Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.os-policy-mystagedpolicy1
  #   resourceVersion: "856"
  #   uid: d0b680a6-2f1a-48df-a4fc-f5ab65a9238e
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedGlobalNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '856', 'labels': {'projectcalico.org/tier': 'default'}, 'creationTimestamp': '2024-08-07T19:49:19Z', 'uid': 'd0b680a6-2f1a-48df-a4fc-f5ab65a9238e', 'name': 'default.os-policy-mystagedpolicy1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete StagedGlobalNetworkPolicy os-policy-mystagedpolicy1
  # Successfully deleted 1 'StagedGlobalNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedGlobalNetworkPolicy os-policy-mystagedpolicy1 -o yaml
  # Return code: 1
  # null
  # resource does not exist: StagedGlobalNetworkPolicy(default.os-policy-mystagedpolicy1) with error: <nil>
  # 
ok ([32m0.2903s[0m)
Test policy CRUD commands with calico (open source) style manifests [with data={'kind': 'NetworkPolicy', 'spec'... 'name': 'os-policy-mypolicy1'}}, is_namespaced=True]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":173,"createdIndex":172},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":172,"createdIndex":172}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":174,"createdIndex":174}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: os-policy-mypolicy1
  namespace: default
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'NetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy os-policy-mypolicy1 --namespace default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:20Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.os-policy-mypolicy1
  #   namespace: default
  #   resourceVersion: "862"
  #   uid: 6f1aa5ee-09e5-48c8-b9f8-3618346b6321
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '6f1aa5ee-09e5-48c8-b9f8-3618346b6321', 'resourceVersion': '862', 'creationTimestamp': '2024-08-07T19:49:20Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'default', 'name': 'default.os-policy-mypolicy1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy default.os-policy-mypolicy1 --namespace default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:20Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.os-policy-mypolicy1
  #   namespace: default
  #   resourceVersion: "862"
  #   uid: 6f1aa5ee-09e5-48c8-b9f8-3618346b6321
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'NetworkPolicy', 'spec': {'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': '6f1aa5ee-09e5-48c8-b9f8-3618346b6321', 'resourceVersion': '862', 'creationTimestamp': '2024-08-07T19:49:20Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'default', 'name': 'default.os-policy-mypolicy1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete NetworkPolicy os-policy-mypolicy1 --namespace default
  # Successfully deleted 1 'NetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get NetworkPolicy os-policy-mypolicy1 --namespace default -o yaml
  # Return code: 1
  # null
  # resource does not exist: NetworkPolicy(default/default.os-policy-mypolicy1) with error: <nil>
  # 
ok ([32m0.2934s[0m)
Test policy CRUD commands with calico (open source) style manifests [with data={'kind': 'StagedNetworkPolicy', ... 'name': 'os-policy-mypolicy1'}}, is_namespaced=True]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":175,"createdIndex":174},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":174,"createdIndex":174}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":176,"createdIndex":176}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  name: os-policy-mypolicy1
  namespace: default
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'StagedNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedNetworkPolicy os-policy-mypolicy1 --namespace default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:20Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.os-policy-mypolicy1
  #   namespace: default
  #   resourceVersion: "869"
  #   uid: cf713be6-b87b-4662-8b83-41c7524ff4ac
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': 'cf713be6-b87b-4662-8b83-41c7524ff4ac', 'resourceVersion': '869', 'creationTimestamp': '2024-08-07T19:49:20Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'default', 'name': 'default.os-policy-mypolicy1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedNetworkPolicy default.os-policy-mypolicy1 --namespace default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:20Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.os-policy-mypolicy1
  #   namespace: default
  #   resourceVersion: "869"
  #   uid: cf713be6-b87b-4662-8b83-41c7524ff4ac
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedNetworkPolicy', 'spec': {'stagedAction': 'Set', 'ingress': [{'action': 'Deny', 'ipVersion': 4, 'destination': {'notNets': ['10.3.0.0/16'], 'notPorts': ['110:1050'], 'notSelector': "type=='apples'", 'nets': ['10.2.0.0/16'], 'ports': ['100:200'], 'selector': "type=='application'"}, 'protocol': 'TCP', 'source': {'notNets': ['10.1.0.0/16'], 'namespaceSelector': 'has(role)', 'notPorts': [1050], 'notSelector': "type=='database'", 'nets': ['10.0.0.0/16'], 'ports': [1234, '10:1024'], 'selector': "type=='application'"}}], 'egress': [{'action': 'Allow', 'source': {'selector': "type=='application'"}, 'destination': {}}], 'tier': 'default', 'order': 100, 'types': ['Ingress', 'Egress'], 'selector': "type=='database'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'uid': 'cf713be6-b87b-4662-8b83-41c7524ff4ac', 'resourceVersion': '869', 'creationTimestamp': '2024-08-07T19:49:20Z', 'labels': {'projectcalico.org/tier': 'default'}, 'namespace': 'default', 'name': 'default.os-policy-mypolicy1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete StagedNetworkPolicy os-policy-mypolicy1 --namespace default
  # Successfully deleted 1 'StagedNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get StagedNetworkPolicy os-policy-mypolicy1 --namespace default -o yaml
  # Return code: 1
  # null
  # resource does not exist: StagedNetworkPolicy(default/default.os-policy-mypolicy1) with error: <nil>
  # 
ok ([32m0.3052s[0m)
Test that a basic CRUD flow for patch command works. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":177,"createdIndex":176},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":176,"createdIndex":176}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":178,"createdIndex":178}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Node
metadata:
  name: node1
spec:
  bgp:
    ipv4Address: 1.2.3.4/24
    ipv6Address: aa:bb:cc::ff/120

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'Node' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch patch nodes node1 -p '{"spec":{"bgp": {"routeReflectorClusterID": "192.168.0.1"}}}'
  # Successfully patched 1 'Node' resource
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get nodes node1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: Node
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:20Z"
  #   name: node1
  #   resourceVersion: "876"
  #   uid: 3edbd3ce-34cd-48b8-8b51-fb2ffb3321be
  # spec:
  #   bgp:
  #     ipv4Address: 1.2.3.4/24
  #     ipv6Address: aa:bb:cc::ff/120
  #     routeReflectorClusterID: 192.168.0.1
  # status: {}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  annotations:
    test-annotation: annotation-1
  labels:
    test-label: label-1
  name: ippool-name1
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  disabled: true
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch patch ippool ippool-name1 -p '{"spec":{"natOutgoing": true}}'
  # Successfully patched 1 'IPPool' resource
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   annotations:
  #     test-annotation: annotation-1
  #   creationTimestamp: "2024-08-07T19:49:20Z"
  #   labels:
  #     test-label: label-1
  #   name: ippool-name1
  #   resourceVersion: "878"
  #   uid: 3326b6a6-f4f2-4454-8332-bf68f79cf0ea
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.0/24
  #   disabled: true
  #   ipipMode: Always
  #   natOutgoing: true
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  annotations:
    key: value
  creationTimestamp: '2006-01-02T15:04:05Z'
  deletionGracePeriodSeconds: 30
  deletionTimestamp: '2006-01-02T15:04:07Z'
  finalizers:
  - finalizer1
  - finalizer2
  generateName: test-policy-
  generation: 3
  labels:
    label1: l1
    label2: l2
  name: default.policy-mypolicy2
  namespace: default
  ownerReferences:
  - apiVersion: extensions/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: DaemonSet
    name: endpoint1
    uid: test-uid-change
  selfLink: test-self-link
  uid: test-uid-change
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'NetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch patch networkpolicy default.policy-mypolicy2 -p '{"http": {"exact": "path/to/match"}}'
  # Return code: 1
  # Hit error: creating resource from patched data: error parsing document: field in document is not recognized or is in the wrong location: http
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  annotations:
    key: value
  creationTimestamp: '2006-01-02T15:04:05Z'
  deletionGracePeriodSeconds: 30
  deletionTimestamp: '2006-01-02T15:04:07Z'
  finalizers:
  - finalizer1
  - finalizer2
  generateName: test-policy-
  generation: 3
  labels:
    label1: l1
    label2: l2
  name: default.policy-mystagedpolicy2
  namespace: default
  ownerReferences:
  - apiVersion: extensions/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: DaemonSet
    name: endpoint1
    uid: test-uid-change
  selfLink: test-self-link
  uid: test-uid-change
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'StagedNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch patch stagednetworkpolicy default.policy-mystagedpolicy2 -p '{"http": {"exact": "path/to/match"}}'
  # Return code: 1
  # Hit error: creating resource from patched data: error parsing document: field in document is not recognized or is in the wrong location: http
  # 
ok ([32m0.4578s[0m)
Test that we error if a resource is not know ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":179,"createdIndex":178},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":178,"createdIndex":178}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":180,"createdIndex":180}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get somekind somename
  # Return code: 1
  # Failed to get resources: resource type 'somekind' is not supported
  # 
ok ([32m0.1391s[0m)
Test CRUD commands behave as expected on the remoteclusterconfiguration resource: ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":181,"createdIndex":180},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":180,"createdIndex":180}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":182,"createdIndex":182}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: RemoteClusterConfiguration
metadata:
  name: rcc1
spec:
  datastoreType: kubernetes
  kubeconfig: yes- this is a valid path!

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'RemoteClusterConfiguration' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get rcc rcc1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: RemoteClusterConfiguration
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:21Z"
  #   name: rcc1
  #   resourceVersion: "889"
  #   uid: 603aaca2-bb99-4b6a-9d0d-810425534674
  # spec:
  #   datastoreType: kubernetes
  #   kubeconfig: yes- this is a valid path!
  #   syncOptions:
  #     overlayRoutingMode: Disabled
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: RemoteClusterConfiguration
metadata:
  name: rcc1
spec:
  datastoreType: kubernetes
  kubeconfig: /more/normal

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Successfully replaced 1 'RemoteClusterConfiguration' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get RemoteClusterConfiguration rcc1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: RemoteClusterConfiguration
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:21Z"
  #   name: rcc1
  #   resourceVersion: "890"
  #   uid: 603aaca2-bb99-4b6a-9d0d-810425534674
  # spec:
  #   datastoreType: kubernetes
  #   kubeconfig: /more/normal
  #   syncOptions:
  #     overlayRoutingMode: Disabled
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: RemoteClusterConfiguration
metadata:
  name: rcc1
spec:
  datastoreType: kubernetes
  kubeconfig: /etc/config/kubeconfig

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'RemoteClusterConfiguration' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get remoteclusterconfiguration rcc1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: RemoteClusterConfiguration
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:21Z"
  #   name: rcc1
  #   resourceVersion: "891"
  #   uid: 603aaca2-bb99-4b6a-9d0d-810425534674
  # spec:
  #   datastoreType: kubernetes
  #   kubeconfig: /etc/config/kubeconfig
  #   syncOptions:
  #     overlayRoutingMode: Disabled
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete rcc rcc1
  # Successfully deleted 1 'RemoteClusterConfiguration' resource(s)
ok ([32m0.3426s[0m)
Test that resource version operates correctly with update, i.e. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":183,"createdIndex":182},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":182,"createdIndex":182}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":184,"createdIndex":184}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: default.policy-mypolicy1
  namespace: default
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'NetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get networkpolicy default.policy-mypolicy1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:21Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.policy-mypolicy1
  #   namespace: default
  #   resourceVersion: "897"
  #   uid: eb5ad64f-d7d5-44a9-84bf-4bd1ab7882e5
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: policy-mypolicy1
  namespace: default
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Successfully replaced 1 'NetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get networkpolicy policy-mypolicy1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: NetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:21Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.policy-mypolicy1
  #   namespace: default
  #   resourceVersion: "898"
  #   uid: eb5ad64f-d7d5-44a9-84bf-4bd1ab7882e5
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  creationTimestamp: '2024-08-07T19:49:21Z'
  labels:
    projectcalico.org/tier: default
  name: default.policy-mypolicy1
  namespace: default
  resourceVersion: '897'
  uid: eb5ad64f-d7d5-44a9-84bf-4bd1ab7882e5
spec:
  egress:
  - action: Allow
    destination: {}
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Return code: 1
  # Partial success: replaced the first 1 out of 1 'NetworkPolicy' resources:
  # Hit error: update conflict: NetworkPolicy(default/default.policy-mypolicy1)
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  creationTimestamp: '2024-08-07T19:49:21Z'
  labels:
    projectcalico.org/tier: default
  name: default.policy-mypolicy1
  namespace: default
  resourceVersion: '898'
  uid: eb5ad64f-d7d5-44a9-84bf-4bd1ab7882e5
spec:
  egress:
  - action: Allow
    destination: {}
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Successfully replaced 1 'NetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete networkpolicy default.policy-mypolicy1
  # Successfully deleted 1 'NetworkPolicy' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: policy-mypolicy1
  namespace: default
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Return code: 1
  # Partial success: replaced the first 1 out of 1 'NetworkPolicy' resources:
  # Hit error: resource does not exist: NetworkPolicy(default/default.policy-mypolicy1) with error: <nil>
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  name: default.policy-mystagedpolicy1
  namespace: default
spec:
  egress:
  - action: Allow
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'StagedNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get stagednetworkpolicy default.policy-mystagedpolicy1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:21Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.policy-mystagedpolicy1
  #   namespace: default
  #   resourceVersion: "901"
  #   uid: 5226051b-2eaa-4c3c-9d7b-ee37c45f45dd
  # spec:
  #   egress:
  #   - action: Allow
  #     destination: {}
  #     source:
  #       selector: type=='application'
  #   ingress:
  #   - action: Deny
  #     destination:
  #       nets:
  #       - 10.2.0.0/16
  #       notNets:
  #       - 10.3.0.0/16
  #       notPorts:
  #       - 110:1050
  #       notSelector: type=='apples'
  #       ports:
  #       - 100:200
  #       selector: type=='application'
  #     ipVersion: 4
  #     protocol: TCP
  #     source:
  #       namespaceSelector: has(role)
  #       nets:
  #       - 10.0.0.0/16
  #       notNets:
  #       - 10.1.0.0/16
  #       notPorts:
  #       - 1050
  #       notSelector: type=='database'
  #       ports:
  #       - 1234
  #       - 10:1024
  #       selector: type=='application'
  #   order: 100
  #   selector: type=='database'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  name: policy-mystagedpolicy1
  namespace: default
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Successfully replaced 1 'StagedNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get stagednetworkpolicy policy-mystagedpolicy1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: StagedNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:21Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.policy-mystagedpolicy1
  #   namespace: default
  #   resourceVersion: "902"
  #   uid: 5226051b-2eaa-4c3c-9d7b-ee37c45f45dd
  # spec:
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  creationTimestamp: '2024-08-07T19:49:21Z'
  labels:
    projectcalico.org/tier: default
  name: default.policy-mystagedpolicy1
  namespace: default
  resourceVersion: '901'
  uid: 5226051b-2eaa-4c3c-9d7b-ee37c45f45dd
spec:
  egress:
  - action: Allow
    destination: {}
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Return code: 1
  # Partial success: replaced the first 1 out of 1 'StagedNetworkPolicy' resources:
  # Hit error: update conflict: StagedNetworkPolicy(default/default.policy-mystagedpolicy1)
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  creationTimestamp: '2024-08-07T19:49:21Z'
  labels:
    projectcalico.org/tier: default
  name: default.policy-mystagedpolicy1
  namespace: default
  resourceVersion: '902'
  uid: 5226051b-2eaa-4c3c-9d7b-ee37c45f45dd
spec:
  egress:
  - action: Allow
    destination: {}
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Successfully replaced 1 'StagedNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete stagednetworkpolicy default.policy-mystagedpolicy1
  # Successfully deleted 1 'StagedNetworkPolicy' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedNetworkPolicy
metadata:
  name: policy-mystagedpolicy1
  namespace: default
spec:
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Return code: 1
  # Partial success: replaced the first 1 out of 1 'StagedNetworkPolicy' resources:
  # Hit error: resource does not exist: StagedNetworkPolicy(default/default.policy-mystagedpolicy1) with error: <nil>
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedKubernetesNetworkPolicy
metadata:
  name: mystagedk8spolicy1
  namespace: default
spec:
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          project: test
      podSelector:
        matchLabels:
          role: frontend
    ports:
    - port: 6379
      protocol: TCP
  podSelector:
    matchLabels:
      role: db
  stagedAction: Set

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 1 'StagedKubernetesNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get stagedkubernetesnetworkpolicy mystagedk8spolicy1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: StagedKubernetesNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:22Z"
  #   name: mystagedk8spolicy1
  #   namespace: default
  #   resourceVersion: "905"
  #   uid: 47f8e116-6f98-46d7-9c91-4b30cf135fba
  # spec:
  #   ingress:
  #   - from:
  #     - namespaceSelector:
  #         matchLabels:
  #           project: test
  #       podSelector:
  #         matchLabels:
  #           role: frontend
  #     ports:
  #     - port: 6379
  #       protocol: TCP
  #   podSelector:
  #     matchLabels:
  #       role: db
  #   stagedAction: Set
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedKubernetesNetworkPolicy
metadata:
  name: mystagedk8spolicy1
  namespace: default
spec:
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          project: test
    ports:
    - port: 6379
      protocol: TCP
  podSelector:
    matchLabels:
      role: db
  stagedAction: Set

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Successfully replaced 1 'StagedKubernetesNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get stagedkubernetesnetworkpolicy mystagedk8spolicy1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: StagedKubernetesNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:22Z"
  #   name: mystagedk8spolicy1
  #   namespace: default
  #   resourceVersion: "906"
  #   uid: 47f8e116-6f98-46d7-9c91-4b30cf135fba
  # spec:
  #   ingress:
  #   - from:
  #     - namespaceSelector:
  #         matchLabels:
  #           project: test
  #     ports:
  #     - port: 6379
  #       protocol: TCP
  #   podSelector:
  #     matchLabels:
  #       role: db
  #   stagedAction: Set
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedKubernetesNetworkPolicy
metadata:
  creationTimestamp: '2024-08-07T19:49:22Z'
  name: mystagedk8spolicy1
  namespace: default
  resourceVersion: '905'
  uid: 47f8e116-6f98-46d7-9c91-4b30cf135fba
spec:
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          project: test
      podSelector:
        matchLabels:
          role: frontend
    ports:
    - port: 6379
      protocol: TCP
  podSelector:
    matchLabels:
      role: db
  stagedAction: Set

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Return code: 1
  # Partial success: replaced the first 1 out of 1 'StagedKubernetesNetworkPolicy' resources:
  # Hit error: update conflict: StagedKubernetesNetworkPolicy(default/mystagedk8spolicy1)
  # 
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedKubernetesNetworkPolicy
metadata:
  creationTimestamp: '2024-08-07T19:49:22Z'
  name: mystagedk8spolicy1
  namespace: default
  resourceVersion: '906'
  uid: 47f8e116-6f98-46d7-9c91-4b30cf135fba
spec:
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          project: test
      podSelector:
        matchLabels:
          role: frontend
    ports:
    - port: 6379
      protocol: TCP
  podSelector:
    matchLabels:
      role: db
  stagedAction: Set

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Successfully replaced 1 'StagedKubernetesNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete stagedkubernetesnetworkpolicy mystagedk8spolicy1
  # Successfully deleted 1 'StagedKubernetesNetworkPolicy' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedKubernetesNetworkPolicy
metadata:
  name: mystagedk8spolicy1
  namespace: default
spec:
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          project: test
    ports:
    - port: 6379
      protocol: TCP
  podSelector:
    matchLabels:
      role: db
  stagedAction: Set

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Return code: 1
  # Partial success: replaced the first 1 out of 1 'StagedKubernetesNetworkPolicy' resources:
  # Hit error: resource does not exist: StagedKubernetesNetworkPolicy(default/mystagedk8spolicy1) with error: <nil>
  # 
ok ([32m0.9803s[0m)
Test mainline CRUD operations using stdin input and output (mixing ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":185,"createdIndex":184},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":184,"createdIndex":184}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":186,"createdIndex":186}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
{
  "apiVersion": "projectcalico.org/v3",
  "kind": "GlobalNetworkPolicy",
  "metadata": {
    "name": "default.policy-mypolicy1"
  },
  "spec": {
    "egress": [
      {
        "action": "Allow",
        "destination": {
          "domains": [
            "microsoft.com",
            "www.microsoft.com"
          ]
        },
        "source": {
          "selector": "type=='application'"
        }
      }
    ],
    "ingress": [
      {
        "action": "Deny",
        "destination": {
          "nets": [
            "10.2.0.0/16"
          ],
          "notNets": [
            "10.3.0.0/16"
          ],
          "notPorts": [
            "110:1050"
          ],
          "notSelector": "type=='apples'",
          "ports": [
            "100:200"
          ],
          "selector": "type=='application'"
        },
        "ipVersion": 4,
        "protocol": "TCP",
        "source": {
          "namespaceSelector": "has(role)",
          "nets": [
            "10.0.0.0/16"
          ],
          "notNets": [
            "10.1.0.0/16"
          ],
          "notPorts": [
            1050
          ],
          "notSelector": "type=='database'",
          "ports": [
            1234,
            "10:1024"
          ],
          "selector": "type=='application'"
        }
      }
    ],
    "order": 100,
    "selector": "type=='database'",
    "tier": "default",
    "types": [
      "Ingress",
      "Egress"
    ]
  }
}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3; cat /tmp/input-data |  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f -
  # Successfully created 1 'GlobalNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get globalnetworkpolicy default.policy-mypolicy1 -o json
  # {
  #   "kind": "GlobalNetworkPolicy",
  #   "apiVersion": "projectcalico.org/v3",
  #   "metadata": {
  #     "name": "default.policy-mypolicy1",
  #     "uid": "1d94e83c-6611-4ac2-a1f2-6613d53861d7",
  #     "resourceVersion": "914",
  #     "creationTimestamp": "2024-08-07T19:49:22Z",
  #     "labels": {
  #       "projectcalico.org/tier": "default"
  #     }
  #   },
  #   "spec": {
  #     "tier": "default",
  #     "order": 100,
  #     "ingress": [
  #       {
  #         "action": "Deny",
  #         "ipVersion": 4,
  #         "protocol": "TCP",
  #         "source": {
  #           "nets": [
  #             "10.0.0.0/16"
  #           ],
  #           "selector": "type=='application'",
  #           "namespaceSelector": "has(role)",
  #           "ports": [
  #             1234,
  #             "10:1024"
  #           ],
  #           "notNets": [
  #             "10.1.0.0/16"
  #           ],
  #           "notSelector": "type=='database'",
  #           "notPorts": [
  #             1050
  #           ]
  #         },
  #         "destination": {
  #           "nets": [
  #             "10.2.0.0/16"
  #           ],
  #           "selector": "type=='application'",
  #           "ports": [
  #             "100:200"
  #           ],
  #           "notNets": [
  #             "10.3.0.0/16"
  #           ],
  #           "notSelector": "type=='apples'",
  #           "notPorts": [
  #             "110:1050"
  #           ]
  #         }
  #       }
  #     ],
  #     "egress": [
  #       {
  #         "action": "Allow",
  #         "source": {
  #           "selector": "type=='application'"
  #         },
  #         "destination": {
  #           "domains": [
  #             "microsoft.com",
  #             "www.microsoft.com"
  #           ]
  #         }
  #       }
  #     ],
  #     "selector": "type=='database'",
  #     "types": [
  #       "Ingress",
  #       "Egress"
  #     ]
  #   }
  # }
{u'kind': u'GlobalNetworkPolicy', u'spec': {u'ingress': [{u'action': u'Deny', u'ipVersion': 4, u'destination': {u'notNets': [u'10.3.0.0/16'], u'notSelector': u"type=='apples'", u'selector': u"type=='application'", u'notPorts': [u'110:1050'], u'nets': [u'10.2.0.0/16'], u'ports': [u'100:200']}, u'protocol': u'TCP', u'source': {u'notNets': [u'10.1.0.0/16'], u'notSelector': u"type=='database'", u'selector': u"type=='application'", u'namespaceSelector': u'has(role)', u'notPorts': [1050], u'nets': [u'10.0.0.0/16'], u'ports': [1234, u'10:1024']}}], u'selector': u"type=='database'", u'egress': [{u'action': u'Allow', u'source': {u'selector': u"type=='application'"}, u'destination': {u'domains': [u'microsoft.com', u'www.microsoft.com']}}], u'tier': u'default', u'order': 100, u'types': [u'Ingress', u'Egress']}, u'apiVersion': u'projectcalico.org/v3', u'metadata': {u'labels': {u'projectcalico.org/tier': u'default'}, u'resourceVersion': u'914', u'creationTimestamp': u'2024-08-07T19:49:22Z', u'name': u'default.policy-mypolicy1', u'uid': u'1d94e83c-6611-4ac2-a1f2-6613d53861d7'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalNetworkPolicy
metadata:
  name: default.policy-mypolicy1
spec:
  applyOnForward: true
  doNotTrack: true
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3; cat /tmp/input-data |  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f -
  # Successfully applied 1 'GlobalNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get globalnetworkpolicy default.policy-mypolicy1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: GlobalNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:22Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.policy-mypolicy1
  #   resourceVersion: "915"
  #   uid: 1d94e83c-6611-4ac2-a1f2-6613d53861d7
  # spec:
  #   applyOnForward: true
  #   doNotTrack: true
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'GlobalNetworkPolicy', 'spec': {'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'applyOnForward': True, 'selector': "type=='sql'", 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'doNotTrack': True, 'tier': 'default', 'order': 100000, 'types': ['Ingress', 'Egress']}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '915', 'labels': {'projectcalico.org/tier': 'default'}, 'creationTimestamp': '2024-08-07T19:49:22Z', 'uid': '1d94e83c-6611-4ac2-a1f2-6613d53861d7', 'name': 'default.policy-mypolicy1'}}
Writing /tmp/input-data: 
{
  "apiVersion": "projectcalico.org/v3",
  "kind": "GlobalNetworkPolicy",
  "metadata": {
    "name": "default.policy-mypolicy1"
  },
  "spec": {
    "egress": [
      {
        "action": "Allow",
        "destination": {
          "domains": [
            "microsoft.com",
            "www.microsoft.com"
          ]
        },
        "source": {
          "selector": "type=='application'"
        }
      }
    ],
    "ingress": [
      {
        "action": "Deny",
        "destination": {
          "nets": [
            "10.2.0.0/16"
          ],
          "notNets": [
            "10.3.0.0/16"
          ],
          "notPorts": [
            "110:1050"
          ],
          "notSelector": "type=='apples'",
          "ports": [
            "100:200"
          ],
          "selector": "type=='application'"
        },
        "ipVersion": 4,
        "protocol": "TCP",
        "source": {
          "namespaceSelector": "has(role)",
          "nets": [
            "10.0.0.0/16"
          ],
          "notNets": [
            "10.1.0.0/16"
          ],
          "notPorts": [
            1050
          ],
          "notSelector": "type=='database'",
          "ports": [
            1234,
            "10:1024"
          ],
          "selector": "type=='application'"
        }
      }
    ],
    "order": 100,
    "selector": "type=='database'",
    "tier": "default",
    "types": [
      "Ingress",
      "Egress"
    ]
  }
}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3; cat /tmp/input-data |  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f -
  # Successfully replaced 1 'GlobalNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get globalnetworkpolicy default.policy-mypolicy1 -o json
  # {
  #   "kind": "GlobalNetworkPolicy",
  #   "apiVersion": "projectcalico.org/v3",
  #   "metadata": {
  #     "name": "default.policy-mypolicy1",
  #     "uid": "1d94e83c-6611-4ac2-a1f2-6613d53861d7",
  #     "resourceVersion": "916",
  #     "creationTimestamp": "2024-08-07T19:49:22Z",
  #     "labels": {
  #       "projectcalico.org/tier": "default"
  #     }
  #   },
  #   "spec": {
  #     "tier": "default",
  #     "order": 100,
  #     "ingress": [
  #       {
  #         "action": "Deny",
  #         "ipVersion": 4,
  #         "protocol": "TCP",
  #         "source": {
  #           "nets": [
  #             "10.0.0.0/16"
  #           ],
  #           "selector": "type=='application'",
  #           "namespaceSelector": "has(role)",
  #           "ports": [
  #             1234,
  #             "10:1024"
  #           ],
  #           "notNets": [
  #             "10.1.0.0/16"
  #           ],
  #           "notSelector": "type=='database'",
  #           "notPorts": [
  #             1050
  #           ]
  #         },
  #         "destination": {
  #           "nets": [
  #             "10.2.0.0/16"
  #           ],
  #           "selector": "type=='application'",
  #           "ports": [
  #             "100:200"
  #           ],
  #           "notNets": [
  #             "10.3.0.0/16"
  #           ],
  #           "notSelector": "type=='apples'",
  #           "notPorts": [
  #             "110:1050"
  #           ]
  #         }
  #       }
  #     ],
  #     "egress": [
  #       {
  #         "action": "Allow",
  #         "source": {
  #           "selector": "type=='application'"
  #         },
  #         "destination": {
  #           "domains": [
  #             "microsoft.com",
  #             "www.microsoft.com"
  #           ]
  #         }
  #       }
  #     ],
  #     "selector": "type=='database'",
  #     "types": [
  #       "Ingress",
  #       "Egress"
  #     ]
  #   }
  # }
{u'kind': u'GlobalNetworkPolicy', u'spec': {u'ingress': [{u'action': u'Deny', u'ipVersion': 4, u'destination': {u'notNets': [u'10.3.0.0/16'], u'notSelector': u"type=='apples'", u'selector': u"type=='application'", u'notPorts': [u'110:1050'], u'nets': [u'10.2.0.0/16'], u'ports': [u'100:200']}, u'protocol': u'TCP', u'source': {u'notNets': [u'10.1.0.0/16'], u'notSelector': u"type=='database'", u'selector': u"type=='application'", u'namespaceSelector': u'has(role)', u'notPorts': [1050], u'nets': [u'10.0.0.0/16'], u'ports': [1234, u'10:1024']}}], u'selector': u"type=='database'", u'egress': [{u'action': u'Allow', u'source': {u'selector': u"type=='application'"}, u'destination': {u'domains': [u'microsoft.com', u'www.microsoft.com']}}], u'tier': u'default', u'order': 100, u'types': [u'Ingress', u'Egress']}, u'apiVersion': u'projectcalico.org/v3', u'metadata': {u'labels': {u'projectcalico.org/tier': u'default'}, u'resourceVersion': u'916', u'creationTimestamp': u'2024-08-07T19:49:22Z', u'name': u'default.policy-mypolicy1', u'uid': u'1d94e83c-6611-4ac2-a1f2-6613d53861d7'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: GlobalNetworkPolicy
metadata:
  name: default.policy-mypolicy1
spec:
  egress:
  - action: Allow
    destination:
      domains:
      - microsoft.com
      - www.microsoft.com
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3; cat /tmp/input-data |  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f -
  # Successfully deleted 1 'GlobalNetworkPolicy' resource(s)
Writing /tmp/input-data: 
{
  "apiVersion": "projectcalico.org/v3",
  "kind": "StagedGlobalNetworkPolicy",
  "metadata": {
    "name": "default.policy-mystagedpolicy1"
  },
  "spec": {
    "egress": [
      {
        "action": "Allow",
        "destination": {
          "domains": [
            "microsoft.com",
            "www.microsoft.com"
          ]
        },
        "source": {
          "selector": "type=='application'"
        }
      }
    ],
    "ingress": [
      {
        "action": "Deny",
        "destination": {
          "nets": [
            "10.2.0.0/16"
          ],
          "notNets": [
            "10.3.0.0/16"
          ],
          "notPorts": [
            "110:1050"
          ],
          "notSelector": "type=='apples'",
          "ports": [
            "100:200"
          ],
          "selector": "type=='application'"
        },
        "ipVersion": 4,
        "protocol": "TCP",
        "source": {
          "namespaceSelector": "has(role)",
          "nets": [
            "10.0.0.0/16"
          ],
          "notNets": [
            "10.1.0.0/16"
          ],
          "notPorts": [
            1050
          ],
          "notSelector": "type=='database'",
          "ports": [
            1234,
            "10:1024"
          ],
          "selector": "type=='application'"
        }
      }
    ],
    "order": 100,
    "selector": "type=='database'",
    "stagedAction": "Set",
    "tier": "default",
    "types": [
      "Ingress",
      "Egress"
    ]
  }
}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3; cat /tmp/input-data |  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f -
  # Successfully created 1 'StagedGlobalNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get stagedglobalnetworkpolicy default.policy-mystagedpolicy1 -o json
  # {
  #   "kind": "StagedGlobalNetworkPolicy",
  #   "apiVersion": "projectcalico.org/v3",
  #   "metadata": {
  #     "name": "default.policy-mystagedpolicy1",
  #     "uid": "a457a019-dd07-4c0c-9d9c-fd0f54111e4d",
  #     "resourceVersion": "918",
  #     "creationTimestamp": "2024-08-07T19:49:22Z",
  #     "labels": {
  #       "projectcalico.org/tier": "default"
  #     }
  #   },
  #   "spec": {
  #     "stagedAction": "Set",
  #     "tier": "default",
  #     "order": 100,
  #     "ingress": [
  #       {
  #         "action": "Deny",
  #         "ipVersion": 4,
  #         "protocol": "TCP",
  #         "source": {
  #           "nets": [
  #             "10.0.0.0/16"
  #           ],
  #           "selector": "type=='application'",
  #           "namespaceSelector": "has(role)",
  #           "ports": [
  #             1234,
  #             "10:1024"
  #           ],
  #           "notNets": [
  #             "10.1.0.0/16"
  #           ],
  #           "notSelector": "type=='database'",
  #           "notPorts": [
  #             1050
  #           ]
  #         },
  #         "destination": {
  #           "nets": [
  #             "10.2.0.0/16"
  #           ],
  #           "selector": "type=='application'",
  #           "ports": [
  #             "100:200"
  #           ],
  #           "notNets": [
  #             "10.3.0.0/16"
  #           ],
  #           "notSelector": "type=='apples'",
  #           "notPorts": [
  #             "110:1050"
  #           ]
  #         }
  #       }
  #     ],
  #     "egress": [
  #       {
  #         "action": "Allow",
  #         "source": {
  #           "selector": "type=='application'"
  #         },
  #         "destination": {
  #           "domains": [
  #             "microsoft.com",
  #             "www.microsoft.com"
  #           ]
  #         }
  #       }
  #     ],
  #     "selector": "type=='database'",
  #     "types": [
  #       "Ingress",
  #       "Egress"
  #     ]
  #   }
  # }
{u'kind': u'StagedGlobalNetworkPolicy', u'spec': {u'ingress': [{u'action': u'Deny', u'ipVersion': 4, u'destination': {u'notNets': [u'10.3.0.0/16'], u'notSelector': u"type=='apples'", u'selector': u"type=='application'", u'notPorts': [u'110:1050'], u'nets': [u'10.2.0.0/16'], u'ports': [u'100:200']}, u'protocol': u'TCP', u'source': {u'notNets': [u'10.1.0.0/16'], u'notSelector': u"type=='database'", u'selector': u"type=='application'", u'namespaceSelector': u'has(role)', u'notPorts': [1050], u'nets': [u'10.0.0.0/16'], u'ports': [1234, u'10:1024']}}], u'selector': u"type=='database'", u'stagedAction': u'Set', u'egress': [{u'action': u'Allow', u'source': {u'selector': u"type=='application'"}, u'destination': {u'domains': [u'microsoft.com', u'www.microsoft.com']}}], u'tier': u'default', u'order': 100, u'types': [u'Ingress', u'Egress']}, u'apiVersion': u'projectcalico.org/v3', u'metadata': {u'labels': {u'projectcalico.org/tier': u'default'}, u'resourceVersion': u'918', u'creationTimestamp': u'2024-08-07T19:49:22Z', u'name': u'default.policy-mystagedpolicy1', u'uid': u'a457a019-dd07-4c0c-9d9c-fd0f54111e4d'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedGlobalNetworkPolicy
metadata:
  name: default.policy-mystagedpolicy1
spec:
  applyOnForward: true
  doNotTrack: true
  egress:
  - action: Deny
    protocol: TCP
  ingress:
  - action: Allow
    protocol: UDP
  order: 100000
  selector: type=='sql'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3; cat /tmp/input-data |  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f -
  # Successfully applied 1 'StagedGlobalNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get stagedglobalnetworkpolicy default.policy-mystagedpolicy1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: StagedGlobalNetworkPolicy
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:22Z"
  #   labels:
  #     projectcalico.org/tier: default
  #   name: default.policy-mystagedpolicy1
  #   resourceVersion: "919"
  #   uid: a457a019-dd07-4c0c-9d9c-fd0f54111e4d
  # spec:
  #   applyOnForward: true
  #   doNotTrack: true
  #   egress:
  #   - action: Deny
  #     destination: {}
  #     protocol: TCP
  #     source: {}
  #   ingress:
  #   - action: Allow
  #     destination: {}
  #     protocol: UDP
  #     source: {}
  #   order: 100000
  #   selector: type=='sql'
  #   stagedAction: Set
  #   tier: default
  #   types:
  #   - Ingress
  #   - Egress
{'kind': 'StagedGlobalNetworkPolicy', 'spec': {'ingress': [{'action': 'Allow', 'source': {}, 'destination': {}, 'protocol': 'UDP'}], 'applyOnForward': True, 'selector': "type=='sql'", 'stagedAction': 'Set', 'egress': [{'action': 'Deny', 'source': {}, 'destination': {}, 'protocol': 'TCP'}], 'doNotTrack': True, 'tier': 'default', 'order': 100000, 'types': ['Ingress', 'Egress']}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '919', 'labels': {'projectcalico.org/tier': 'default'}, 'creationTimestamp': '2024-08-07T19:49:22Z', 'uid': 'a457a019-dd07-4c0c-9d9c-fd0f54111e4d', 'name': 'default.policy-mystagedpolicy1'}}
Writing /tmp/input-data: 
{
  "apiVersion": "projectcalico.org/v3",
  "kind": "StagedGlobalNetworkPolicy",
  "metadata": {
    "name": "default.policy-mystagedpolicy1"
  },
  "spec": {
    "egress": [
      {
        "action": "Allow",
        "destination": {
          "domains": [
            "microsoft.com",
            "www.microsoft.com"
          ]
        },
        "source": {
          "selector": "type=='application'"
        }
      }
    ],
    "ingress": [
      {
        "action": "Deny",
        "destination": {
          "nets": [
            "10.2.0.0/16"
          ],
          "notNets": [
            "10.3.0.0/16"
          ],
          "notPorts": [
            "110:1050"
          ],
          "notSelector": "type=='apples'",
          "ports": [
            "100:200"
          ],
          "selector": "type=='application'"
        },
        "ipVersion": 4,
        "protocol": "TCP",
        "source": {
          "namespaceSelector": "has(role)",
          "nets": [
            "10.0.0.0/16"
          ],
          "notNets": [
            "10.1.0.0/16"
          ],
          "notPorts": [
            1050
          ],
          "notSelector": "type=='database'",
          "ports": [
            1234,
            "10:1024"
          ],
          "selector": "type=='application'"
        }
      }
    ],
    "order": 100,
    "selector": "type=='database'",
    "stagedAction": "Set",
    "tier": "default",
    "types": [
      "Ingress",
      "Egress"
    ]
  }
}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3; cat /tmp/input-data |  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f -
  # Successfully replaced 1 'StagedGlobalNetworkPolicy' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get stagedglobalnetworkpolicy default.policy-mystagedpolicy1 -o json
  # {
  #   "kind": "StagedGlobalNetworkPolicy",
  #   "apiVersion": "projectcalico.org/v3",
  #   "metadata": {
  #     "name": "default.policy-mystagedpolicy1",
  #     "uid": "a457a019-dd07-4c0c-9d9c-fd0f54111e4d",
  #     "resourceVersion": "920",
  #     "creationTimestamp": "2024-08-07T19:49:22Z",
  #     "labels": {
  #       "projectcalico.org/tier": "default"
  #     }
  #   },
  #   "spec": {
  #     "stagedAction": "Set",
  #     "tier": "default",
  #     "order": 100,
  #     "ingress": [
  #       {
  #         "action": "Deny",
  #         "ipVersion": 4,
  #         "protocol": "TCP",
  #         "source": {
  #           "nets": [
  #             "10.0.0.0/16"
  #           ],
  #           "selector": "type=='application'",
  #           "namespaceSelector": "has(role)",
  #           "ports": [
  #             1234,
  #             "10:1024"
  #           ],
  #           "notNets": [
  #             "10.1.0.0/16"
  #           ],
  #           "notSelector": "type=='database'",
  #           "notPorts": [
  #             1050
  #           ]
  #         },
  #         "destination": {
  #           "nets": [
  #             "10.2.0.0/16"
  #           ],
  #           "selector": "type=='application'",
  #           "ports": [
  #             "100:200"
  #           ],
  #           "notNets": [
  #             "10.3.0.0/16"
  #           ],
  #           "notSelector": "type=='apples'",
  #           "notPorts": [
  #             "110:1050"
  #           ]
  #         }
  #       }
  #     ],
  #     "egress": [
  #       {
  #         "action": "Allow",
  #         "source": {
  #           "selector": "type=='application'"
  #         },
  #         "destination": {
  #           "domains": [
  #             "microsoft.com",
  #             "www.microsoft.com"
  #           ]
  #         }
  #       }
  #     ],
  #     "selector": "type=='database'",
  #     "types": [
  #       "Ingress",
  #       "Egress"
  #     ]
  #   }
  # }
{u'kind': u'StagedGlobalNetworkPolicy', u'spec': {u'ingress': [{u'action': u'Deny', u'ipVersion': 4, u'destination': {u'notNets': [u'10.3.0.0/16'], u'notSelector': u"type=='apples'", u'selector': u"type=='application'", u'notPorts': [u'110:1050'], u'nets': [u'10.2.0.0/16'], u'ports': [u'100:200']}, u'protocol': u'TCP', u'source': {u'notNets': [u'10.1.0.0/16'], u'notSelector': u"type=='database'", u'selector': u"type=='application'", u'namespaceSelector': u'has(role)', u'notPorts': [1050], u'nets': [u'10.0.0.0/16'], u'ports': [1234, u'10:1024']}}], u'selector': u"type=='database'", u'stagedAction': u'Set', u'egress': [{u'action': u'Allow', u'source': {u'selector': u"type=='application'"}, u'destination': {u'domains': [u'microsoft.com', u'www.microsoft.com']}}], u'tier': u'default', u'order': 100, u'types': [u'Ingress', u'Egress']}, u'apiVersion': u'projectcalico.org/v3', u'metadata': {u'labels': {u'projectcalico.org/tier': u'default'}, u'resourceVersion': u'920', u'creationTimestamp': u'2024-08-07T19:49:22Z', u'name': u'default.policy-mystagedpolicy1', u'uid': u'a457a019-dd07-4c0c-9d9c-fd0f54111e4d'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: StagedGlobalNetworkPolicy
metadata:
  name: default.policy-mystagedpolicy1
spec:
  egress:
  - action: Allow
    destination:
      domains:
      - microsoft.com
      - www.microsoft.com
    source:
      selector: type=='application'
  ingress:
  - action: Deny
    destination:
      nets:
      - 10.2.0.0/16
      notNets:
      - 10.3.0.0/16
      notPorts:
      - 110:1050
      notSelector: type=='apples'
      ports:
      - 100:200
      selector: type=='application'
    ipVersion: 4
    protocol: TCP
    source:
      namespaceSelector: has(role)
      nets:
      - 10.0.0.0/16
      notNets:
      - 10.1.0.0/16
      notPorts:
      - 1050
      notSelector: type=='database'
      ports:
      - 1234
      - 10:1024
      selector: type=='application'
  order: 100
  selector: type=='database'
  stagedAction: Set
  tier: default
  types:
  - Ingress
  - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3; cat /tmp/input-data |  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f -
  # Successfully deleted 1 'StagedGlobalNetworkPolicy' resource(s)
ok ([32m0.6166s[0m)
Test that the list output for a tier is ordered by ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":187,"createdIndex":186},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":186,"createdIndex":186}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":188,"createdIndex":188}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
- apiVersion: projectcalico.org/v3
  kind: Tier
  metadata:
    name: admin
  spec:
    Order: 1000
- apiVersion: projectcalico.org/v3
  kind: Tier
  metadata:
    name: before
  spec:
    Order: 100
- apiVersion: projectcalico.org/v3
  kind: GlobalNetworkPolicy
  metadata:
    name: default.policy-mypolicy1
  spec:
    egress:
    - action: Allow
      destination:
        domains:
        - microsoft.com
        - www.microsoft.com
      source:
        selector: type=='application'
    ingress:
    - action: Deny
      destination:
        nets:
        - 10.2.0.0/16
        notNets:
        - 10.3.0.0/16
        notPorts:
        - 110:1050
        notSelector: type=='apples'
        ports:
        - 100:200
        selector: type=='application'
      ipVersion: 4
      protocol: TCP
      source:
        namespaceSelector: has(role)
        nets:
        - 10.0.0.0/16
        notNets:
        - 10.1.0.0/16
        notPorts:
        - 1050
        notSelector: type=='database'
        ports:
        - 1234
        - 10:1024
        selector: type=='application'
    order: 100
    selector: type=='database'
    tier: default
    types:
    - Ingress
    - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # [WARNING] Your license does not support accessing this API. Please update your license to restore normal operations.
  # Contact Tigera support or email licensing@tigera.io
  # Successfully created 3 resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get tiers -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: Tier
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:23Z"
  #     name: before
  #     resourceVersion: "927"
  #     uid: 9e495144-0775-474d-b912-beba3e15fe7a
  #   spec:
  #     order: 100
  # - apiVersion: projectcalico.org/v3
  #   kind: Tier
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:23Z"
  #     name: admin
  #     resourceVersion: "926"
  #     uid: 016272fa-548f-45f6-89b7-feae11727e5d
  #   spec:
  #     order: 1000
  # - apiVersion: projectcalico.org/v3
  #   kind: Tier
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:23Z"
  #     name: default
  #     resourceVersion: "924"
  #     uid: 8cc2999b-9602-4ae9-bc12-34ade09451bb
  #   spec: {}
  # kind: TierList
  # metadata:
  #   resourceVersion: "928"
Writing /tmp/input-data: 
- apiVersion: projectcalico.org/v3
  kind: Tier
  metadata:
    name: admin
  spec:
    Order: 1000
- apiVersion: projectcalico.org/v3
  kind: Tier
  metadata:
    name: before
  spec:
    Order: 100
- apiVersion: projectcalico.org/v3
  kind: GlobalNetworkPolicy
  metadata:
    name: default.policy-mypolicy1
  spec:
    egress:
    - action: Allow
      destination:
        domains:
        - microsoft.com
        - www.microsoft.com
      source:
        selector: type=='application'
    ingress:
    - action: Deny
      destination:
        nets:
        - 10.2.0.0/16
        notNets:
        - 10.3.0.0/16
        notPorts:
        - 110:1050
        notSelector: type=='apples'
        ports:
        - 100:200
        selector: type=='application'
      ipVersion: 4
      protocol: TCP
      source:
        namespaceSelector: has(role)
        nets:
        - 10.0.0.0/16
        notNets:
        - 10.1.0.0/16
        notPorts:
        - 1050
        notSelector: type=='database'
        ports:
        - 1234
        - 10:1024
        selector: type=='application'
    order: 100
    selector: type=='database'
    tier: default
    types:
    - Ingress
    - Egress

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete -f /tmp/input-data
  # Successfully deleted 3 resource(s)
ok ([32m0.2355s[0m)
Test that we allow updates on resources on resource [with resource={'kind': 'PacketCapture', 'spec'...1', 'name': 'packet-capture-1'}}, update_cmd='replace', revision={'kind': 'PacketCapture', 'spec'...1', 'name': 'packet-capture-1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":189,"createdIndex":188},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":188,"createdIndex":188}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":190,"createdIndex":190}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: packet-capture-1
  namespace: namespace1
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'PacketCapture' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get PacketCapture packet-capture-1 --namespace namespace1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: PacketCapture
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:23Z"
  #   name: packet-capture-1
  #   namespace: namespace1
  #   resourceVersion: "936"
  #   uid: 131b8108-0900-4bbd-8c7d-ea722890f491
  # spec:
  #   selector: all()
  # status: {}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: packet-capture-1
  namespace: namespace1
spec:
  selector: capture == "true"

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch replace -f /tmp/input-data
  # Successfully replaced 1 'PacketCapture' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get PacketCapture packet-capture-1 --namespace namespace1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: PacketCapture
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:23Z"
  #   name: packet-capture-1
  #   namespace: namespace1
  #   resourceVersion: "937"
  #   uid: 131b8108-0900-4bbd-8c7d-ea722890f491
  # spec:
  #   selector: capture == "true"
  # status: {}
ok ([32m0.2441s[0m)
Test that we allow updates on resources on resource [with resource={'kind': 'PacketCapture', 'spec'...1', 'name': 'packet-capture-1'}}, update_cmd='apply', revision={'kind': 'PacketCapture', 'spec'...1', 'name': 'packet-capture-1'}}]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":191,"createdIndex":190},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":190,"createdIndex":190}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":192,"createdIndex":192}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: packet-capture-1
  namespace: namespace1
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'PacketCapture' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get PacketCapture packet-capture-1 --namespace namespace1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: PacketCapture
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:23Z"
  #   name: packet-capture-1
  #   namespace: namespace1
  #   resourceVersion: "942"
  #   uid: fba936a2-4eeb-4e48-abd4-4e9b4ad5b8d6
  # spec:
  #   selector: all()
  # status: {}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: packet-capture-1
  namespace: namespace1
spec:
  selector: capture == "true"

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch apply -f /tmp/input-data
  # Successfully applied 1 'PacketCapture' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get PacketCapture packet-capture-1 --namespace namespace1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: PacketCapture
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:23Z"
  #   name: packet-capture-1
  #   namespace: namespace1
  #   resourceVersion: "943"
  #   uid: fba936a2-4eeb-4e48-abd4-4e9b4ad5b8d6
  # spec:
  #   selector: capture == "true"
  # status: {}
ok ([32m0.2568s[0m)
Test that we allow updates on resources on resource [with resource={'kind': 'PacketCapture', 'spec'...1', 'name': 'packet-capture-1'}}, update_cmd='patch PacketCapture packet-capt...p \'{"spec":{"selector": ""}}\'', revision=None]. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":193,"createdIndex":192},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":192,"createdIndex":192}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":194,"createdIndex":194}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: LicenseKey
metadata:
  creationTimestamp: null
  name: default
spec:
  certificate: '-----BEGIN CERTIFICATE-----

    MIIFxjCCA66gAwIBAgIQVq3rz5D4nQF1fIgMEh71DzANBgkqhkiG9w0BAQsFADCB

    tTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh

    biBGcmFuY2lzY28xFDASBgNVBAoTC1RpZ2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1

    cml0eSA8c2lydEB0aWdlcmEuaW8+MT8wPQYDVQQDEzZUaWdlcmEgRW50aXRsZW1l

    bnRzIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMTgwNDA1

    MjEzMDI5WhcNMjAxMDA2MjEzMDI5WjCBnjELMAkGA1UEBhMCVVMxEzARBgNVBAgT

    CkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFDASBgNVBAoTC1Rp

    Z2VyYSwgSW5jMSIwIAYDVQQLDBlTZWN1cml0eSA8c2lydEB0aWdlcmEuaW8+MSgw

    JgYDVQQDEx9UaWdlcmEgRW50aXRsZW1lbnRzIENlcnRpZmljYXRlMIIBojANBgkq

    hkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAwg3LkeHTwMi651af/HEXi1tpM4K0LVqb

    5oUxX5b5jjgi+LHMPzMI6oU+NoGPHNqirhAQqK/k7W7r0oaMe1APWzaCAZpHiMxE

    MlsAXmLVUrKg/g+hgrqeije3JDQutnN9h5oZnsg1IneBArnE/AKIHH8XE79yMG49

    LaKpPGhpF8NoG2yoWFp2ekihSohvqKxa3m6pxoBVdwNxN0AfWxb60p2SF0lOi6B3

    hgK6+ILy08ZqXefiUs+GC1Af4qI1jRhPkjv3qv+H1aQVrq6BqKFXwWIlXCXF57CR

    hvUaTOG3fGtlVyiPE4+wi7QDo0cU/+Gx4mNzvmc6lRjz1c5yKxdYvgwXajSBx2pw

    kTP0iJxI64zv7u3BZEEII6ak9mgUU1CeGZ1KR2Xu80JiWHAYNOiUKCBYHNKDCUYl

    RBErYcAWz2mBpkKyP6hbH16GjXHTTdq5xENmRDHabpHw5o+21LkWBY25EaxjwcZa

    Y3qMIOllTZ2iRrXu7fSP6iDjtFCcE2bFAgMBAAGjZzBlMA4GA1UdDwEB/wQEAwIF

    oDATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4EFgQUIY7LzqNTzgyTBE5efHb5

    kZ71BUEwHwYDVR0jBBgwFoAUxZA5kifzo4NniQfGKb+4wruTIFowDQYJKoZIhvcN

    AQELBQADggIBAAK207LaqMrnphF6CFQnkMLbskSpDZsKfqqNB52poRvUrNVUOB1w

    3dSEaBUjhFgUU6yzF+xnuH84XVbjD7qlM3YbdiKvJS9jrm71saCKMNc+b9HSeQAU

    DGY7GPb7Y/LG0GKYawYJcPpvRCNnDLsSVn5N4J1foWAWnxuQ6k57ymWwcddibYHD

    OPakOvO4beAnvax3+K5dqF0bh2Np79YolKdIgUVzf4KSBRN4ZE3AOKlBfiKUvWy6

    nRGvu8O/8VaI0vGaOdXvWA5b61H0o5cm50A88tTm2LHxTXynE3AYriHxsWBbRpoM

    oFnmDaQtGY67S6xGfQbwxrwCFd1l7rGsyBQ17cuusOvMNZEEWraLY/738yWKw3qX

    U7KBxdPWPIPd6iDzVjcZrS8AehUEfNQ5yd26gDgW+rZYJoAFYv0vydMEyoI53xXs

    cpY84qV37ZC8wYicugidg9cFtD+1E0nVgOLXPkHnmc7lIDHFiWQKfOieH+KoVCbb

    zdFu3rhW31ygphRmgszkHwApllCTBBMOqMaBpS8eHCnetOITvyB4Kiu1/nKvVxhY

    exit11KQv8F3kTIUQRm0qw00TSBjuQHKoG83yfimlQ8OazciT+aLpVaY8SOrrNnL

    IJ8dHgTpF9WWHxx04DDzqrT7Xq99F9RzDzM7dSizGxIxonoWcBjiF6n5

    -----END CERTIFICATE-----


    '
  token: eyJhbGciOiJBMTI4R0NNS1ciLCJjdHkiOiJKV1QiLCJlbmMiOiJBMTI4R0NNIiwiaXYiOiJ5NGJMRWMyN3dKcUJLY2M3IiwidGFnIjoiaVdhMF9CVW1Dc0U4ZWJJRHFyd09PQSIsInR5cCI6IkpXVCJ9.ILJGDxXvL2UthoxX8xZZsw.VobpkFuuG8dDCRtd.kTVdyVdORLjT7siadsXSxDWS8NpL6qq_jnHhGVO_HBf7RQzSUNMFFuEzlOQxyXmr70ydfxJpPiYoY5QBhxYdehpNWSon3s7kxsedISe1TSmxQ8n9Q8QTO0YkzGt4B_SM_HloNUMSYjD3iUggUojXQHRKbotV4cqjo4chWvoleXXzFKmzYwfMmK8qJP5bOWhbC3bNid7lDUKWiLkRcDT5gDNjuatC0lUC9aYf3EorCxifwL34wMk6fs8Y1fWVtspIpKvL0_9c5CYKXLXkJEXCjerwtvAFGGzoXs6eEhv4uAVSTka8KBvQlSSRZdl-7W3iYXg9jfOCgg4gPvJpYEpc4bIgkyCPfr0Di7oP9csIktpgkietFDsAMDAvQm0rLf394dx8GmMIyGk9KT585hh6-QqpJYKq6-S0sGo0esuawvcH-3nPC5kDospGcZYclukcArPrdNBY6Mff5QDtKHaY82FCEHZHrXyaR4yDPnspmvRmAZjdJZ3GRFrKAbmiUt_julNQRfKbaG3M2WdLfUfehs2BSbHFUYB6QEP3tNIg1kCXpGExCvcHaJGrI705MkL1bY-LKHXTFHU0fXjOyPoCko9b6CvhRcWocTjIOW6UyVTLsJarZdGbDHhSuMVaq3-R0XoARKxu4XNT3_W2QK5Qa-YngPx0VWX05Gsl7lmrqGmC9xaGKn5fIrLw50G2gHl8F_G3TzW-zFNs5B3MBBMJJTm0JsIGIZLWKjRhDLs9jyeu_r2PtYcfQ9Dxei8TMlWSFGqKfWmxKR9Wq4nHKbRvHHXDLrIgJGSGQm6e4IOFz5Y24wgELefmXBB1Hq88r9gxvFEZ8vmLFDq8CaeMsirFAjsoW3FSPM-fEaGp8md3TZx3Z-h6Zg4qHsst3EbIuR2_m8-0wx6pOZV_Y8lkC5XORaEJ1c_Tk3tiXtYDwr7JSHVVJKMGPaX-pDNSior-k-V147CrZdtR8o8erSAKG3vzl5UB7dhM2u1mpW23imKbTxMPPF-VR1w1ksBb1jfF66b2MYURPTCDyhiCdwtPqYJ4HX6d4793U4ZmB6Q5nBReVg0BJihKoKpFwSZHx6v1.Lry8nPVTyrCEJV62mpp28A
status:
  expiry: null

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'LicenseKey' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: PacketCapture
metadata:
  name: packet-capture-1
  namespace: namespace1
spec:
  selector: all()

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'PacketCapture' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get PacketCapture packet-capture-1 --namespace namespace1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: PacketCapture
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:23Z"
  #   name: packet-capture-1
  #   namespace: namespace1
  #   resourceVersion: "948"
  #   uid: 90b51c39-19a9-4b76-98c8-dfe800087ec3
  # spec:
  #   selector: all()
  # status: {}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch patch PacketCapture packet-capture-1 --namespace namespace1 -p '{"spec":{"selector": ""}}'
  # Successfully patched 1 'PacketCapture' resource
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get PacketCapture packet-capture-1 --namespace namespace1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: PacketCapture
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:23Z"
  #   name: packet-capture-1
  #   namespace: namespace1
  #   resourceVersion: "949"
  #   uid: 90b51c39-19a9-4b76-98c8-dfe800087ec3
  # spec: {}
  # status: {}
ok ([32m0.2477s[0m)
Test bad flags unsuccessfully ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":195,"createdIndex":194},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":194,"createdIndex":194}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":196,"createdIndex":196}}

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch -m
  # Return code: 1
  # Usage:
  #   calicoctl [options] <command> [<args>...]
  # Invalid option: '--allow-version-mismatch -m'. Use flag '--help' to read about a specific subcommand.
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch --unknown-flag
  # Return code: 1
  # Usage:
  #   calicoctl [options] <command> [<args>...]
  # Invalid option: '--allow-version-mismatch --unknown-flag'. Use flag '--help' to read about a specific subcommand.
  # 
ok ([32m0.1218s[0m)
Test usage successfully ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":197,"createdIndex":196},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":196,"createdIndex":196}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":198,"createdIndex":198}}

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch -h
  # Usage:
  #   calicoctl [options] <command> [<args>...]
  # 
  #     create                   Create a resource by file, directory or stdin.
  #     replace                  Replace a resource by file, directory or stdin.
  #     apply                    Apply a resource by file, directory or stdin.  This creates a resource
  #                              if it does not exist, and replaces a resource if it does exists.
  #     patch                    Patch a preexisiting resource in place.
  #     delete                   Delete a resource identified by file, directory, stdin or resource type and
  #                              name.
  #     get                      Get a resource identified by file, directory, stdin or resource type and
  #                              name.
  #     label                    Add or update labels of resources.
  #     convert                  Convert config files between different API versions.
  #     ipam                     IP address management.
  #     node                     Calico node management.
  #     datastore                Calico datastore management.
  #     cluster                  Access cluster information.
  #     bgp                      Access BGP related information.
  #     captured-packets         Capture packet file command.
  #     version                  Display the version of this binary.
  # 
  # Options:
  #   -h --help                    Show this screen.
  #   -l --log-level=<level>       Set the log level (one of panic, fatal, error,
  #                                warn, info, debug) [default: panic]
  #      --context=<context>       The name of the kubeconfig context to use.
  #      --allow-version-mismatch  Allow client and cluster versions mismatch.
  # 
  # Description:
  #   The calicoctl command line tool is used to manage Calico network and security
  #   policy, to view and manage endpoint configuration, and to manage a Calico
  #   node instance.
  # 
  #   See 'calicoctl <command> --help' to read about a specific subcommand.
ok ([32m0.0998s[0m)
Test version mismatch verification ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":199,"createdIndex":198},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":198,"createdIndex":198}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":200,"createdIndex":200}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Node
metadata:
  name: node1
spec:
  bgp:
    ipv4Address: 1.2.3.4/24
    ipv6Address: aa:bb:cc::ff/120

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'Node' resource(s)
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Node
metadata:
  name: node1
spec:
  bgp:
    ipv4Address: 1.2.3.4/24
    ipv6Address: aa:bb:cc::ff/120

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 replace -f /tmp/input-data
  # Successfully replaced 1 'Node' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3; /code/tests/fv/helper/bin/calico_version_helper
  # time="2024-08-07T19:49:24Z" level=info msg="Config file: /etc/calico/calicoctl.cfg cannot be read - reading config from environment"
  # Calico version set to v3.20.0-2.0-calient-0.dev-780-g80d266a3ad2c-dirty
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Node
metadata:
  name: node1
spec:
  bgp:
    ipv4Address: 1.2.3.4/24
    ipv6Address: aa:bb:cc::ff/120

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 replace -f /tmp/input-data
  # Successfully replaced 1 'Node' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3; /code/tests/fv/helper/bin/calico_version_helper -v v0.0.0.1.2.3
  # time="2024-08-07T19:49:24Z" level=info msg="Config file: /etc/calico/calicoctl.cfg cannot be read - reading config from environment"
  # Calico version set to v0.0.0.1.2.3
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Node
metadata:
  name: node1
spec:
  bgp:
    ipv4Address: 1.2.3.4/24
    ipv6Address: aa:bb:cc::ff/120

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 replace -f /tmp/input-data
  # Return code: 1
  # Version mismatch.
  # Client Version:   v3.20.0-2.0-calient-0.dev-780-g80d266a3ad2c-dirty
  # Cluster Version:  0.0.0.1.2.3
  # Use --allow-version-mismatch to override.
  # 
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 bgp peers peer-name
  # Return code: 1
  # Version mismatch.
  # Client Version:   v3.20.0-2.0-calient-0.dev-780-g80d266a3ad2c-dirty
  # Cluster Version:  0.0.0.1.2.3
  # Use --allow-version-mismatch to override.
  # 
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch bgp peers peer-name
  # Return code: 1
  # missing dependency: unable to locate kubectl in PATH
  # 
ok ([32m0.3202s[0m)
Test that splitting IP pools works properly by CIDR ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":201,"createdIndex":200},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":200,"createdIndex":200}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":202,"createdIndex":202}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name1
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:24Z"
  #   name: ippool-name1
  #   resourceVersion: "962"
  #   uid: f93f639c-3425-4038-ba49-770e28f7dcc9
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.0/24
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'vxlanMode': 'Never', 'blockSize': 27, 'cidr': '10.0.1.0/24', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': "foo == 'bar'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '962', 'creationTimestamp': '2024-08-07T19:49:24Z', 'uid': 'f93f639c-3425-4038-ba49-770e28f7dcc9', 'name': 'ippool-name1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: IPPool
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:24Z"
  #     name: ippool-name1
  #     resourceVersion: "962"
  #     uid: f93f639c-3425-4038-ba49-770e28f7dcc9
  #   spec:
  #     allowedUses:
  #     - Workload
  #     - Tunnel
  #     blockSize: 27
  #     cidr: 10.0.1.0/24
  #     ipipMode: Always
  #     nodeSelector: foo == 'bar'
  #     vxlanMode: Never
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "962"
{'items': [{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'vxlanMode': 'Never', 'blockSize': 27, 'cidr': '10.0.1.0/24', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': "foo == 'bar'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '962', 'creationTimestamp': '2024-08-07T19:49:24Z', 'uid': 'f93f639c-3425-4038-ba49-770e28f7dcc9', 'name': 'ippool-name1'}}], 'kind': 'IPPoolList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '962'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Node
metadata:
  name: node4
spec:
  bgp:
    ipv4Address: 1.2.3.4/24
    ipv6Address: aa:bb:cc::ff/120
  orchRefs:
  - nodeName: node4
    orchestrator: k8s

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'Node' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get node node4 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: Node
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:24Z"
  #   name: node4
  #   resourceVersion: "963"
  #   uid: 548b8ded-8da2-4a43-aa94-648e15806e81
  # spec:
  #   bgp:
  #     ipv4Address: 1.2.3.4/24
  #     ipv6Address: aa:bb:cc::ff/120
  #   orchRefs:
  #   - nodeName: node4
  #     orchestrator: k8s
  # status: {}
{'status': {}, 'kind': 'Node', 'spec': {'bgp': {'ipv4Address': '1.2.3.4/24', 'ipv6Address': 'aa:bb:cc::ff/120'}, 'orchRefs': [{'orchestrator': 'k8s', 'nodeName': 'node4'}]}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '963', 'creationTimestamp': '2024-08-07T19:49:24Z', 'uid': '548b8ded-8da2-4a43-aa94-648e15806e81', 'name': 'node4'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get clusterinfo default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: ClusterInformation
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:24Z"
  #   name: default
  #   resourceVersion: "960"
  #   uid: 110bc90f-47cf-4a08-a3a6-df50b4d58c35
  # spec:
  #   clusterGUID: 3c11c51e53fe4fd78367ca5cf17165c2
  #   datastoreReady: true
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch ipam split --cidr=10.0.1.0/24 4
  # Return code: 1
  # Datastore is not locked. Run the `calicoctl datastore migrate lock` command in order split the IP pools.
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch datastore migrate lock
  # Datastore locked.
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch ipam split --cidr=10.0.2.0/24 4
  # Return code: 1
  # Unable to find IP pool  covering the specified CIDR 10.0.2.0/24
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch ipam split --cidr=10.0.1.0/24 3
  # Return code: 1
  # Error splitting the CIDR 10.0.1.0/24 into 3 CIDRs: Number to split CIDR into is not a valid power of 2: 3
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch ipam split --cidr=10.0.1.0/24 512
  # Return code: 1
  # Error splitting the CIDR 10.0.1.0/24 into 512 CIDRs: The CIDR 10.0.1.0/24 is not large enough to be split into 512 parts
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch ipam split --cidr=10.0.1.0/24 4
  # IP Pool ippool-name1 was successfully split into 4 smaller pools.Created split-ippool-name1-0 with CIDR 10.0.1.0/26.
  # Created split-ippool-name1-1 with CIDR 10.0.1.64/26.
  # Created split-ippool-name1-2 with CIDR 10.0.1.128/26.
  # Created split-ippool-name1-3 with CIDR 10.0.1.192/26.
  # Please refer to the documentation for final steps.
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1 -o yaml
  # Return code: 1
  # null
  # resource does not exist: IPPool(ippool-name1) with error: <nil>
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool split-ippool-name1-0 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:24Z"
  #   name: split-ippool-name1-0
  #   resourceVersion: "968"
  #   uid: 3a54b768-4c2f-4cc8-93ad-7f8c2e3373b0
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.0/26
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'vxlanMode': 'Never', 'blockSize': 27, 'cidr': '10.0.1.0/26', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': "foo == 'bar'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '968', 'creationTimestamp': '2024-08-07T19:49:24Z', 'uid': '3a54b768-4c2f-4cc8-93ad-7f8c2e3373b0', 'name': 'split-ippool-name1-0'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool split-ippool-name1-1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:24Z"
  #   name: split-ippool-name1-1
  #   resourceVersion: "969"
  #   uid: d906a878-b978-4d91-be08-4022c107d59e
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.64/26
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'vxlanMode': 'Never', 'blockSize': 27, 'cidr': '10.0.1.64/26', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': "foo == 'bar'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '969', 'creationTimestamp': '2024-08-07T19:49:24Z', 'uid': 'd906a878-b978-4d91-be08-4022c107d59e', 'name': 'split-ippool-name1-1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool split-ippool-name1-2 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:24Z"
  #   name: split-ippool-name1-2
  #   resourceVersion: "970"
  #   uid: 21f02724-d3e5-41bd-a9d6-ff19e8b3806d
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.128/26
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'vxlanMode': 'Never', 'blockSize': 27, 'cidr': '10.0.1.128/26', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': "foo == 'bar'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '970', 'creationTimestamp': '2024-08-07T19:49:24Z', 'uid': '21f02724-d3e5-41bd-a9d6-ff19e8b3806d', 'name': 'split-ippool-name1-2'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool split-ippool-name1-3 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:24Z"
  #   name: split-ippool-name1-3
  #   resourceVersion: "971"
  #   uid: 56d44cd5-8204-459c-8100-6ebbdd38cd9e
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.192/26
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'vxlanMode': 'Never', 'blockSize': 27, 'cidr': '10.0.1.192/26', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': "foo == 'bar'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '971', 'creationTimestamp': '2024-08-07T19:49:24Z', 'uid': '56d44cd5-8204-459c-8100-6ebbdd38cd9e', 'name': 'split-ippool-name1-3'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch datastore migrate unlock
  # Datastore unlocked.
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool split-ippool-name1-0
  # Successfully deleted 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool split-ippool-name1-1
  # Successfully deleted 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool split-ippool-name1-2
  # Successfully deleted 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool split-ippool-name1-3
  # Successfully deleted 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete node node4
  # Successfully deleted 1 'Node' resource(s)
ok ([33m2.8678s[0m)
Test that splitting IP pools works properly by IP pool name ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":203,"createdIndex":202},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":202,"createdIndex":202}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":204,"createdIndex":204}}

Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: IPPool
metadata:
  name: ippool-name1
spec:
  allowedUses:
  - Workload
  - Tunnel
  blockSize: 27
  cidr: 10.0.1.0/24
  ipipMode: Always
  nodeSelector: foo == 'bar'
  vxlanMode: Never

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:27Z"
  #   name: ippool-name1
  #   resourceVersion: "989"
  #   uid: 7c579e2b-e8ce-466d-8236-b6ee23165e11
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.0/24
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'vxlanMode': 'Never', 'blockSize': 27, 'cidr': '10.0.1.0/24', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': "foo == 'bar'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '989', 'creationTimestamp': '2024-08-07T19:49:27Z', 'uid': '7c579e2b-e8ce-466d-8236-b6ee23165e11', 'name': 'ippool-name1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool -o yaml
  # apiVersion: projectcalico.org/v3
  # items:
  # - apiVersion: projectcalico.org/v3
  #   kind: IPPool
  #   metadata:
  #     creationTimestamp: "2024-08-07T19:49:27Z"
  #     name: ippool-name1
  #     resourceVersion: "989"
  #     uid: 7c579e2b-e8ce-466d-8236-b6ee23165e11
  #   spec:
  #     allowedUses:
  #     - Workload
  #     - Tunnel
  #     blockSize: 27
  #     cidr: 10.0.1.0/24
  #     ipipMode: Always
  #     nodeSelector: foo == 'bar'
  #     vxlanMode: Never
  # kind: IPPoolList
  # metadata:
  #   resourceVersion: "989"
{'items': [{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'vxlanMode': 'Never', 'blockSize': 27, 'cidr': '10.0.1.0/24', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': "foo == 'bar'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '989', 'creationTimestamp': '2024-08-07T19:49:27Z', 'uid': '7c579e2b-e8ce-466d-8236-b6ee23165e11', 'name': 'ippool-name1'}}], 'kind': 'IPPoolList', 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '989'}}
Writing /tmp/input-data: 
apiVersion: projectcalico.org/v3
kind: Node
metadata:
  name: node4
spec:
  bgp:
    ipv4Address: 1.2.3.4/24
    ipv6Address: aa:bb:cc::ff/120
  orchRefs:
  - nodeName: node4
    orchestrator: k8s

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch create -f /tmp/input-data
  # Successfully created 1 'Node' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get node node4 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: Node
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:27Z"
  #   name: node4
  #   resourceVersion: "990"
  #   uid: 711f671e-1e15-4dcc-8b24-edee3b2e3960
  # spec:
  #   bgp:
  #     ipv4Address: 1.2.3.4/24
  #     ipv6Address: aa:bb:cc::ff/120
  #   orchRefs:
  #   - nodeName: node4
  #     orchestrator: k8s
  # status: {}
{'status': {}, 'kind': 'Node', 'spec': {'bgp': {'ipv4Address': '1.2.3.4/24', 'ipv6Address': 'aa:bb:cc::ff/120'}, 'orchRefs': [{'orchestrator': 'k8s', 'nodeName': 'node4'}]}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '990', 'creationTimestamp': '2024-08-07T19:49:27Z', 'uid': '711f671e-1e15-4dcc-8b24-edee3b2e3960', 'name': 'node4'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get clusterinfo default -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: ClusterInformation
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:27Z"
  #   name: default
  #   resourceVersion: "987"
  #   uid: a9772491-13db-48f0-982d-f48374f3356a
  # spec:
  #   clusterGUID: c1a0718a9c764ba0b419bb1bf5ef743d
  #   datastoreReady: true
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch ipam split --name=ippool-name1 4
  # Return code: 1
  # Datastore is not locked. Run the `calicoctl datastore migrate lock` command in order split the IP pools.
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch datastore migrate lock
  # Datastore locked.
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch ipam split --name=ippool-name2 4
  # Return code: 1
  # Unable to find IP pool with name ippool-name2: resource does not exist: IPPool(ippool-name2) with error: <nil>
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch ipam split --name=ippool-name1 3
  # Return code: 1
  # Error splitting the CIDR 10.0.1.0/24 into 3 CIDRs: Number to split CIDR into is not a valid power of 2: 3
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch ipam split --name=ippool-name1 512
  # Return code: 1
  # Error splitting the CIDR 10.0.1.0/24 into 512 CIDRs: The CIDR 10.0.1.0/24 is not large enough to be split into 512 parts
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch ipam split --name=ippool-name1 4
  # IP Pool ippool-name1 was successfully split into 4 smaller pools.Created split-ippool-name1-0 with CIDR 10.0.1.0/26.
  # Created split-ippool-name1-1 with CIDR 10.0.1.64/26.
  # Created split-ippool-name1-2 with CIDR 10.0.1.128/26.
  # Created split-ippool-name1-3 with CIDR 10.0.1.192/26.
  # Please refer to the documentation for final steps.
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool ippool-name1 -o yaml
  # Return code: 1
  # null
  # resource does not exist: IPPool(ippool-name1) with error: <nil>
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool split-ippool-name1-0 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:27Z"
  #   name: split-ippool-name1-0
  #   resourceVersion: "995"
  #   uid: 65bb2f08-9fb9-4e50-9758-8431753e55ad
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.0/26
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'vxlanMode': 'Never', 'blockSize': 27, 'cidr': '10.0.1.0/26', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': "foo == 'bar'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '995', 'creationTimestamp': '2024-08-07T19:49:27Z', 'uid': '65bb2f08-9fb9-4e50-9758-8431753e55ad', 'name': 'split-ippool-name1-0'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool split-ippool-name1-1 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:27Z"
  #   name: split-ippool-name1-1
  #   resourceVersion: "996"
  #   uid: 43c2d315-ae64-48e7-a906-d7ea34629869
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.64/26
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'vxlanMode': 'Never', 'blockSize': 27, 'cidr': '10.0.1.64/26', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': "foo == 'bar'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '996', 'creationTimestamp': '2024-08-07T19:49:27Z', 'uid': '43c2d315-ae64-48e7-a906-d7ea34629869', 'name': 'split-ippool-name1-1'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool split-ippool-name1-2 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:27Z"
  #   name: split-ippool-name1-2
  #   resourceVersion: "997"
  #   uid: 0fbc00a2-75d9-4ff5-87a0-4d07a1af9a54
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.128/26
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'vxlanMode': 'Never', 'blockSize': 27, 'cidr': '10.0.1.128/26', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': "foo == 'bar'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '997', 'creationTimestamp': '2024-08-07T19:49:27Z', 'uid': '0fbc00a2-75d9-4ff5-87a0-4d07a1af9a54', 'name': 'split-ippool-name1-2'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch get ippool split-ippool-name1-3 -o yaml
  # apiVersion: projectcalico.org/v3
  # kind: IPPool
  # metadata:
  #   creationTimestamp: "2024-08-07T19:49:27Z"
  #   name: split-ippool-name1-3
  #   resourceVersion: "998"
  #   uid: 96fa8d08-dac0-40e2-a1e3-9fde82a56702
  # spec:
  #   allowedUses:
  #   - Workload
  #   - Tunnel
  #   blockSize: 27
  #   cidr: 10.0.1.192/26
  #   ipipMode: Always
  #   nodeSelector: foo == 'bar'
  #   vxlanMode: Never
{'kind': 'IPPool', 'spec': {'ipipMode': 'Always', 'vxlanMode': 'Never', 'blockSize': 27, 'cidr': '10.0.1.192/26', 'allowedUses': ['Workload', 'Tunnel'], 'nodeSelector': "foo == 'bar'"}, 'apiVersion': 'projectcalico.org/v3', 'metadata': {'resourceVersion': '998', 'creationTimestamp': '2024-08-07T19:49:27Z', 'uid': '96fa8d08-dac0-40e2-a1e3-9fde82a56702', 'name': 'split-ippool-name1-3'}}
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch datastore migrate unlock
  # Datastore unlocked.
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool split-ippool-name1-0
  # Successfully deleted 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool split-ippool-name1-1
  # Successfully deleted 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool split-ippool-name1-2
  # Successfully deleted 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete ippool split-ippool-name1-3
  # Successfully deleted 1 'IPPool' resource(s)
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch delete node node4
  # Successfully deleted 1 'Node' resource(s)
ok ([33m2.8709s[0m)
Test that migrating Calico resources works properly ... SKIP: Datastore migration not supported in Enterprise
Test license validation operation are handled correctly. ... etcd RC: {"action":"delete","node":{"key":"/calico","dir":true,"modifiedIndex":205,"createdIndex":204},"prevNode":{"key":"/calico","dir":true,"modifiedIndex":204,"createdIndex":204}}
etcd RC: {"action":"set","node":{"key":"/calico/v1/config/UsageReportingEnabled","value":"False","modifiedIndex":206,"createdIndex":206}}

Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch validate -f test-data/licenses/expired-production-license.yaml
  # License status: expired
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch validate -f test-data/licenses/corrupt-license.yaml
  # Return code: 1
  # error decoding license file 'error loading license certificate: x509: invalid RDNSequence: invalid attribute value: invalid UTF-8 string'
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch validate -f test-data/v3/networkpolicy.yaml
  # Return code: 1
  # error reading license file 'open test-data/v3/networkpolicy.yaml: no such file or directory'
  # 
Got local IP from MY_IP=172.16.129.8
export ETCD_ENDPOINTS=http://172.16.129.8:2379; export ETCD_CA_CERT_FILE=; export ETCD_CERT_FILE=; export ETCD_KEY_FILE=; export DATASTORE_TYPE=etcdv3;  /code/bin/calicoctl-linux-amd64 --allow-version-mismatch validate -f /secrets/license.yaml
  # License status: valid
ok ([32m0.1798s[0m)

----------------------------------------------------------------------
XML: /code/report/nosetests.xml
[success] 6.59% tests.st.calicoctl.test_ipam_split.TestCalicoctlIPAMSplit.test_ipam_split_by_name: [33m2.8709s[0m
[success] 6.58% tests.st.calicoctl.test_ipam_split.TestCalicoctlIPAMSplit.test_ipam_split_by_cidr: [33m2.8678s[0m
[success] 6.21% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_get_delete_multiple_names: [33m2.7040s[0m
[success] 3.55% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_get: [33m1.5489s[0m
[success] 3.00% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_non_namespaced_6: [33m1.3075s[0m
[success] 2.25% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_replace_with_resource_version: [32m0.9803s[0m
[success] 1.93% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_non_namespaced_0: [32m0.8430s[0m
[success] 1.90% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_disallow_update_old_resource_version_1_apply: [32m0.8284s[0m
[success] 1.88% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_disallow_update_old_resource_version_0_replace: [32m0.8194s[0m
[success] 1.68% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_namespaced_tiered_1: [32m0.7329s[0m
[success] 1.66% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_namespaced_tiered_0: [32m0.7227s[0m
[success] 1.60% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_namespaced_1: [32m0.6966s[0m
[success] 1.60% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_namespaced_0: [32m0.6961s[0m
[success] 1.59% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_nets_truncation_0: [32m0.6939s[0m
[success] 1.55% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_export_flag: [32m0.6761s[0m
[success] 1.54% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_ip_reservation_truncation: [32m0.6713s[0m
[success] 1.54% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_nets_truncation_1: [32m0.6702s[0m
[success] 1.49% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_namespaced_3: [32m0.6513s[0m
[success] 1.45% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_namespaced_4: [32m0.6328s[0m
[success] 1.45% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_namespaced_2: [32m0.6313s[0m
[success] 1.42% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_stdin: [32m0.6166s[0m
[success] 1.25% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_label_command: [32m0.5468s[0m
[success] 1.17% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_globalthreatfeed: [32m0.5080s[0m
[success] 1.08% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_felixconfig: [32m0.4704s[0m
[success] 1.05% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_patch: [32m0.4578s[0m
[success] 1.01% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_bgpconfig: [32m0.4422s[0m
[success] 0.99% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_basic_crud_0: [32m0.4323s[0m
[success] 0.93% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_non_namespaced_tiered_1: [32m0.4063s[0m
[success] 0.90% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_non_namespaced_tiered_0: [32m0.3938s[0m
[success] 0.88% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_apply_with_resource_version: [32m0.3847s[0m
[success] 0.86% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_file_multi: [32m0.3726s[0m
[success] 0.80% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_json: [32m0.3489s[0m
[success] 0.79% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_kubecontrollersconfig: [32m0.3452s[0m
[success] 0.79% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_remoteclustserconfiguration: [32m0.3426s[0m
[success] 0.78% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_non_namespaced_10: [32m0.3412s[0m
[success] 0.77% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_non_namespaced_4: [32m0.3374s[0m
[success] 0.77% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_non_namespaced_1: [32m0.3354s[0m
[success] 0.77% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_non_namespaced_7: [32m0.3336s[0m
[success] 0.77% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_non_namespaced_3: [32m0.3335s[0m
[success] 0.76% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_no_config: [32m0.3326s[0m
[success] 0.76% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_non_namespaced_9: [32m0.3323s[0m
[success] 0.76% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_non_namespaced_8: [32m0.3302s[0m
[success] 0.75% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_non_namespaced_5: [32m0.3276s[0m
[success] 0.74% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_non_namespaced_2: [32m0.3237s[0m
[success] 0.73% tests.st.calicoctl.test_flags.TestCalicoctlCLIFlags.test_version_mismatch: [32m0.3202s[0m
[success] 0.73% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_file_single_list: [32m0.3160s[0m
[success] 0.72% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_non_namespaced_11: [32m0.3156s[0m
[success] 0.71% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_metadata_unchanged_0_create: [32m0.3073s[0m
[success] 0.70% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_clusterinfo: [32m0.3072s[0m
[success] 0.70% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_metadata_unchanged_1_apply: [32m0.3068s[0m
[success] 0.70% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_delete_with_resource_version: [32m0.3056s[0m
[success] 0.70% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_os_compat_3: [32m0.3052s[0m
[success] 0.67% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_os_compat_2: [32m0.2934s[0m
[success] 0.67% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_os_compat_0: [32m0.2919s[0m
[success] 0.67% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_os_compat_1: [32m0.2903s[0m
[success] 0.60% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_empty_name_is_illegal: [32m0.2633s[0m
[success] 0.59% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_update_1: [32m0.2568s[0m
[success] 0.59% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_disallow_crud_on_knp_defaults: [32m0.2551s[0m
[success] 0.57% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_update_2: [32m0.2477s[0m
[success] 0.56% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_update_0: [32m0.2441s[0m
[success] 0.54% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_tier_list_order: [32m0.2355s[0m
[success] 0.47% tests.st.calicoctl.test_crud.InvalidData.test_invalid_compound_profiles_rejected_0_compound_config: [32m0.2033s[0m
[success] 0.46% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_14_pool_invalidNet1: [32m0.2001s[0m
[success] 0.44% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_4_bgpPeer_invalidnodename: [32m0.1925s[0m
[success] 0.44% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_1_bgpPeer_invalidIP: [32m0.1907s[0m
[success] 0.43% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_24_profile_ICMPcode: [32m0.1864s[0m
[success] 0.43% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_9_policy_invalidLowPortinRange: [32m0.1861s[0m
[success] 0.43% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_17_pool_invalidNet4: [32m0.1858s[0m
[success] 0.43% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_7_policy_invalidHighPortinList: [32m0.1856s[0m
[success] 0.42% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_nets_no_truncation_0: [32m0.1824s[0m
[success] 0.42% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_23_profile_ICMPtype: [32m0.1823s[0m
[success] 0.42% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_13_policy_NetworkPolicyNameRejected: [32m0.1822s[0m
[success] 0.42% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_bgppeer_password: [32m0.1821s[0m
[success] 0.42% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_bgppeer_node_selector: [32m0.1818s[0m
[success] 0.42% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_20_pool_invalidNet8: [32m0.1818s[0m
[success] 0.42% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_nets_no_truncation_1: [32m0.1814s[0m
[success] 0.42% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_12_policy_invalidAction: [32m0.1813s[0m
[success] 0.41% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_bgp_reachable_by: [32m0.1802s[0m
[success] 0.41% tests.st.calicoctl.test_validate.TestCalicoctlValidate.test_validate_license: [32m0.1798s[0m
[success] 0.41% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_5_bgpPeer_unrecognisedfield: [32m0.1793s[0m
[success] 0.41% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_15_pool_invalidNet2: [32m0.1793s[0m
[success] 0.41% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_6_hostEndpoint_invalidInterface: [32m0.1788s[0m
[success] 0.41% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_ip_reservation_no_truncation: [32m0.1782s[0m
[success] 0.41% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_21_pool_invalidIpIp1: [32m0.1766s[0m
[success] 0.40% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_22_pool_invalidIpIp2: [32m0.1757s[0m
[success] 0.40% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_11_policy_invalidReversedRange: [32m0.1753s[0m
[success] 0.40% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_8_policy_invalidHighPortinRange: [32m0.1752s[0m
[success] 0.40% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_10_policy_invalidLowPortinList: [32m0.1749s[0m
[success] 0.40% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_3_bgpPeer_invalidIpv6: [32m0.1739s[0m
[success] 0.40% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_18_pool_invalidNet6: [32m0.1728s[0m
[success] 0.40% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_19_pool_invalidNet7: [32m0.1726s[0m
[success] 0.39% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_2_bgpPeer_apiversion: [32m0.1707s[0m
[success] 0.39% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_16_pool_invalidNet3: [32m0.1704s[0m
[success] 0.39% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_bgp_ttl_security: [32m0.1702s[0m
[success] 0.39% tests.st.calicoctl.test_crud.InvalidData.test_invalid_profiles_rejected_0_bgpPeer_invalidASnum: [32m0.1692s[0m
[success] 0.34% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_apply_all_invalid_resources: [32m0.1476s[0m
[success] 0.33% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_create_all_invalid_resources: [32m0.1428s[0m
[success] 0.33% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_create_single_invalid_resource: [32m0.1422s[0m
[success] 0.32% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_reject_unknown_resource: [32m0.1391s[0m
[success] 0.31% tests.st.calicoctl.test_crud.TestCalicoctlCommands.test_apply_single_invalid_resource: [32m0.1355s[0m
[success] 0.28% tests.st.calicoctl.test_flags.TestCalicoctlCLIFlags.test_bad_flags: [32m0.1218s[0m
[success] 0.23% tests.st.calicoctl.test_flags.TestCalicoctlCLIFlags.test_usage: [32m0.0998s[0m
----------------------------------------------------------------------
Ran 103 tests in 43.589s

OK (SKIP=1)
make stop-etcd
make[1]: Entering directory '/home/mazdak/src/calico-private/calicoctl'
calico-etcd
make[1]: Leaving directory '/home/mazdak/src/calico-private/calicoctl'
make stop-kubernetes-master
make[1]: Entering directory '/home/mazdak/src/calico-private/calicoctl'
# Delete the cluster role binding.
docker exec st-apiserver-6443 kubectl delete clusterrolebinding anonymous-admin
Error from server (Timeout): Timeout: request did not complete within requested timeout - context deadline exceeded
make[1]: [Makefile:234: stop-kubernetes-master] Error 1 (ignored)
# Stop master components.
docker rm -f st-apiserver-6443 st-controller-manager-6443
st-apiserver-6443
st-controller-manager-6443
make[1]: Leaving directory '/home/mazdak/src/calico-private/calicoctl'
