apiVersion: v1
kind: bgpPeer
metadata:
  scope: node
  node: 127.0.0.1
  peerIP: 192.168.1.1
spec:
  asNumber: 63400

---

apiVersion: v1
kind: bgpPeer
metadata:
  scope: global
  peerIP: 192.168.1.2
spec:
  asNumber: 63400

---

apiVersion: v1
kind: ipPool
metadata:
  cidr: 10.1.0.0/16
spec:
  ipip:
    enabled: true
    mode: cross-subnet
  nat-outgoing: true
  disabled: false

---

apiVersion: v1
kind: policy
metadata:
  name: allow-tcp-6379
spec:
  selector: role == 'database'
  types:
  - ingress
  - egress
  ingress:
  - action: allow
    protocol: tcp
    source:
      selector: role == 'frontend'
    destination:
      ports:
      - 6379
  egress:
  - action: allow
